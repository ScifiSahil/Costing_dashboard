/*! For license information please see 502.b12d9a10154af548b126.js.LICENSE.txt */
"use strict";(self.webpackChunkcost_screener_backend=self.webpackChunkcost_screener_backend||[]).push([[502],{502:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Le});var n=r(1024),a=r.n(n);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,c=[],i=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw a}}return c}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const m=function(e){var t,r,o=e.mode,l=[{plant:"R1",total:10.5,sales:15.2,production:12.8,tonnage:9.3,categories:{RawMaterial:3.5,Consumable:1.2,Power:1.5,Labour:2,Fuel:1,SubContract:.8,RepairMaintenance:.3,MachineHire:.1,Establishment:.1}},{plant:"R2",total:14.2,sales:15.2,production:12.8,tonnage:9.3,categories:{RawMaterial:5.1,Consumable:2,Power:1.8,Labour:2.5,Fuel:1.2,SubContract:1,RepairMaintenance:.4,MachineHire:.1,Establishment:.1}},{plant:"Mundhva",total:12.9,sales:15.2,production:12.8,tonnage:9.3,categories:{RawMaterial:4.2,Consumable:1.7,Power:1.6,Labour:2.3,Fuel:1.1,SubContract:.9,RepairMaintenance:.6,MachineHire:.3,Establishment:.2}},{plant:"Baramati",total:16.1,sales:15.2,production:12.8,tonnage:9.3,categories:{RawMaterial:5.6,Consumable:2.2,Power:2,Labour:2.8,Fuel:1.5,SubContract:1.3,RepairMaintenance:.5,MachineHire:.1,Establishment:.1}}],i=u((0,n.useState)("sales"),2),m=i[0],f=i[1],p="Machining"===o?[{plant:"Khed",total:20.1,categories:{RawMaterial:7.2,Consumable:3,Power:2.5,Labour:3.3,Fuel:1.6,SubContract:1.5,RepairMaintenance:.6,MachineHire:.3,Establishment:.5}},{plant:"Chakan",total:21.4,categories:{RawMaterial:7.5,Consumable:3.1,Power:2.6,Labour:3.5,Fuel:1.7,SubContract:1.7,RepairMaintenance:.7,MachineHire:.3,Establishment:.1}},{plant:"Ambethan-1",total:19.3,categories:{RawMaterial:6.9,Consumable:2.8,Power:2.2,Labour:3,Fuel:1.5,SubContract:1.6,RepairMaintenance:.6,MachineHire:.2,Establishment:.1}},{plant:"Ambethan-2",total:22,categories:{RawMaterial:7.9,Consumable:3.4,Power:2.7,Labour:3.6,Fuel:1.8,SubContract:1.8,RepairMaintenance:.7,MachineHire:.3,Establishment:.1}}]:l.map((function(e){return c(c({},e),{},{total:"sales"===m?e.sales:"production"===m?e.production:e.tonnage})})),h=u((0,n.useState)(null),2),g=h[0],b=h[1],v=u((0,n.useState)(null),2),y=v[0],x=v[1],w=(r=p,function(e){if(Array.isArray(e))return d(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||s(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort((function(e,t){return e.total-t.total})),E={RawMaterial:"#FF5757",Consumable:"#B794F6",Power:"#4299E1",Labour:"#F687B3",Fuel:"#F6AD55",SubContract:"#48BB78",RepairMaintenance:"#ED8936",MachineHire:"#38B2AC",Establishment:"#6B46C1"},N={RawMaterial:"Raw Material",Consumable:"Consumable",Power:"Power",Labour:"Labour",Fuel:"Fuel",SubContract:"Sub Contract",RepairMaintenance:"Repair & Maintenance",MachineHire:"Machine Hire",Establishment:"Establishment"},k=300,C=60,L=function(e){var t=[],r=0;return Object.entries(e.categories).sort((function(e,t){return t[1]-e[1]})).map((function(e){return u(e,1)[0]})).forEach((function(n,a){var o=e.categories[n];if(o>0){var l=o/e.total*k;a>0&&(r+=5),t.push({category:n,value:o,y:k-r-l,height:l,color:E[n],stackIndex:a}),r+=l}})),t},S=function(e,t,r,n){var o=[],l={};return e.forEach((function(e){l[e.category]=e})),Object.keys(l).forEach((function(l){var c=e.find((function(e){return e.category===l})),i=t.find((function(e){return e.category===l}));if(c&&i){var u=c.y+20,s=c.y+c.height+20,d=i.y+20,m=i.y+i.height+20,f=r+C+.3*(n-r-C),p=r+C+.7*(n-r-C),h="\n          M ".concat(r+C," ").concat(u,"\n          C ").concat(f," ").concat(u,", ").concat(p," ").concat(d,", ").concat(n," ").concat(d,"\n          L ").concat(n," ").concat(m,"\n          C ").concat(p," ").concat(m,", ").concat(f," ").concat(s,", ").concat(r+C," ").concat(s,"\n          Z\n        ");o.push(a().createElement("path",{key:"".concat(l,"-flow-").concat(r,"-").concat(n),d:h,fill:c.color,fillOpacity:"0.2",stroke:"none"}))}})),o},j=(t={},Object.keys(w[0].categories).forEach((function(e){var r=w.reduce((function(t,r){return t+r.categories[e]}),0);t[e]=r/w.length})),Object.entries(t).sort((function(e,t){return e[1]-t[1]})).map((function(e){return u(e,1)[0]}))),B={};return Object.keys(w[0].categories).forEach((function(e){B[e]=w.reduce((function(t,r){return t+r.categories[e]}),0)})),a().createElement("div",{className:"p-3 bg-gray-50 min-h-screen flex"},a().createElement("div",{className:"max-w-6xl mx-auto w-full flex flex-col"},"Forging"===o&&a().createElement("div",{className:"flex gap-3 mb-4"},["sales","production","tonnage"].map((function(e){return a().createElement("button",{key:e,onClick:function(){return f(e)},className:"px-4 py-1 rounded-lg text-sm font-medium border \n      ".concat(m===e?"bg-blue-600 text-white":"bg-white text-gray-700")},e.charAt(0).toUpperCase()+e.slice(1)," Value")}))),a().createElement("div",{className:"flex flex-1 items-center justify-center"},a().createElement("svg",{width:1060,height:400,className:"overflow-visible"},a().createElement("rect",{x:180,y:20,width:740,height:k,fill:"#F9FAFB",rx:"6",ry:"6"}),j.map((function(e,t){var r=40+28*t;return a().createElement("g",{key:"y-label-".concat(e),onMouseEnter:function(){return x(e)},onMouseLeave:function(){return x(null)},opacity:y&&y!==e?.3:1},a().createElement("rect",{x:15,y:r-8,width:12,height:12,fill:E[e],rx:"6",ry:"6"}),a().createElement("text",{x:32,y:r+3,className:"text-xs font-medium ".concat(y===e?"fill-blue-600":"fill-gray-700"),textAnchor:"start"},N[e]))})),S(L(w[0]),L(w[1]),180,340),S(L(w[1]),L(w[2]),340,500),S(L(w[2]),L(w[3]),500,660),w.map((function(e,t){var r=180+160*t,n=0,o=Object.entries(e.categories).sort((function(e,t){return t[1]-e[1]})).map((function(t,r){var a=u(t,2),o=a[0],l=a[1],c=l/e.total*k,i=k-n-c;return n+=c+5,{category:o,value:l,height:c,y:i,color:E[o]}}));return a().createElement("g",{key:e.plant},o.map((function(t){return a().createElement("g",{key:"".concat(e.plant,"-").concat(t.category)},a().createElement("defs",null,a().createElement("linearGradient",{id:"gradient-".concat(e.plant,"-").concat(t.category),x1:"0%",y1:"0%",x2:"100%",y2:"0%"},a().createElement("stop",{offset:"0%",stopColor:t.color,stopOpacity:"1"}),a().createElement("stop",{offset:"50%",stopColor:t.color,stopOpacity:"1"}),a().createElement("stop",{offset:"100%",stopColor:t.color,stopOpacity:"1"}))),a().createElement("rect",{x:r,y:t.y+20,width:C,height:t.height,fill:"url(#gradient-".concat(e.plant,"-").concat(t.category,")"),rx:"6",ry:"6",onMouseEnter:function(){return x(t.category)},onMouseMove:function(r){return b({x:r.clientX,y:r.clientY,plant:e.plant,category:t.category,value:t.value,Sale:(t.value/e.total*100).toFixed(1)})},onMouseLeave:function(){return x(null)},opacity:y&&y!==t.category?.3:1}),y===t.category&&g&&g.plant===e.plant&&a().createElement("foreignObject",{x:r+C+8,y:t.y-50,width:150,height:50,style:{pointerEvents:"none",zIndex:999}},a().createElement("div",{className:"bg-white shadow-md rounded px-2 py-1 text-xs text-gray-700 border"},a().createElement("div",{className:"font-medium"},e.plant),a().createElement("div",null,N[t.category],": â‚¹",t.value.toFixed(2)," Cr"),a().createElement("div",null,"Sales:"," ",(t.value/e.total*100).toFixed(1),"%"))))})),a().createElement("text",{x:r+30,y:345,textAnchor:"middle",className:"text-sm font-semibold fill-gray-700"},e.plant),a().createElement("text",{x:r+30,y:362,textAnchor:"middle",className:"text-xs fill-gray-500"},"â‚¹",e.total.toFixed(2),"Cr"))}))))),a().createElement("div",{className:"w-96 ml-6 bg-white rounded-2xl shadow-xl border border-gray-200/50 p-6"},a().createElement("div",{className:"flex items-center gap-3 mb-6"},a().createElement("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg"},"ðŸ’¡"),a().createElement("h3",{className:"text-xl font-bold text-gray-800"},"Key Insights")),"Machining"===o&&a().createElement("div",{className:"space-y-4 mb-6"},a().createElement("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200"},a().createElement("div",{className:"flex items-center justify-between"},a().createElement("div",null,a().createElement("p",{className:"text-sm font-medium text-red-700"},"Highest Cost Plant"),a().createElement("p",{className:"text-xl font-bold text-red-800"},w[w.length-1].plant),a().createElement("p",{className:"text-lg font-semibold text-red-600"},"â‚¹",w[w.length-1].total.toFixed(2)," Cr")))),a().createElement("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200"},a().createElement("div",{className:"flex items-center justify-between"},a().createElement("div",null,a().createElement("p",{className:"text-sm font-medium text-green-700"},"Lowest Cost Plant"),a().createElement("p",{className:"text-xl font-bold text-green-800"},w[0].plant),a().createElement("p",{className:"text-lg font-semibold text-green-600"},"â‚¹",w[0].total.toFixed(2)," Cr")))),a().createElement("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-xl p-4"},a().createElement("h4",{className:"text-sm font-semibold text-purple-700 mb-3 flex items-center gap-2"},"ðŸ“Š Major Cost Contributors"),a().createElement("div",{className:"space-y-3"},Object.entries(B).sort((function(e,t){return t[1]-e[1]})).slice(0,3).map((function(e,t){var r=u(e,2),n=r[0],o=r[1],l=(o/Object.values(B).reduce((function(e,t){return e+t}),0)*100).toFixed(1);return a().createElement("div",{key:n,className:"relative"},a().createElement("div",{className:"flex justify-between items-center mb-1"},a().createElement("span",{className:"text-sm font-medium text-gray-700"},"#",t+1," ",N[n]),a().createElement("span",{className:"text-sm font-bold text-purple-600"},l,"%")),a().createElement("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden"},a().createElement("div",{className:"h-2.5 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(l,"%"),background:"linear-gradient(90deg, ".concat(E[n],", ").concat(E[n],"CC)")}})),a().createElement("div",{className:"text-xs text-gray-500 mt-1"},"â‚¹",o.toFixed(2)," Cr total"))}))))),"Forging"===o&&"sales"===m&&a().createElement("div",{className:"space-y-4"},a().createElement("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 border border-yellow-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200"},a().createElement("p",{className:"text-sm font-medium text-amber-700"},"Top Sales Plant"),a().createElement("p",{className:"text-xl font-bold text-amber-800"},l.reduce((function(e,t){return e.sales>t.sales?e:t})).plant)),a().createElement("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200"},a().createElement("p",{className:"text-sm font-medium text-blue-700"},"Total Sales"),a().createElement("p",{className:"text-xl font-bold text-blue-800"},"â‚¹",l.reduce((function(e,t){return e+t.sales}),0).toFixed(1)," ","Cr"))),"Forging"===o&&"production"===m&&a().createElement("div",{className:"space-y-4"},a().createElement("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 border border-orange-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200"},a().createElement("p",{className:"text-sm font-medium text-orange-700"},"Highest Production Plant"),a().createElement("p",{className:"text-xl font-bold text-orange-800"},l.reduce((function(e,t){return e.production>t.production?e:t})).plant)),a().createElement("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200"},a().createElement("p",{className:"text-sm font-medium text-green-700"},"Average Production"),a().createElement("p",{className:"text-xl font-bold text-green-800"},(l.reduce((function(e,t){return e+t.production}),0)/l.length).toFixed(1)))),"Forging"===o&&"tonnage"===m&&a().createElement("div",{className:"space-y-4"},a().createElement("div",{className:"bg-gradient-to-r from-pink-50 to-rose-50 border border-pink-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200"},a().createElement("p",{className:"text-sm font-medium text-pink-700"},"Highest Tonnage Plant"),a().createElement("p",{className:"text-xl font-bold text-pink-800"},l.reduce((function(e,t){return e.tonnage>t.tonnage?e:t})).plant)),a().createElement("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200"},a().createElement("p",{className:"text-sm font-medium text-indigo-700"},"Total Tonnage"),a().createElement("p",{className:"text-xl font-bold text-indigo-800"},l.reduce((function(e,t){return e+t.tonnage}),0).toFixed(1))))))};r(8595);var f=r(5481),p=r(8687),h=r(3023),g=r(5358),b=r(8861),v=r(2335),y=r(4545),x=r(943),w=r(4195),E=r(6649),N=r(8081),k=r(5091),C=r(9461),L=r(1914),S=r(9503),j=r(9858),B=r(9589),A=r(116),P=r(1352),T=r(2701);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,c=[],i=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const F=function(e){var t=e.kpiName,r=e.month,o=e.position,l=e.cardRef,c=e.onClose,i=O((0,n.useState)(null),2),u=i[0],s=i[1],d=O((0,n.useState)("action"),2),m=d[0],f=d[1];if((0,n.useEffect)((function(){if(!u&&o&&null!=l&&l.current){var e=l.current.getBoundingClientRect(),t=o.y-185-10,r=o.x-115;t<5&&(t=5),r<5&&(r=5),r+230>e.width-5&&(r=e.width-230-5),s({top:t,left:r})}}),[o,l,u]),!u)return null;var p=[{id:"action",label:"Action",icon:C.Z,color:"#3b82f6",bg:"#eff6ff",text:"text-blue-600"},{id:"improve",label:"Improve",icon:L.Z,color:"#10b981",bg:"#ecfdf5",text:"text-emerald-600"},{id:"insights",label:"Insights",icon:S.Z,color:"#f97316",bg:"#fff7ed",text:"text-orange-600"}],h=p.find((function(e){return e.id===m})),g={action:{title:"Action Required",icon:j.Z,items:["Cost increased by 12%","Peak usage: night shift","Material waste: 8%"]},improve:{title:"Improvement Steps",icon:B.Z,items:["Schedule maintenance","Negotiate bulk discounts","Optimize shift timings"]},insights:{title:"Root Cause",icon:A.Z,items:["High production volume","Equipment downtime","Supplier price hike"]}}[m],b=g.icon;return a().createElement("div",{className:"absolute",style:{top:"".concat(u.top,"px"),left:"".concat(u.left,"px"),width:"230px",pointerEvents:"all",zIndex:999999},onMouseDown:function(e){e.stopPropagation(),e.preventDefault()},onClick:function(e){e.stopPropagation(),e.preventDefault()}},a().createElement("div",{className:"absolute -bottom-[6px] left-1/2 transform -translate-x-1/2 w-3 h-3 rotate-45",style:{backgroundColor:"#f9fafb",borderRight:"1px solid #e5e7eb",borderBottom:"1px solid #e5e7eb",zIndex:999998}}),a().createElement("div",{className:"rounded-lg overflow-hidden",style:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.15)"}},a().createElement("div",{className:"px-2.5 py-1.5 flex items-center justify-between",style:{backgroundColor:h.color}},a().createElement("div",{className:"flex items-center gap-2"},a().createElement("span",{className:"text-[13px] font-bold text-white"},t),a().createElement("span",{className:"text-[10px] text-white/70 font-medium"},"â€¢ ",r)),a().createElement("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),c()},className:"w-5 h-5 rounded bg-white/20 hover:bg-white/30 flex items-center justify-center"},a().createElement(P.Z,{className:"w-3 h-3 text-white"}))),a().createElement("div",{className:"flex border-b border-gray-200",style:{backgroundColor:"#f9fafb"},onMouseDown:function(e){return e.stopPropagation()},onClick:function(e){return e.stopPropagation()}},p.map((function(e){var t=e.icon,r=m===e.id;return a().createElement("button",{key:e.id,type:"button",onClick:function(t){t.stopPropagation(),t.preventDefault(),f(e.id)},className:"flex-1 py-1 flex items-center justify-center gap-1 text-[10px] font-bold transition-all ".concat(r?"".concat(e.text," border-b-2"):"text-gray-500 hover:bg-gray-100"),style:{backgroundColor:r?e.bg:"transparent",borderBottomColor:r?e.color:"transparent"}},a().createElement(t,{className:"w-3 h-3"}),a().createElement("span",null,e.label))}))),a().createElement("div",{className:"p-2.5",style:{backgroundColor:h.bg}},a().createElement("div",{className:"flex items-start gap-2"},a().createElement("div",{className:"w-6 h-6 rounded flex items-center justify-center flex-shrink-0",style:{backgroundColor:h.color}},a().createElement(b,{className:"w-3 h-3 text-white"})),a().createElement("div",{className:"flex-1"},a().createElement("h4",{className:"font-bold text-gray-800 text-[12px] mb-1"},g.title),a().createElement("ul",{className:"space-y-0.5"},g.items.map((function(e,t){return a().createElement("li",{key:t,className:"flex items-center gap-1.5 text-[11px] text-gray-700"},a().createElement("span",{className:"w-1 h-1 rounded-full flex-shrink-0",style:{backgroundColor:h.color}}),a().createElement("span",{className:"font-semibold"},e))})))))),a().createElement("div",{className:"px-2.5 py-1.5 flex gap-2 border-t border-gray-200",style:{backgroundColor:"#f9fafb"}},a().createElement("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),c()},className:"flex-1 py-1 rounded text-[11px] font-bold bg-gray-200 text-gray-700 hover:bg-gray-300 transition-all"},"Close"),a().createElement("button",{onClick:function(e){e.stopPropagation(),e.preventDefault()},className:"flex-1 py-1 rounded text-[11px] font-bold text-white hover:opacity-90 transition-all flex items-center justify-center gap-1",style:{backgroundColor:h.color}},"Details",a().createElement(T.Z,{className:"w-3 h-3"})))))};var _=r(8463),G=r(1276),R=r(9525),D=r(1596),W=r(1408),I=r(7114),H=r(1240),Z=r(5246),z=r(8761),K=r(8915),Y=r(8583),U=r(3742),X=r(1749),J=r(6998),V=r(3510),$=r(8814),q=r(4622),Q=r(4998),ee=r(9967);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(){re=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,a){var o=t&&t.prototype instanceof m?t:m,l=Object.create(o.prototype),c=new C(a||[]);return n(l,"_invoke",{value:w(e,r,c)}),l}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function m(){}function f(){}function p(){}var h={};i(h,o,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==t&&r.call(b,o)&&(h=b);var v=p.prototype=m.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(n,o,l,c){var i=s(e[n],e,o);if("throw"!==i.type){var u=i.arg,d=u.value;return d&&"object"==te(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,l,c)}),(function(e){a("throw",e,l,c)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return a("throw",e,l,c)}))}c(i.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var l=r.delegate;if(l){var c=E(l,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var i=s(e,t,r);if("normal"===i.type){if(n=r.done?"completed":"suspendedYield",i.arg===d)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n="completed",r.method="throw",r.arg=i.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=s(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=p,n(v,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(x.prototype),i(x.prototype,l,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var l=new x(u(t,r,n,a),o);return e.isGeneratorFunction(r)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},y(v),i(v,c,"Generator"),i(v,o,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=L,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return l.type="throw",l.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),i=r.call(o,"finallyLoc");if(c&&i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function ne(e,t,r,n,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,a)}function ae(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){ne(o,n,a,l,c,"next",e)}function c(e){ne(o,n,a,l,c,"throw",e)}l(void 0)}))}}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,c=[],i=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];const ie=function(e){e.theme;var t=e.compact,r=void 0!==t&&t,o=(0,n.useRef)(null),l=oe((0,n.useState)(null),2),c=l[0],i=l[1],u=oe((0,n.useState)(0),2),s=u[0],d=u[1],m=oe((0,n.useState)({from:1,to:12}),2),f=m[0],p=m[1],h=(0,ee.W)((function(e){return e.monthRange})),g=(0,ee.W)((function(e){return e.setMonthRange})),b=(0,ee.W)((function(e){return e.currentYear})),v=(0,ee.W)((function(e){return e.setCurrentYear})),y=(0,ee.W)((function(e){return e.viewType})),x=(0,ee.W)((function(e){return e.fetchCostData})),w=(0,ee.W)((function(e){return e.apiLoading})),E=(new Date).getMonth()+1,N=[{label:"Current Month",value:"current",from:E,to:E},{label:"Last 3M",value:"3m",from:Math.max(1,E-2),to:E},{label:"Last 6M",value:"6m",from:Math.max(1,E-5),to:E},{label:"YTD",value:"ytd",from:1,to:E},{label:"Full Year",value:"full",from:1,to:12}],k=function(){var e=ae(re().mark((function e(t){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:return g(t.from,t.to),e.next=5,x(t.from,t.to,b,y);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){return(e-1)/11*100},L=function(e){var t=Math.round(e/100*11)+1;return Math.max(1,Math.min(12,t))},S=function(){var e=ae(re().mark((function e(t,r){var n;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t>r&&(t=(n=[r,t])[0],r=n[1]),g(t,r),e.next=4,x(t,r,b,y);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),j=function(e,t){var r,n;w||(e.preventDefault(),e.stopPropagation(),i(t),d(e.clientX||(null===(r=e.touches)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.clientX)),p({from:h.from,to:h.to}))},B=(0,n.useCallback)((function(e){var t,r;if(c&&o.current){var n=e.clientX||(null===(t=e.touches)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.clientX),a=o.current.getBoundingClientRect(),l=(n-a.left)/a.width*100,i=L(l);if("start"===c)i<=h.to&&g(i,h.to);else if("end"===c)i>=h.from&&g(h.from,i);else if("range"===c){var u=n-s,d=Math.round(u/a.width*11),m=f.from+d,p=f.to+d;m<1&&(p+=1-m,m=1),p>12&&(m-=p-12,p=12),(m=Math.max(1,Math.min(12,m)))<=(p=Math.max(1,Math.min(12,p)))&&g(m,p)}}}),[c,h,s,f,g]),A=(0,n.useCallback)(ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=4;break}return i(null),e.next=4,x(h.from,h.to,b,y);case 4:case"end":return e.stop()}}),e)}))),[c,h,b,y,x]);(0,n.useEffect)((function(){return c&&(window.addEventListener("mousemove",B),window.addEventListener("mouseup",A),window.addEventListener("touchmove",B),window.addEventListener("touchend",A)),function(){window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",A),window.removeEventListener("touchmove",B),window.removeEventListener("touchend",A)}}),[c,B,A]);var P,T=function(){var e=ae(re().mark((function e(t){var r;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=2;break}return e.abrupt("return");case 2:if(!((r=b+t)>=2020&&r<=(new Date).getFullYear())){e.next=7;break}return v(r),e.next=7,x(h.from,h.to,r,y);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=C(h.from),M=C(h.to),F=(null==(P=N.find((function(e){return e.from===h.from&&e.to===h.to})))?void 0:P.value)||null;return a().createElement("div",{className:"".concat(r?"px-5 py-4":"p-6"," relative")},a().createElement("div",{className:"flex items-center justify-between mb-5"},a().createElement("div",{className:"flex items-center gap-3"},a().createElement("button",{onClick:function(){return T(-1)},disabled:w||b<=2020,className:"p-2 rounded-lg transition-all ".concat(w||b<=2020?"opacity-40 cursor-not-allowed":"hover:bg-gray-100 active:scale-95")},a().createElement($.Z,{className:"w-6 h-6 text-gray-600"})),a().createElement("div",{className:"flex items-center gap-2 px-5 py-2.5 bg-blue-50 rounded-xl border-2 border-blue-300"},a().createElement(q.Z,{className:"w-6 h-6 text-blue-600"}),a().createElement("span",{className:"text-lg font-extrabold text-gray-800"},b)),a().createElement("button",{onClick:function(){return T(1)},disabled:w||b>=(new Date).getFullYear(),className:"p-2 rounded-lg transition-all ".concat(w||b>=(new Date).getFullYear()?"opacity-40 cursor-not-allowed":"hover:bg-gray-100 active:scale-95")},a().createElement(Q.Z,{className:"w-6 h-6 text-gray-600"}))),a().createElement("div",{className:"flex items-center gap-2"},N.map((function(e){return a().createElement("button",{key:e.value,onClick:function(){return k(e)},disabled:w,className:"px-4 py-2.5 rounded-xl text-base font-bold transition-all ".concat(F===e.value?"bg-blue-500 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"," ").concat(w?"opacity-50 cursor-not-allowed":"")},e.label)})))),a().createElement("div",{className:"relative pt-2"},a().createElement("div",{className:"flex justify-between mb-4 px-1"},ce.map((function(e,t){var r=t+1,n=r>=h.from&&r<=h.to,o=r===h.from||r===h.to;return a().createElement("span",{key:e,className:"text-base font-bold transition-all cursor-pointer select-none px-1 ".concat(o?"text-blue-600 scale-110":n?"text-blue-500":"text-gray-400"),onClick:function(){w||(Math.abs(r-h.from)<=Math.abs(r-h.to)&&r<=h.to?S(r,h.to):r>=h.from&&S(h.from,r))}},e)}))),a().createElement("div",{ref:o,className:"relative h-5 bg-gray-200 rounded-full cursor-pointer overflow-visible",onClick:function(e){if(!w&&!c){var t=o.current.getBoundingClientRect(),r=(e.clientX-t.left)/t.width*100,n=L(r),a=C(h.from),l=C(h.to),i=r;Math.abs(i-a)<Math.abs(i-l)?n<=h.to&&S(n,h.to):n>=h.from&&S(h.from,n)}}},a().createElement("div",{className:"absolute h-full bg-blue-400 rounded-full transition-all duration-150 shadow-md",style:{left:"".concat(O,"%"),width:"".concat(M-O,"%")}}),a().createElement("div",{className:"absolute h-full cursor-grab active:cursor-grabbing",style:{left:"".concat(O,"%"),width:"".concat(M-O,"%")},onMouseDown:function(e){return j(e,"range")},onTouchStart:function(e){return j(e,"range")}}),a().createElement("div",{className:"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-7 h-7 \n              bg-white border-[3px] border-blue-500 rounded-full shadow-lg cursor-ew-resize\n              hover:scale-125 hover:border-blue-600 transition-transform z-20\n              ".concat("start"===c?"scale-125 border-blue-600 shadow-xl":""),style:{left:"".concat(O,"%")},onMouseDown:function(e){return j(e,"start")},onTouchStart:function(e){return j(e,"start")}},a().createElement("div",{className:"absolute inset-1.5 bg-blue-500 rounded-full"})),a().createElement("div",{className:"absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-7 h-7 \n              bg-white border-[3px] border-blue-500 rounded-full shadow-lg cursor-ew-resize\n              hover:scale-125 hover:border-blue-600 transition-transform z-20\n              ".concat("end"===c?"scale-125 border-blue-600 shadow-xl":""),style:{left:"".concat(M,"%")},onMouseDown:function(e){return j(e,"end")},onTouchStart:function(e){return j(e,"end")}},a().createElement("div",{className:"absolute inset-1.5 bg-blue-500 rounded-full"})),ce.map((function(e,t){return a().createElement("div",{key:t,className:"absolute top-1/2 -translate-y-1/2 w-0.5 h-3 bg-gray-300 rounded-full",style:{left:"".concat(t/11*100,"%")}})})))),w&&a().createElement("div",{className:"absolute inset-0 bg-white/50 rounded-xl flex items-center justify-center"},a().createElement("div",{className:"w-7 h-7 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"})))};function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ue(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ue(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,l,c=[],i=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(u)throw a}}return c}}(e,t)||pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){if(e){if("string"==typeof e)return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(e,t):void 0}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ge(){ge=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,a){var o=t&&t.prototype instanceof m?t:m,l=Object.create(o.prototype),c=new C(a||[]);return n(l,"_invoke",{value:w(e,r,c)}),l}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d={};function m(){}function f(){}function p(){}var h={};i(h,o,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(L([])));b&&b!==t&&r.call(b,o)&&(h=b);var v=p.prototype=m.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function a(n,o,l,c){var i=s(e[n],e,o);if("throw"!==i.type){var u=i.arg,d=u.value;return d&&"object"==ue(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,l,c)}),(function(e){a("throw",e,l,c)})):t.resolve(d).then((function(e){u.value=e,l(u)}),(function(e){return a("throw",e,l,c)}))}c(i.arg)}var o;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function w(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return{value:void 0,done:!0}}for(r.method=a,r.arg=o;;){var l=r.delegate;if(l){var c=E(l,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var i=s(e,t,r);if("normal"===i.type){if(n=r.done?"completed":"suspendedYield",i.arg===d)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n="completed",r.method="throw",r.arg=i.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=s(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function L(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=p,n(v,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(x.prototype),i(x.prototype,l,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var l=new x(u(t,r,n,a),o);return e.isGeneratorFunction(r)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},y(v),i(v,c,"Generator"),i(v,o,(function(){return this})),i(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=L,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return l.type="throw",l.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),i=r.call(o,"finallyLoc");if(c&&i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=e,l.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function be(e,t,r,n,a,o,l){try{var c=e[o](l),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,a)}function ve(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function l(e){be(o,n,a,l,c,"next",e)}function c(e){be(o,n,a,l,c,"throw",e)}l(void 0)}))}}var ye={ocean:{name:"Ocean Breeze",mainBg:"bg-gradient-to-br from-blue-50 via-cyan-50 to-teal-100",cardBg:"bg-white/90 backdrop-blur-xl",modalBg:"bg-white/95 backdrop-blur-xl",primaryText:"text-slate-800",secondaryText:"text-slate-600",mutedText:"text-slate-500",border:"border-cyan-200/60",shadow:"shadow-xl shadow-cyan-400/20",chartBg:"bg-gradient-to-br from-white via-cyan-50/50 to-blue-50/40",gridColor:"#e0f2fe",buttonBg:"bg-gradient-to-r from-cyan-100 to-blue-100",buttonHover:"hover:from-cyan-200 hover:to-blue-200",cardGradient:"from-cyan-50 via-blue-50 to-teal-100",dotPattern:"from-cyan-500/5 via-blue-500/10 to-teal-500/5",accentGradient:"from-cyan-500 via-blue-500 to-teal-600",glowEffect:"shadow-2xl shadow-cyan-400/30",hoverGlow:"hover:shadow-2xl hover:shadow-blue-500/40",chartColors:{actualLine:"#06b6d4",predictedLine:"#3b82f6",targetLine:"#fbbf24",actualFill:"rgba(6, 182, 212, 0.3)",predictedFill:"rgba(59, 130, 246, 0.2)",goodColor:"#10b981",badColor:"#ef4444",ebitdaActual:"#059669",ebitdaBudget:"#fbbf24",percentActual:"#0891b2",percentPredicted:"#7c3aed",highlightColor:"#ef4444"}},sunset:{name:"Sunset Glow",mainBg:"bg-gradient-to-br from-orange-50 via-pink-50 to-red-100",cardBg:"bg-white/90 backdrop-blur-xl",modalBg:"bg-white/95 backdrop-blur-xl",primaryText:"text-gray-800",secondaryText:"text-gray-600",mutedText:"text-gray-500",border:"border-orange-200/60",shadow:"shadow-xl shadow-orange-400/20",chartBg:"bg-gradient-to-br from-white via-orange-50/50 to-pink-50/40",gridColor:"#fed7aa",buttonBg:"bg-gradient-to-r from-orange-100 to-pink-100",buttonHover:"hover:from-orange-200 hover:to-pink-200",cardGradient:"from-orange-50 via-pink-50 to-red-100",dotPattern:"from-orange-500/5 via-pink-500/10 to-red-500/5",accentGradient:"from-orange-500 via-pink-500 to-red-600",glowEffect:"shadow-2xl shadow-orange-400/30",hoverGlow:"hover:shadow-2xl hover:shadow-pink-500/40",chartColors:{actualLine:"#f97316",predictedLine:"#ec4899",targetLine:"#fbbf24",actualFill:"rgba(249, 115, 22, 0.3)",predictedFill:"rgba(236, 72, 153, 0.2)",goodColor:"#10b981",badColor:"#dc2626",ebitdaActual:"#ea580c",ebitdaBudget:"#f59e0b",percentActual:"#f97316",percentPredicted:"#db2777",highlightColor:"#6366f1"}},forest:{name:"Forest Depths",mainBg:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-100",cardBg:"bg-white/90 backdrop-blur-xl",modalBg:"bg-white/95 backdrop-blur-xl",primaryText:"text-green-900",secondaryText:"text-green-700",mutedText:"text-green-600",border:"border-emerald-200/60",shadow:"shadow-xl shadow-emerald-400/20",chartBg:"bg-gradient-to-br from-white via-emerald-50/50 to-green-50/40",gridColor:"#d1fae5",buttonBg:"bg-gradient-to-r from-emerald-100 to-green-100",buttonHover:"hover:from-emerald-200 hover:to-green-200",cardGradient:"from-emerald-50 via-green-50 to-teal-100",dotPattern:"from-emerald-500/5 via-green-500/10 to-teal-500/5",accentGradient:"from-emerald-500 via-green-500 to-teal-600",glowEffect:"shadow-2xl shadow-emerald-400/30",hoverGlow:"hover:shadow-2xl hover:shadow-green-500/40",chartColors:{actualLine:"#10b981",predictedLine:"#059669",targetLine:"#84cc16",actualFill:"rgba(16, 185, 129, 0.3)",predictedFill:"rgba(5, 150, 105, 0.2)",goodColor:"#059669",badColor:"#ef4444",ebitdaActual:"#047857",ebitdaBudget:"#65a30d",percentActual:"#10b981",percentPredicted:"#14b8a6",highlightColor:"#6366f1"}},lavender:{name:"Lavender Dreams",mainBg:"bg-gradient-to-br from-purple-50 via-indigo-50 to-pink-100",cardBg:"bg-white/90 backdrop-blur-xl",modalBg:"bg-white/95 backdrop-blur-xl",primaryText:"text-purple-900",secondaryText:"text-purple-700",mutedText:"text-purple-600",border:"border-purple-200/60",shadow:"shadow-xl shadow-purple-400/20",chartBg:"bg-gradient-to-br from-white via-purple-50/50 to-indigo-50/40",gridColor:"#e9d5ff",buttonBg:"bg-gradient-to-r from-purple-100 to-indigo-100",buttonHover:"hover:from-purple-200 hover:to-indigo-200",cardGradient:"from-purple-50 via-indigo-50 to-pink-100",dotPattern:"from-purple-500/5 via-indigo-500/10 to-pink-500/5",accentGradient:"from-purple-500 via-indigo-500 to-pink-600",glowEffect:"shadow-2xl shadow-purple-400/30",hoverGlow:"hover:shadow-2xl hover:shadow-indigo-500/40",chartColors:{actualLine:"#9333ea",predictedLine:"#6366f1",targetLine:"#ec4899",actualFill:"rgba(147, 51, 234, 0.3)",predictedFill:"rgba(99, 102, 241, 0.2)",goodColor:"#10b981",badColor:"#ef4444",ebitdaActual:"#7c3aed",ebitdaBudget:"#db2777",percentActual:"#9333ea",percentPredicted:"#8b5cf6",highlightColor:"#6366f1"}},midnight:{name:"Midnight Aurora",mainBg:"bg-gradient-to-br from-slate-900 via-purple-950 to-indigo-950",cardBg:"bg-gradient-to-br from-slate-800/90 via-slate-900/95 to-slate-800/90 backdrop-blur-xl",modalBg:"bg-gradient-to-br from-slate-900 to-slate-800 backdrop-blur-xl",primaryText:"text-white",secondaryText:"text-slate-300",mutedText:"text-slate-400",border:"border-purple-400/30",shadow:"shadow-2xl shadow-purple-500/30",chartBg:"bg-gradient-to-br from-slate-900/95 via-indigo-950/90 to-purple-950/80",gridColor:"#4b5563",buttonBg:"bg-gradient-to-r from-indigo-800 to-purple-800",buttonHover:"hover:from-indigo-700 hover:to-purple-700",cardGradient:"from-indigo-900/80 via-purple-900/70 to-slate-900/80",dotPattern:"from-purple-500/10 via-indigo-500/15 to-blue-500/10",accentGradient:"from-purple-400 via-indigo-400 to-blue-500",glowEffect:"shadow-2xl shadow-purple-500/30",hoverGlow:"hover:shadow-2xl hover:shadow-indigo-500/40",chartColors:{actualLine:"#a78bfa",predictedLine:"#818cf8",targetLine:"#fbbf24",actualFill:"rgba(167, 139, 250, 0.3)",predictedFill:"rgba(129, 140, 248, 0.2)",goodColor:"#34d399",badColor:"#f87171",ebitdaActual:"#8b5cf6",ebitdaBudget:"#facc15",percentActual:"#c084fc",percentPredicted:"#a78bfa",highlightColor:"#6366f1"}},rose:{name:"Rose Garden",mainBg:"bg-gradient-to-br from-pink-50 via-rose-50 to-red-50",cardBg:"bg-white/90 backdrop-blur-xl",modalBg:"bg-white/95 backdrop-blur-xl",primaryText:"text-rose-900",secondaryText:"text-rose-700",mutedText:"text-rose-600",border:"border-rose-200/60",shadow:"shadow-xl shadow-rose-400/20",chartBg:"bg-gradient-to-br from-white via-rose-50/50 to-pink-50/40",gridColor:"#fecdd3",buttonBg:"bg-gradient-to-r from-rose-100 to-pink-100",buttonHover:"hover:from-rose-200 hover:to-pink-200",cardGradient:"from-rose-50 via-pink-50 to-red-50",dotPattern:"from-rose-500/5 via-pink-500/10 to-red-500/5",accentGradient:"from-rose-500 via-pink-500 to-red-600",glowEffect:"shadow-2xl shadow-rose-400/30",hoverGlow:"hover:shadow-2xl hover:shadow-pink-500/40",chartColors:{actualLine:"#f43f5e",predictedLine:"#ec4899",targetLine:"#fbbf24",actualFill:"rgba(244, 63, 94, 0.3)",predictedFill:"rgba(236, 72, 153, 0.2)",goodColor:"#10b981",badColor:"#dc2626",ebitdaActual:"#e11d48",ebitdaBudget:"#f59e0b",percentActual:"#f43f5e",percentPredicted:"#fb7185",highlightColor:"#6366f1"}},arctic:{name:"Arctic Frost",mainBg:"bg-gradient-to-br from-slate-50 via-blue-50 to-gray-100",cardBg:"bg-white/90 backdrop-blur-xl",modalBg:"bg-white/95 backdrop-blur-xl",primaryText:"text-slate-800",secondaryText:"text-slate-600",mutedText:"text-slate-500",border:"border-blue-200/60",shadow:"shadow-xl shadow-blue-400/20",chartBg:"bg-gradient-to-br from-white via-blue-50/50 to-slate-50/40",gridColor:"#dbeafe",buttonBg:"bg-gradient-to-r from-blue-100 to-slate-100",buttonHover:"hover:from-blue-200 hover:to-slate-200",cardGradient:"from-blue-50 via-slate-50 to-gray-100",dotPattern:"from-blue-500/5 via-slate-500/10 to-gray-500/5",accentGradient:"from-blue-500 via-slate-500 to-gray-600",glowEffect:"shadow-2xl shadow-blue-400/30",hoverGlow:"hover:shadow-2xl hover:shadow-slate-500/40",chartColors:{actualLine:"#3b82f6",predictedLine:"#64748b",targetLine:"#fbbf24",actualFill:"rgba(59, 130, 246, 0.3)",predictedFill:"rgba(100, 116, 139, 0.2)",goodColor:"#10b981",badColor:"#ef4444",ebitdaActual:"#2563eb",ebitdaBudget:"#f59e0b",percentActual:"#3b82f6",percentPredicted:"#6b7280",highlightColor:"#6366f1"}},amber:{name:"Amber Gold",mainBg:"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-100",cardBg:"bg-white/90 backdrop-blur-xl",modalBg:"bg-white/95 backdrop-blur-xl",primaryText:"text-amber-900",secondaryText:"text-amber-700",mutedText:"text-amber-600",border:"border-amber-200/60",shadow:"shadow-xl shadow-amber-400/20",chartBg:"bg-gradient-to-br from-white via-amber-50/50 to-yellow-50/40",gridColor:"#fde68a",buttonBg:"bg-gradient-to-r from-amber-100 to-yellow-100",buttonHover:"hover:from-amber-200 hover:to-yellow-200",cardGradient:"from-amber-50 via-yellow-50 to-orange-100",dotPattern:"from-amber-500/5 via-yellow-500/10 to-orange-500/5",accentGradient:"from-amber-500 via-yellow-500 to-orange-600",glowEffect:"shadow-2xl shadow-amber-400/30",hoverGlow:"hover:shadow-2xl hover:shadow-yellow-500/40",chartColors:{actualLine:"#f59e0b",predictedLine:"#eab308",targetLine:"#ea580c",actualFill:"rgba(245, 158, 11, 0.3)",predictedFill:"rgba(234, 179, 8, 0.2)",goodColor:"#10b981",badColor:"#ef4444",ebitdaActual:"#d97706",ebitdaBudget:"#dc2626",percentActual:"#f59e0b",percentPredicted:"#facc15",highlightColor:"#6366f1"}},neon:{name:"Neon Cyber",mainBg:"bg-gradient-to-br from-gray-900 via-purple-950 to-blue-950",cardBg:"bg-gradient-to-br from-gray-800/90 via-gray-900/95 to-gray-800/90 backdrop-blur-xl",modalBg:"bg-gradient-to-br from-gray-900 to-gray-800 backdrop-blur-xl",primaryText:"text-white",secondaryText:"text-gray-200",mutedText:"text-gray-400",border:"border-cyan-400/30",shadow:"shadow-2xl shadow-cyan-500/30",chartBg:"bg-gradient-to-br from-gray-900/95 via-purple-950/90 to-blue-950/80",gridColor:"#374151",axisTextColor:"#ffffff",buttonBg:"bg-gradient-to-r from-cyan-800 to-purple-800",buttonHover:"hover:from-cyan-700 hover:to-purple-700",cardGradient:"from-purple-900/80 via-blue-900/70 to-gray-900/80",dotPattern:"from-cyan-500/10 via-purple-500/15 to-pink-500/10",accentGradient:"from-cyan-400 via-purple-400 to-pink-500",glowEffect:"shadow-2xl shadow-cyan-500/30",hoverGlow:"hover:shadow-2xl hover:shadow-purple-500/40",chartColors:{actualLine:"#06b6d4",predictedLine:"#e11d48",targetLine:"#facc15",actualFill:"rgba(6, 182, 212, 0.3)",predictedFill:"rgba(225, 29, 72, 0.2)",goodColor:"#10f981",badColor:"#ff0066",ebitdaActual:"#22d3ee",ebitdaBudget:"#facc15",percentActual:"#06b6d4",percentPredicted:"#f472b6"}},coral:{name:"Coral Reef",mainBg:"bg-gradient-to-br from-orange-50 via-coral-50 to-pink-100",cardBg:"bg-white/90 backdrop-blur-xl",modalBg:"bg-white/95 backdrop-blur-xl",primaryText:"text-orange-900",secondaryText:"text-orange-700",mutedText:"text-orange-600",border:"border-coral-200/60",shadow:"shadow-xl shadow-coral-400/20",chartBg:"bg-gradient-to-br from-white via-coral-50/50 to-orange-50/40",gridColor:"#fed7aa",buttonBg:"bg-gradient-to-r from-coral-100 to-orange-100",buttonHover:"hover:from-coral-200 hover:to-orange-200",cardGradient:"from-coral-50 via-orange-50 to-pink-100",dotPattern:"from-coral-500/5 via-orange-500/10 to-pink-500/5",accentGradient:"from-coral-500 via-orange-500 to-pink-600",glowEffect:"shadow-2xl shadow-coral-400/30",hoverGlow:"hover:shadow-2xl hover:shadow-orange-500/40",chartColors:{actualLine:"#ff7849",predictedLine:"#ff6347",targetLine:"#fbbf24",actualFill:"rgba(255, 120, 73, 0.3)",predictedFill:"rgba(255, 99, 71, 0.2)",goodColor:"#10b981",badColor:"#dc2626",ebitdaActual:"#ff5733",ebitdaBudget:"#f59e0b",percentActual:"#ff7849",percentPredicted:"#ff8c69"}}},xe={Consumables:_.Z,Power:C.Z,Fuel:G.Z,Labour:R.Z,"Sub Contract":D.Z,"Machine Hire Charges":W.Z,"Repair & Maintenance":I.Z,"Employee Cost":R.Z,"Establishment Expenses":H.Z,Packing:Z.Z,Freight:z.Z,"Raw Material":K.Z},we=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ee=function(e){return we[e-1]||""},Ne=function(e){var t=e.active,r=e.payload,n=e.label,o=e.theme;if(t&&r&&r.length){var l=r.filter((function(e,t,r){return null!==e.value&&void 0!==e.value&&r.findIndex((function(t){return t.dataKey===e.dataKey&&t.value===e.value}))===t}));return 0===l.length?null:a().createElement("div",{className:"".concat(o.cardBg," p-4 rounded-xl ").concat(o.shadow," ").concat(o.border," border")},a().createElement("p",{className:"text-sm font-bold ".concat(o.primaryText," mb-3")},n),l.map((function(e,t){return a().createElement("div",{key:"item-".concat(e.dataKey,"-").concat(t),className:"text-sm mb-1"},a().createElement("span",{className:"inline-block w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),a().createElement("span",{className:"font-semibold ".concat(o.primaryText)},e.name,":"," "),a().createElement("span",{className:"font-bold ".concat(o.primaryText)},e.dataKey.includes("Percent")||e.dataKey.includes("Target")||e.dataKey.includes("EBITDA")?"".concat(e.value,"%"):"â‚¹".concat(e.value.toLocaleString())))})))}return null},ke=function(e){var t=e.theme,r=(0,ee.W)((function(e){return e.viewType})),n=(0,ee.W)((function(e){return e.setViewType})),o=(0,ee.W)((function(e){return e.apiLoading})),l=(0,ee.W)((function(e){return e.currentYear})),c=(0,ee.W)((function(e){return e.monthRange})),i=(0,ee.W)((function(e){return e.fetchCostData})),u=function(){var e=ve(ge().mark((function e(t){return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(t),e.next=3,i(c.from,c.to,l,t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a().createElement("div",{className:"flex items-center gap-3"},a().createElement("span",{className:"text-sm font-semibold ".concat(t.secondaryText)},"View:"),a().createElement("div",{className:"relative flex items-center rounded-full p-1 border shadow-md ".concat(t.cardBg," ").concat(t.border)},a().createElement("div",{className:"absolute top-1 left-1 h-9 w-28 rounded-full bg-gradient-to-r\n      ".concat(t.accentGradient," transition-all duration-300 ease-in-out ").concat("production"===r?"translate-x-0":"translate-x-28")}),a().createElement("button",{onClick:function(){return u("production")},disabled:o,className:"relative z-10 w-28 h-9 rounded-full text-sm font-semibold flex items-center justify-center transition-colors\n        ".concat("production"===r?"text-white":"text-gray-600","\n        ").concat(o?"opacity-50 cursor-not-allowed":"","\n      ")},o&&"production"===r?a().createElement("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Production"),a().createElement("button",{onClick:function(){return u("sale")},disabled:o,className:"relative z-10 w-28 h-9 rounded-full text-sm font-semibold flex items-center justify-center transition-colors\n        ".concat("sale"===r?"text-white":"text-gray-600","\n        ").concat(o?"opacity-50 cursor-not-allowed":"","\n      ")},o&&"sale"===r?a().createElement("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Sale")))};const Ce=function(){var e=(0,ee.W)((function(e){return e.viewType})),t=((0,ee.W)((function(e){return e.setViewType})),(0,ee.W)((function(e){return e.apiData}))),r=(0,ee.W)((function(e){return e.apiLoading})),o=(0,ee.W)((function(e){return e.apiError})),l=(0,ee.W)((function(e){return e.selectedTheme})),c=(0,ee.W)((function(e){return e.setSelectedTheme})),i=(0,ee.W)((function(e){return e.selectedLocation})),u=(0,ee.W)((function(e){return e.setSelectedLocation})),s=(0,ee.W)((function(e){return e.fetchCostData})),d=(0,ee.W)((function(e){return e.currentYear})),m=(0,ee.W)((function(e){return e.monthRange})),L=(0,ee.W)((function(e){return e.currentPeriodMonth})),S=(0,ee.W)((function(e){return e.setCurrentPeriodMonth})),B=fe((0,n.useState)(!1),2),A=B[0],T=B[1],O=fe((0,n.useState)("All"),2),M=O[0],G=O[1],R=fe((0,n.useState)("All"),2),D=R[0],W=R[1],I=fe((0,n.useState)(!1),2),H=I[0],Z=I[1],z=fe((0,n.useState)({}),2),$=(z[0],z[1],fe((0,n.useState)({}),2)),q=$[0],Q=($[1],fe((0,n.useState)({}),2)),te=Q[0],re=Q[1],ne=fe((0,n.useState)(null),2),ae=ne[0],oe=ne[1],le=(0,n.useRef)({}),ce=(0,n.useRef)(null),ue=ye[l],se=function(){var e=ve(ge().mark((function e(t){var r,n,a,o;return ge().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(t),r=ee.W.getState(),n=r.monthRange,a=r.currentYear,o=r.viewType,e.next=4,s(n.from,n.to,a,o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){window.location.href="".concat(window.location.origin,"/kalyani.iot/costing_entry")},Ce={Ranjangaon:[{name:"Line 1",code:"L1",status:"active",capacity:"85%"},{name:"Line 2",code:"L2",status:"active",capacity:"92%"},{name:"Line 3",code:"L3",status:"active",capacity:"78%"},{name:"Line 4",code:"L4",status:"maintenance",capacity:"0%"}],Mundhwa:[{name:"Line A",code:"LA",status:"active",capacity:"88%"},{name:"Line B",code:"LB",status:"active",capacity:"91%"},{name:"Line C",code:"LC",status:"active",capacity:"82%"}]};(0,n.useEffect)((function(){console.log("ðŸš€ Component Mounted - Initializing");var t=(new Date).getMonth()+1;S(t);var r=t,n=t-5;n<1&&(n=1,r=6),"All"===M&&u("All"),s(n,r,d,e)}),[]),(0,n.useEffect)((function(){function e(e){ce.current&&!ce.current.contains(e.target)&&T(!1)}return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}),[]);var Le,Se=function(e,r){if(!t||0===t.length)return[];var n=t.filter((function(t){return(t.cost_head||"Other").trim()===e&&t.month_no===r}));if(0===n.length)return[];var a={};return n.forEach((function(e){var t=e.sub_category||e.cost_head||"Other",r=parseFloat(e.total_amount||0);a[t]||(a[t]=0),a[t]+=r})),Object.entries(a).map((function(e){var t=fe(e,2);return{name:t[0],amount:t[1]}})).sort((function(e,t){return t.amount-e.amount})).slice(0,10)},je=function(e,t){var r=e.x,n=e.y,o=e.value,l=e.viewBox;if(!o||null===o)return null;var c=r<(l.width||400)/2?-12:12;return a().createElement("text",{x:r,y:n+c,fill:t.primaryText,fontSize:"11",fontWeight:"700",textAnchor:"middle",className:"transition-all duration-200"},"number"==typeof o?o%1==0?o:o.toFixed(1):o)};return a().createElement("div",{className:"w-full mx-auto p-4 min-h-screen transition-all duration-500 ".concat(ue.mainBg)},a().createElement("div",{className:"".concat(ue.cardBg," rounded-2xl ").concat(ue.shadow," ").concat(ue.border," border p-4 mb-4")},a().createElement("div",{className:"flex flex-wrap items-center gap-4 mb-4"},a().createElement("div",{className:"flex items-center gap-2"},["All","Forging","Machining"].map((function(e){return a().createElement("button",{key:e,onClick:ve(ge().mark((function t(){var r,n,a;return ge().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return G(e),u(null),r=ee.W.getState(),n=r.monthRange,a=r.currentYear,t.next=5,s(n.from,n.to,a,"production");case 5:case"end":return t.stop()}}),t)}))),className:"px-4 py-2 text-sm rounded-xl font-bold transition-all ".concat(M===e?"bg-gradient-to-r ".concat(ue.accentGradient," text-white shadow-lg scale-105"):"".concat(ue.buttonBg," ").concat(ue.primaryText," hover:scale-105 ").concat(ue.buttonHover))},e)}))),"All"!==M&&a().createElement("div",{className:"h-8 w-px bg-gray-300"}),"All"!==M&&a().createElement("div",{className:"flex items-center gap-2"},a().createElement("span",{className:"text-sm font-bold ".concat(ue.mutedText," uppercase")},"Location:"),a().createElement("div",{className:"flex flex-wrap gap-1.5"},{All:[{name:"Ranjangaon",code:"RGN",percentage:-9,status:"active"},{name:"Mundhwa",code:"MUN",percentage:-7,status:"active"},{name:"Ranjangaon-2",code:"RGN-2",percentage:-7,status:"active"},{name:"Baramati",code:"BRM",percentage:13,status:"active"},{name:"Chakan",code:"CHK",percentage:-7,status:"active"}],Forging:[{name:"Ranjangaon",code:"RGN",percentage:-9,status:"active"},{name:"Mundhwa",code:"MUN",percentage:-7,status:"active"},{name:"Ranjangaon-2",code:"RGN-2",percentage:-7,status:"active"},{name:"Baramati",code:"BRM",percentage:13,status:"active"},{name:"Bhiwadi",code:"BWD",percentage:13,status:"active"},{name:"Gujrat",code:"GUT",percentage:13,status:"active"}],Machining:[{name:"Chakan",code:"CHK",percentage:-7,status:"active"},{name:"Khed",code:"KHD",percentage:-4,status:"active"},{name:"Ambhethan-1",code:"AMB1",percentage:-3,status:"active"},{name:"Ambhethan-2",code:"AMB2",percentage:-3,status:"active"}]}[M].map((function(e){return a().createElement("button",{key:e.code,onClick:function(){return se(e.name)},className:"px-3 py-1.5 rounded-lg text-sm font-bold transition-all ".concat(i===e.name?"bg-gradient-to-r ".concat(ue.accentGradient," text-white shadow-md"):"bg-gray-100 ".concat(ue.primaryText," hover:bg-gray-200"))},e.code)})))),"All"!==M&&i&&Ce[i]&&a().createElement(a().Fragment,null,a().createElement("div",{className:"h-8 w-px bg-gray-300"}),a().createElement("div",{className:"flex items-center gap-2"},a().createElement("span",{className:"text-sm font-bold ".concat(ue.mutedText," uppercase")},"Line:"),a().createElement("select",{value:D,onChange:function(e){return W(e.target.value)},className:"px-3 py-1.5 rounded-lg text-xs font-bold border ".concat(ue.border," ").concat(ue.cardBg," focus:outline-none focus:ring-2 focus:ring-blue-400")},a().createElement("option",{value:"All"},"All Lines"),Ce[i].map((function(e){return a().createElement("option",{key:e.code,value:e.code},e.name," - ",e.capacity)}))))),a().createElement("div",{className:"flex-1"}),a().createElement(ke,{theme:ue})),a().createElement("div",{className:"bg-gradient-to-r from-blue-50/50 to-cyan-50/50 rounded-xl border ".concat(ue.border)},a().createElement(ie,{theme:ue,compact:!0}))),a().createElement("div",null,function(){var n=function(){if(!t||0===t.length)return null;var e={};t.forEach((function(t){var r=Ee(t.month_no);e[r]||(e[r]={month:r,monthNo:t.month_no,costs:{},total:0,count:0});var n=(t.cost_head||"Other").trim(),a=parseFloat(t.total_amount||0);0===a||isNaN(a)||(e[r].costs[n]?e[r].costs[n]+=a:e[r].costs[n]=a,e[r].total+=a,e[r].count++)}));var r=Object.values(e).filter((function(e){return e.count>0})).sort((function(e,t){return e.monthNo-t.monthNo}));return 0===r.length?null:r.map((function(e){return{month:e.month,TotalActual:parseFloat(e.total.toFixed(2)),TotalPredicted:null,EBITDAActual:null,EBITDABudget:null,PercentActual:null,PercentPredicted:null,PercentTarget:20,rawData:e.costs}}))}();if(r)return a().createElement("div",{className:"".concat(ue.cardBg," rounded-xl p-8 text-center ").concat(ue.shadow," m-6")},a().createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a().createElement("p",{className:"mt-4 ".concat(ue.secondaryText," font-bold text-base")},"Loading ",e," cost data..."));if(o)return a().createElement("div",{className:"".concat(ue.cardBg," rounded-xl p-8 text-center ").concat(ue.shadow," m-6")},a().createElement("div",{className:"text-red-600 text-3xl mb-4"},"âš ï¸"),a().createElement("p",{className:"text-red-600 font-bold text-base mb-2"},"Error loading data"),a().createElement("p",{className:"".concat(ue.secondaryText," text-sm font-medium mb-4")},o),a().createElement("button",{onClick:function(){s(m.from,m.to,d,e)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-bold"},"Retry"));if(!n||0===n.length)return a().createElement("div",{className:"".concat(ue.cardBg," rounded-xl p-8 text-center ").concat(ue.shadow," m-6")},a().createElement("div",{className:"text-gray-400 text-5xl mb-4"},"ðŸ“Š"),a().createElement("p",{className:"".concat(ue.primaryText," font-bold text-lg mb-2")},"No Data Available"),a().createElement("p",{className:"".concat(ue.secondaryText," text-sm font-medium mb-4")},"No ",e," data found for the selected period."),a().createElement("button",{onClick:function(){s(m.from,m.to,d,e)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-bold"},"Load Data"));var i=[],u=i.map((function(e){return e.TotalActual})).filter((function(e){return null!=e&&e>0})),E=null;return u.length>0&&(E=u.reduce((function(e,t){return e+t}),0)/u.length*1.05),a().createElement("div",{className:"mb-6"},a().createElement("div",{className:"fixed top-4 right-4 z-50 flex items-center gap-3"},a().createElement("button",{onClick:be,className:"p-3 rounded-full ".concat(ue.cardBg," ").concat(ue.border," border ").concat(ue.shadow," transition-all duration-300 hover:scale-110 group relative overflow-hidden"),title:"Machine Power Unit Entry"},a().createElement("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 via-blue-500 to-purple-500 opacity-0 group-hover:opacity-20 transition-opacity duration-300"}),a().createElement(C.Z,{className:"w-6 h-6 relative z-10 text-blue-600"})," "),a().createElement("div",{className:"relative",ref:ce},a().createElement("button",{onClick:function(){return T(!A)},className:"p-3 rounded-full ".concat(ue.cardBg," ").concat(ue.border," border ").concat(ue.shadow," transition-all duration-300 hover:scale-110 group relative overflow-hidden")},a().createElement("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 opacity-0 group-hover:opacity-20 transition-opacity duration-300"}),a().createElement(Y.Z,{className:"w-6 h-6 relative z-10"})),A&&a().createElement("div",{className:"absolute right-0 mt-2 w-64 ".concat(ue.cardBg," rounded-xl ").concat(ue.shadow," ").concat(ue.border," border overflow-hidden")},a().createElement("div",{className:"p-3 ".concat(ue.primaryText," font-bold text-sm border-b ").concat(ue.border," bg-gradient-to-r ").concat(ue.buttonBg)},a().createElement("div",{className:"flex items-center gap-2"},a().createElement(Y.Z,{className:"w-4 h-4"}),"Choose Theme")),a().createElement("div",{className:"max-h-96 overflow-y-auto"},Object.entries(ye).map((function(e){var t=fe(e,2),r=t[0],n=t[1];return a().createElement("button",{key:r,onClick:function(){c(r),T(!1)},className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-100 transition-all ".concat(l===r?"bg-gradient-to-r ".concat(n.buttonBg):"")},a().createElement("div",{className:"flex items-center gap-3"},a().createElement("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br ".concat(n.accentGradient," shadow-sm")}),a().createElement("span",{className:"text-sm font-bold ".concat(n.primaryText)},n.name)),l===r&&a().createElement(U.Z,{className:"w-4 h-4 ".concat(n.primaryText)}))})))))),a().createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4"},a().createElement("div",{className:"".concat(ue.chartBg," rounded-2xl ").concat(ue.shadow," p-4 ").concat(ue.border," border transition-all duration-300")},a().createElement("div",{className:"flex items-center justify-between mb-3"},a().createElement("h3",{className:"text-xxl font-bold ".concat(ue.primaryText)},"Manufacturing Cost"),a().createElement("div",{className:"flex gap-2 items-center"},a().createElement("button",{onClick:function(){return Z(!H)},className:"px-3 py-1.5 rounded-lg text-xs font-bold transition-all flex items-center gap-1 ".concat(H?"bg-gradient-to-r ".concat(ue.accentGradient," text-white font-bold shadow-md"):"bg-gray-100 ".concat(ue.secondaryText," hover:bg-gray-200"))},"Values"))),a().createElement("div",{className:"h-64"},a().createElement(f.h,{width:"100%",height:"100%"},a().createElement(p.w,{data:i,margin:{top:20,right:50,left:10,bottom:10}},a().createElement(h.K,{dataKey:"month",tick:{fontSize:15,fontWeight:600}}),a().createElement(g.B,{tick:{fontSize:15,fontWeight:600}}),a().createElement(b.u,{content:a().createElement(Ne,{theme:ue})}),a().createElement(v.D,{wrapperStyle:{fontSize:"15px",fontWeight:600}}),E&&E>0&&a().createElement(y.db,{y:E,stroke:ue.chartColors.targetLine,strokeWidth:2,label:{value:"Target: â‚¹".concat(Math.round(E).toLocaleString()),position:"right",fill:ue.chartColors.targetLine,fontSize:15,fontWeight:"bold"}}),a().createElement(x.x1,{type:"monotone",dataKey:"TotalActual",stroke:ue.chartColors.actualLine,strokeWidth:2.5,name:"Actual Cost",label:!!H&&function(e){return je(e,ue)},dot:{r:5}}),a().createElement(x.x1,{type:"monotone",dataKey:"TotalPredicted",stroke:ue.chartColors.predictedLine,strokeWidth:2.5,name:"Predicted Cost",strokeDasharray:"5 5",label:!!H&&function(e){return je(e,ue)},dot:{r:5}}))))),a().createElement("div",{className:"".concat(ue.chartBg," rounded-2xl ").concat(ue.shadow," p-4 ").concat(ue.border," border")},a().createElement("div",{className:"flex items-center justify-between mb-3"},a().createElement("h3",{className:"text-xxl font-bold ".concat(ue.primaryText)},"EBITDA Performance")),a().createElement("div",{className:"h-64"},a().createElement(f.h,{width:"100%",height:"100%"},a().createElement(p.w,{data:i,margin:{top:20,right:50,left:10,bottom:10}},a().createElement(w.q,{stroke:ue.gridColor}),a().createElement(h.K,{dataKey:"month",tick:{fontSize:15,fontWeight:600}}),a().createElement(g.B,{tick:{fontSize:15,fontWeight:600}}),a().createElement(b.u,{content:a().createElement(Ne,{theme:ue})}),a().createElement(v.D,{wrapperStyle:{fontSize:"15px",fontWeight:600}}),a().createElement(x.x1,{type:"monotone",dataKey:"EBITDABudget",stroke:ue.chartColors.ebitdaBudget,strokeWidth:2.5,name:"EBITDA Budget %",dot:{r:5}}),a().createElement(x.x1,{type:"monotone",dataKey:"EBITDAActual",stroke:ue.chartColors.ebitdaActual,strokeWidth:2.5,name:"EBITDA Actual %",dot:{r:5}})))))))}(),(Le=t&&t.length>0?function(){if(!t||0===t.length)return[];var e={};return t.forEach((function(t){var r=(t.cost_head||"Other").trim(),n=t.month_no,a=parseFloat(t.cost_per_ton);if(!a||isNaN(a)){var o=parseFloat(t.total_amount||0),l=parseFloat(t.total_tonn||1);a=0!==o&&0!==l?o/l:o}0===a||isNaN(a)||(e[r]||(e[r]={kpiName:r,monthlyAmounts:{}}),e[r].monthlyAmounts[n]||(e[r].monthlyAmounts[n]=0),e[r].monthlyAmounts[n]+=a)})),0===Object.keys(e).length?[]:Object.values(e).map((function(e){var t=Object.keys(e.monthlyAmounts).map(Number).sort((function(e,t){return e-t})),r=t.map((function(t){return e.monthlyAmounts[t]})),n=r[r.length-1]||0,a=r.reduce((function(e,t){return e+t}),0)/r.length*1.05;return{kpiName:e.kpiName,actual_per_tonne:parseFloat(n.toFixed(2)),budget_per_tonne:parseFloat(a.toFixed(2)),trend:r.map((function(e){return parseFloat(e.toFixed(2))})),monthly_costs:r.map((function(e){return parseFloat(e.toFixed(2))})),monthly_budget:r.map((function(){return parseFloat(a.toFixed(2))})),production_percentage:null,target_percentage:null,months:t}}))}():[])&&0!==Le.length?a().createElement("div",{className:"relative min-h-96 rounded-2xl overflow-hidden"},a().createElement("div",{className:"absolute inset-0 bg-gradient-to-br ".concat(ue.cardGradient," transition-all duration-500")}),a().createElement("div",{className:"relative z-10 p-6"},a().createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},Le.map((function(e,t){var r,n,o=xe[e.kpiName]||_.Z,l=q[e.kpiName]||L,c=function(e,t){var r,n,a;if(!e||!e.trend)return[];var o,l=e.trend.reduce((function(e,t){return e+t}),0)/e.trend.length,c=e.budget_per_tonne&&e.actual_per_tonne?l*(e.budget_per_tonne/e.actual_per_tonne):1.05*(l||0),i=(null===(r=e.target_percentage)||void 0===r?void 0:r.length)>0?e.target_percentage.reduce((function(e,t){return e+t}),0)/e.target_percentage.length:null,u=e.trend.map((function(r,n){var a,o=e.months?e.months[n]:m.from+n,l=o===t;return{month:we[(o-1)%12]||"M".concat(n+1),monthNo:o,actual:parseFloat(r.toFixed(2)),prediction:null,target:c,productionPercentPredicted:null,productionPercent:(null===(a=e.production_percentage)||void 0===a?void 0:a[n])||null,productionTarget:i,isHistorical:!0,isHighlighted:l,variance:r-c}})),s=e.trend[e.trend.length-1],d=e.trend[e.trend.length-2]||s,f=s>=d?1:-1,p=((null===(n=u[u.length-1])||void 0===n?void 0:n.monthNo)||12)%12+1,h=(p-1)%12,g=s+f*(.2*Math.abs(s-d)||.05*s),b=(null===(a=e.production_percentage)||void 0===a?void 0:a.length)||0,v=b>0?e.production_percentage[b-1]:null,y=[{month:we[h]||"M".concat(h+1),monthNo:p,actual:null,prediction:parseFloat(g.toFixed(2)),target:c,targetForCheck:null,productionPercent:null,productionPercentPredicted:v,productionTarget:i,productionTargetForCheck:i,isHistorical:!1,isHighlighted:!1,variance:g-c}];return[].concat(function(e){if(Array.isArray(e))return he(e)}(o=u)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||pe(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),y)}(e,l),i=c.findIndex((function(e){return e.monthNo===l})),u=i>=0?i:c.filter((function(e){return e.isHistorical})).length-1;le.current[e.kpiName]||(le.current[e.kpiName]=a().createRef());var s,d,p,v,y=ae&&ae.kpiName===e.kpiName;return a().createElement("div",{key:"".concat(e.kpiName,"-").concat(t),ref:le.current[e.kpiName],className:"".concat(ue.cardBg," backdrop-blur-sm rounded-2xl ").concat(ue.shadow," ").concat(ue.hoverGlow," transition-all duration-300 p-5 ").concat(ue.border," border group relative overflow-visible")},a().createElement("div",{className:"flex items-center justify-between px-3 py-2 mb-3"},a().createElement("div",{className:"flex items-center gap-2"},a().createElement("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br ".concat(ue.accentGradient," flex items-center justify-center")},a().createElement(o,{className:"w-6 h-6 text-white"})),a().createElement("span",{className:"text-xxl font-extrabold text-slate-800"},e.kpiName)),(p=((s=e.actual_per_tonne)-(d=e.budget_per_tonne))/d*100,v=s>d,a().createElement("div",{className:"flex items-center gap-1 px-3 py-1 rounded-full ".concat(v?"bg-red-100":"bg-green-100")},v?a().createElement(X.Z,{className:"w-4 h-4 text-red-700"}):a().createElement(J.Z,{className:"w-4 h-4 text-green-700"}),a().createElement("span",{className:"text-3xl font-extrabold ".concat(v?"text-red-700":"text-green-700")},Math.abs(p).toFixed(1),"%")))),a().createElement("div",{className:"relative h-56 mb-3",style:{cursor:y?"default":"pointer",zIndex:1,pointerEvents:y?"none":"all"},onClick:function(t){if(!y){t.stopPropagation();var r=t.currentTarget.getBoundingClientRect(),n=t.clientX-r.left,a=t.clientY-r.top,o=r.width-10,l=c.filter((function(e){return e.isHistorical})),i=o/(l.length+1),u=Math.round(n/i)-1;if(u>=0&&u<l.length){var s=l[u];s&&oe({kpiName:e.kpiName,month:s.month,x:n,y:a})}}}},a().createElement(f.h,{width:"100%",height:"100%"},a().createElement(E.c,{data:c,margin:{top:5,right:5,left:0,bottom:5}},a().createElement(h.K,{dataKey:"month",tick:{fontSize:15,fontWeight:600}}),a().createElement(g.B,{tick:{fontSize:15,fontWeight:600},domain:["dataMin","dataMax"]}),a().createElement(b.u,{content:a().createElement(Ne,{theme:ue})}),u>=0&&a().createElement(N.z,{x1:null===(r=c[Math.max(0,u-.4)])||void 0===r?void 0:r.month,x2:null===(n=c[Math.min(c.length-1,u+.4)])||void 0===n?void 0:n.month,fill:ue.chartColors.highlightColor,fillOpacity:.1,strokeOpacity:.3}),a().createElement(k.uN,{type:"monotone",dataKey:"actual",fill:ue.chartColors.actualLine,fillOpacity:.2,stroke:"none"}),a().createElement(x.x1,{type:"monotone",dataKey:"actual",stroke:ue.chartColors.actualLine,strokeWidth:2,dot:function(e){var t=e.cx,r=e.cy,n=e.index,o=e.payload,l=n===u;return o.isHistorical?a().createElement("circle",{cx:t,cy:r,r:l?7:3,fill:l?ue.chartColors.highlightColor:ue.chartColors.actualLine,stroke:l?"white":"none",strokeWidth:l?2:0,style:{filter:l?"drop-shadow(0px 0px 6px ".concat(ue.chartColors.highlightColor,")"):"none"}}):null},activeDot:{r:8,stroke:"white",strokeWidth:2,fill:ue.chartColors.highlightColor}})))),te[e.kpiName]&&a().createElement("div",{className:"mt-4 bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-5 shadow-xl border-2 border-orange-300",onClick:function(e){return e.stopPropagation()}},a().createElement("div",{className:"flex items-center justify-between mb-4"},a().createElement("h2",{className:"text-base font-bold text-gray-800 flex items-center gap-2"},a().createElement(j.Z,{className:"w-5 h-5 text-orange-600"}),"Top 10 Cost Contributors - ",e.kpiName),a().createElement("button",{onClick:function(t){t.stopPropagation(),re((function(t){return de(de({},t),{},me({},e.kpiName,!1))}))},className:"p-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-all shadow-md hover:shadow-lg"},a().createElement(P.Z,{className:"w-4 h-4"}))),a().createElement("div",{className:"space-y-2"},Se(e.kpiName,l).length>0?Se(e.kpiName,l).map((function(t,r){var n=Se(e.kpiName,l).reduce((function(e,t){return e+t.amount}),0),o=t.amount/n*100;return a().createElement("div",{key:r,className:"bg-white rounded-lg p-3 shadow-sm hover:shadow-md transition-all"},a().createElement("div",{className:"flex items-center justify-between mb-2"},a().createElement("div",{className:"flex items-center gap-2"},a().createElement("span",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-orange-400 to-red-500 text-white text-xs font-bold flex items-center justify-center"},r+1),a().createElement("span",{className:"font-bold text-gray-800 text-sm"},t.name)),a().createElement("div",{className:"text-right"},a().createElement("div",{className:"text-sm font-bold text-orange-600"},"â‚¹",t.amount.toLocaleString()),a().createElement("div",{className:"text-xs font-semibold text-gray-500"},o.toFixed(1),"%"))),a().createElement("div",{className:"w-full bg-gray-200 rounded-full h-2.5"},a().createElement("div",{className:"bg-gradient-to-r from-orange-400 to-red-500 h-2.5 rounded-full transition-all duration-500",style:{width:"".concat(o,"%")}})))})):a().createElement("div",{className:"text-center py-8 text-gray-500"},a().createElement(V.Z,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),a().createElement("p",{className:"font-bold"},"No breakdown data available"),a().createElement("p",{className:"text-sm font-medium"},"for ",Ee(l)," month"))),a().createElement("div",{className:"mt-4 pt-4 border-t border-orange-200"},a().createElement("div",{className:"flex items-center justify-between text-sm"},a().createElement("span",{className:"text-gray-600 font-bold"},"Showing for: ",Ee(l)),a().createElement("span",{className:"text-gray-500 font-medium"},"Double-click again to close")))),a().createElement("div",{className:"absolute inset-0 cursor-pointer",style:{zIndex:0,pointerEvents:y?"none":"all"},onDoubleClick:function(t){y||(t.stopPropagation(),re((function(t){return de(de({},t),{},me({},e.kpiName,!t[e.kpiName]))})))}}),y&&a().createElement(F,{kpiName:ae.kpiName,month:ae.month,position:{x:ae.x,y:ae.y},cardRef:le.current[e.kpiName],onClose:function(){oe(null)}}))}))))):a().createElement("div",{className:"".concat(ue.cardBg," rounded-2xl ").concat(ue.shadow," p-12 text-center")},a().createElement(K.Z,{className:"w-16 h-16 ".concat(ue.mutedText," mx-auto mb-4")}),a().createElement("h3",{className:"text-lg font-bold ".concat(ue.secondaryText," mb-2")},"No Data Available"),a().createElement("p",{className:"".concat(ue.mutedText," font-medium")},"Switch between Production and Sale tabs to view data."))))},Le=function(e){var t=e.showDetailsPage,r=e.chartMode;return a().createElement("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50"},a().createElement("main",{className:"flex-1"},t?a().createElement(Ce,null):a().createElement(m,{mode:r})))}}}]);
//# sourceMappingURL=502.b12d9a10154af548b126.js.map