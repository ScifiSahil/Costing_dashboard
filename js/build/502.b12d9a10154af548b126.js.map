{"version":3,"file":"502.b12d9a10154af548b126.js","mappings":"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","sources":["webpack:///webpack/kalyani-iot-costing/src/components/RawMaterialCostChart.jsx","webpack:///webpack/kalyani-iot-costing/src/components/ActionInsightsModal.jsx","webpack:///webpack/kalyani-iot-costing/src/components/MonthRangeSlider.jsx","webpack:///webpack/kalyani-iot-costing/src/components/costscreener.jsx","webpack:///webpack/kalyani-iot-costing/src/components/AllPlants.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\nconst CleanPlantCostChart = ({ mode }) => {\r\n  //  Machining Data (sirf required plants)\r\n  const dataMachining = [\r\n    {\r\n      plant: \"Khed\",\r\n      total: 20.1,\r\n      categories: {\r\n        RawMaterial: 7.2,\r\n        Consumable: 3.0,\r\n        Power: 2.5,\r\n        Labour: 3.3,\r\n        Fuel: 1.6,\r\n        SubContract: 1.5,\r\n        RepairMaintenance: 0.6,\r\n        MachineHire: 0.3,\r\n        Establishment: 0.5,\r\n      },\r\n    },\r\n    {\r\n      plant: \"Chakan\",\r\n      total: 21.4,\r\n      categories: {\r\n        RawMaterial: 7.5,\r\n        Consumable: 3.1,\r\n        Power: 2.6,\r\n        Labour: 3.5,\r\n        Fuel: 1.7,\r\n        SubContract: 1.7,\r\n        RepairMaintenance: 0.7,\r\n        MachineHire: 0.3,\r\n        Establishment: 0.1,\r\n      },\r\n    },\r\n    {\r\n      plant: \"Ambethan-1\",\r\n      total: 19.3,\r\n      categories: {\r\n        RawMaterial: 6.9,\r\n        Consumable: 2.8,\r\n        Power: 2.2,\r\n        Labour: 3.0,\r\n        Fuel: 1.5,\r\n        SubContract: 1.6,\r\n        RepairMaintenance: 0.6,\r\n        MachineHire: 0.2,\r\n        Establishment: 0.1,\r\n      },\r\n    },\r\n    {\r\n      plant: \"Ambethan-2\",\r\n      total: 22.0,\r\n      categories: {\r\n        RawMaterial: 7.9,\r\n        Consumable: 3.4,\r\n        Power: 2.7,\r\n        Labour: 3.6,\r\n        Fuel: 1.8,\r\n        SubContract: 1.8,\r\n        RepairMaintenance: 0.7,\r\n        MachineHire: 0.3,\r\n        Establishment: 0.1,\r\n      },\r\n    },\r\n  ];\r\n\r\n  //  Forging Data\r\n  const dataForging = [\r\n    {\r\n      plant: \"R1\",\r\n      total: 10.5,\r\n      sales: 15.2,\r\n      production: 12.8,\r\n      tonnage: 9.3,\r\n      categories: {\r\n        RawMaterial: 3.5,\r\n        Consumable: 1.2,\r\n        Power: 1.5,\r\n        Labour: 2.0,\r\n        Fuel: 1.0,\r\n        SubContract: 0.8,\r\n        RepairMaintenance: 0.3,\r\n        MachineHire: 0.1,\r\n        Establishment: 0.1,\r\n      },\r\n    },\r\n    {\r\n      plant: \"R2\",\r\n      total: 14.2,\r\n      sales: 15.2,\r\n      production: 12.8,\r\n      tonnage: 9.3,\r\n      categories: {\r\n        RawMaterial: 5.1,\r\n        Consumable: 2.0,\r\n        Power: 1.8,\r\n        Labour: 2.5,\r\n        Fuel: 1.2,\r\n        SubContract: 1.0,\r\n        RepairMaintenance: 0.4,\r\n        MachineHire: 0.1,\r\n        Establishment: 0.1,\r\n      },\r\n    },\r\n    {\r\n      plant: \"Mundhva\",\r\n      total: 12.9,\r\n      sales: 15.2,\r\n      production: 12.8,\r\n      tonnage: 9.3,\r\n      categories: {\r\n        RawMaterial: 4.2,\r\n        Consumable: 1.7,\r\n        Power: 1.6,\r\n        Labour: 2.3,\r\n        Fuel: 1.1,\r\n        SubContract: 0.9,\r\n        RepairMaintenance: 0.6,\r\n        MachineHire: 0.3,\r\n        Establishment: 0.2,\r\n      },\r\n    },\r\n    {\r\n      plant: \"Baramati\",\r\n      total: 16.1,\r\n      sales: 15.2,\r\n      production: 12.8,\r\n      tonnage: 9.3,\r\n      categories: {\r\n        RawMaterial: 5.6,\r\n        Consumable: 2.2,\r\n        Power: 2.0,\r\n        Labour: 2.8,\r\n        Fuel: 1.5,\r\n        SubContract: 1.3,\r\n        RepairMaintenance: 0.5,\r\n        MachineHire: 0.1,\r\n        Establishment: 0.1,\r\n      },\r\n    },\r\n  ];\r\n  const [forgingView, setForgingView] = useState(\"sales\"); // default Sales\r\n\r\n  // Dummy data: apne hisaab se update kar lena\r\n  const salesData = [\r\n    { plant: \"Khed\", value: 35 },\r\n    { plant: \"Pune\", value: 25 },\r\n    { plant: \"Nashik\", value: 40 },\r\n  ];\r\n\r\n  const productionData = [\r\n    { plant: \"Khed\", value: 1200 },\r\n    { plant: \"Pune\", value: 800 },\r\n    { plant: \"Nashik\", value: 1500 },\r\n  ];\r\n\r\n  const tonnageData = [\r\n    { plant: \"Khed\", value: 200 },\r\n    { plant: \"Pune\", value: 350 },\r\n    { plant: \"Nashik\", value: 180 },\r\n  ];\r\n\r\n  // Active dataset choose karne ka logic\r\n  const activeData =\r\n    forgingView === \"sales\"\r\n      ? salesData\r\n      : forgingView === \"production\"\r\n      ? productionData\r\n      : tonnageData;\r\n\r\n  //  State for toggle (Machining/Forging)\r\n  const rawData =\r\n    mode === \"Machining\"\r\n      ? dataMachining\r\n      : dataForging.map((d) => ({\r\n          ...d,\r\n          total:\r\n            forgingView === \"sales\"\r\n              ? d.sales\r\n              : forgingView === \"production\"\r\n              ? d.production\r\n              : d.tonnage,\r\n        }));\r\n\r\n  const [tooltip, setTooltip] = useState(null);\r\n\r\n  //  Hover State (category-wise)\r\n  const [hoveredCategory, setHoveredCategory] = useState(null);\r\n\r\n  // Sort plants by total value (smallest  largest)\r\n  const selectedData = [...rawData].sort((a, b) => a.total - b.total);\r\n\r\n  //  Colors\r\n  const colors = {\r\n    RawMaterial: \"#FF5757\",\r\n    Consumable: \"#B794F6\",\r\n    Power: \"#4299E1\",\r\n    Labour: \"#F687B3\",\r\n    Fuel: \"#F6AD55\",\r\n    SubContract: \"#48BB78\",\r\n    RepairMaintenance: \"#ED8936\",\r\n    MachineHire: \"#38B2AC\",\r\n    Establishment: \"#6B46C1\",\r\n  };\r\n\r\n  const categoryLabels = {\r\n    RawMaterial: \"Raw Material\",\r\n    Consumable: \"Consumable\",\r\n    Power: \"Power\",\r\n    Labour: \"Labour\",\r\n    Fuel: \"Fuel\",\r\n    SubContract: \"Sub Contract\",\r\n    RepairMaintenance: \"Repair & Maintenance\",\r\n    MachineHire: \"Machine Hire\",\r\n    Establishment: \"Establishment\",\r\n  };\r\n\r\n  const maxHeight = 300;\r\n  const barWidth = 60;\r\n  const chartWidth = 900;\r\n  const chartHeight = 400;\r\n  const yAxisWidth = 160;\r\n  const chartStartX = yAxisWidth + 20;\r\n  const barSpacing = 160;\r\n\r\n  //  Stack biggest category at bottom\r\n  const getBarData = (plantData) => {\r\n    const segments = [];\r\n    let currentHeight = 0;\r\n    const gapSize = 5;\r\n\r\n    const sortedCategories = Object.entries(plantData.categories)\r\n      .sort((a, b) => b[1] - a[1])\r\n      .map(([category]) => category);\r\n\r\n    sortedCategories.forEach((category, index) => {\r\n      const value = plantData.categories[category];\r\n      if (value > 0) {\r\n        // Percentage based height\r\n        const segmentHeight = (value / plantData.total) * maxHeight;\r\n\r\n        if (index > 0) currentHeight += gapSize;\r\n\r\n        segments.push({\r\n          category,\r\n          value,\r\n          y: maxHeight - currentHeight - segmentHeight,\r\n          height: segmentHeight,\r\n          color: colors[category],\r\n          stackIndex: index,\r\n        });\r\n        currentHeight += segmentHeight;\r\n      }\r\n    });\r\n\r\n    return segments;\r\n  };\r\n\r\n  const generateFlowPath = (startSegments, endSegments, startX, endX) => {\r\n    const paths = [];\r\n    const categoryMapping = {};\r\n    startSegments.forEach((seg) => {\r\n      categoryMapping[seg.category] = seg;\r\n    });\r\n\r\n    Object.keys(categoryMapping).forEach((category) => {\r\n      const startSeg = startSegments.find((seg) => seg.category === category);\r\n      const endSeg = endSegments.find((seg) => seg.category === category);\r\n\r\n      if (startSeg && endSeg) {\r\n        const startY1 = startSeg.y + 20;\r\n        const startY2 = startSeg.y + startSeg.height + 20;\r\n        const endY1 = endSeg.y + 20;\r\n        const endY2 = endSeg.y + endSeg.height + 20;\r\n\r\n        const controlX1 = startX + barWidth + (endX - startX - barWidth) * 0.3;\r\n        const controlX2 = startX + barWidth + (endX - startX - barWidth) * 0.7;\r\n\r\n        const pathD = `\r\n          M ${startX + barWidth} ${startY1}\r\n          C ${controlX1} ${startY1}, ${controlX2} ${endY1}, ${endX} ${endY1}\r\n          L ${endX} ${endY2}\r\n          C ${controlX2} ${endY2}, ${controlX1} ${startY2}, ${\r\n          startX + barWidth\r\n        } ${startY2}\r\n          Z\r\n        `;\r\n\r\n        paths.push(\r\n          <path\r\n            key={`${category}-flow-${startX}-${endX}`}\r\n            d={pathD}\r\n            fill={startSeg.color}\r\n            fillOpacity=\"0.2\"\r\n            stroke=\"none\"\r\n          />\r\n        );\r\n      }\r\n    });\r\n\r\n    return paths;\r\n  };\r\n\r\n  //  Create a global stack order based on average values\r\n  const getGlobalStackOrder = () => {\r\n    const categoryAverages = {};\r\n    Object.keys(selectedData[0].categories).forEach((category) => {\r\n      const total = selectedData.reduce(\r\n        (sum, plant) => sum + plant.categories[category],\r\n        0\r\n      );\r\n      categoryAverages[category] = total / selectedData.length;\r\n    });\r\n\r\n    return Object.entries(categoryAverages)\r\n      .sort((a, b) => a[1] - b[1])\r\n      .map(([category]) => category);\r\n  };\r\n\r\n  const globalStackOrder = getGlobalStackOrder();\r\n\r\n  //  Category Totals (sum across all plants)\r\n  const categoryTotals = {};\r\n  Object.keys(selectedData[0].categories).forEach((category) => {\r\n    categoryTotals[category] = selectedData.reduce(\r\n      (sum, plant) => sum + plant.categories[category],\r\n      0\r\n    );\r\n  });\r\n\r\n  const createYAxisLabels = () => {\r\n    const labelGap = 28;\r\n    const startY = 40;\r\n\r\n    return globalStackOrder.map((category, index) => {\r\n      const y = startY + index * labelGap;\r\n      return (\r\n        <g\r\n          key={`y-label-${category}`}\r\n          onMouseEnter={() => setHoveredCategory(category)}\r\n          onMouseLeave={() => setHoveredCategory(null)}\r\n          opacity={hoveredCategory && hoveredCategory !== category ? 0.3 : 1}\r\n        >\r\n          <rect\r\n            x={15}\r\n            y={y - 8}\r\n            width={12}\r\n            height={12}\r\n            fill={colors[category]}\r\n            rx=\"6\"\r\n            ry=\"6\"\r\n          />\r\n          <text\r\n            x={32}\r\n            y={y + 3}\r\n            className={`text-xs font-medium ${\r\n              hoveredCategory === category ? \"fill-blue-600\" : \"fill-gray-700\"\r\n            }`}\r\n            textAnchor=\"start\"\r\n          >\r\n            {categoryLabels[category]}\r\n          </text>\r\n        </g>\r\n      );\r\n    });\r\n  };\r\n\r\n  //  Right Y-axis labels with totals\r\n  const createRightYAxisLabels = () => {\r\n    const labelGap = 28;\r\n    const startY = 40;\r\n\r\n    return globalStackOrder.map((category, index) => {\r\n      const y = startY + index * labelGap;\r\n      return (\r\n        <g key={`y-label-right-${category}`}>\r\n          <text\r\n            x={chartStartX + chartWidth - yAxisWidth + 10}\r\n            y={y + 3}\r\n            className=\"text-xs font-medium fill-gray-700\"\r\n            textAnchor=\"start\"\r\n          >\r\n            {categoryLabels[category]} : {categoryTotals[category].toFixed(1)}\r\n          </text>\r\n        </g>\r\n      );\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-3 bg-gray-50 min-h-screen flex\">\r\n      <div className=\"max-w-6xl mx-auto w-full flex flex-col\">\r\n        {mode === \"Forging\" && (\r\n          <div className=\"flex gap-3 mb-4\">\r\n            {[\"sales\", \"production\", \"tonnage\"].map((view) => (\r\n              <button\r\n                key={view}\r\n                onClick={() => setForgingView(view)}\r\n                className={`px-4 py-1 rounded-lg text-sm font-medium border \r\n      ${\r\n        forgingView === view\r\n          ? \"bg-blue-600 text-white\"\r\n          : \"bg-white text-gray-700\"\r\n      }`}\r\n              >\r\n                {view.charAt(0).toUpperCase() + view.slice(1)} Value\r\n              </button>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/*  Chart Centered */}\r\n        <div className=\"flex flex-1 items-center justify-center\">\r\n          <svg\r\n            width={chartWidth + yAxisWidth}\r\n            height={chartHeight}\r\n            className=\"overflow-visible\"\r\n          >\r\n            {/* Background */}\r\n            <rect\r\n              x={chartStartX}\r\n              y={20}\r\n              width={chartWidth - yAxisWidth}\r\n              height={maxHeight}\r\n              fill=\"#F9FAFB\"\r\n              rx=\"6\"\r\n              ry=\"6\"\r\n            />\r\n\r\n            {/* Y-axis labels */}\r\n            {createYAxisLabels()}\r\n            {/* Right Y-axis labels with totals */}\r\n            {/* {createRightYAxisLabels()} */}\r\n\r\n            {/* Flow waves */}\r\n            {generateFlowPath(\r\n              getBarData(selectedData[0]),\r\n              getBarData(selectedData[1]),\r\n              chartStartX,\r\n              chartStartX + barSpacing\r\n            )}\r\n            {generateFlowPath(\r\n              getBarData(selectedData[1]),\r\n              getBarData(selectedData[2]),\r\n              chartStartX + barSpacing,\r\n              chartStartX + barSpacing * 2\r\n            )}\r\n            {generateFlowPath(\r\n              getBarData(selectedData[2]),\r\n              getBarData(selectedData[3]),\r\n              chartStartX + barSpacing * 2,\r\n              chartStartX + barSpacing * 3\r\n            )}\r\n\r\n            {/* Bars */}\r\n            {selectedData.map((plantData, index) => {\r\n              const x = chartStartX + index * barSpacing;\r\n\r\n              //  Segment heights updated according to percentage of total\r\n              let cumulativeHeight = 0;\r\n              const segments = Object.entries(plantData.categories)\r\n                .sort((a, b) => b[1] - a[1]) // badi value neeche\r\n                .map(([category, value], idx) => {\r\n                  const height = (value / plantData.total) * maxHeight;\r\n                  const y = maxHeight - cumulativeHeight - height;\r\n                  cumulativeHeight += height + 5; // 5px gap between stacks\r\n                  return {\r\n                    category,\r\n                    value,\r\n                    height,\r\n                    y,\r\n                    color: colors[category],\r\n                  };\r\n                });\r\n\r\n              return (\r\n                <g key={plantData.plant}>\r\n                  {segments.map((segment) => (\r\n                    <g key={`${plantData.plant}-${segment.category}`}>\r\n                      <defs>\r\n                        <linearGradient\r\n                          id={`gradient-${plantData.plant}-${segment.category}`}\r\n                          x1=\"0%\"\r\n                          y1=\"0%\"\r\n                          x2=\"100%\"\r\n                          y2=\"0%\"\r\n                        >\r\n                          <stop\r\n                            offset=\"0%\"\r\n                            stopColor={segment.color}\r\n                            stopOpacity=\"1\"\r\n                          />\r\n                          <stop\r\n                            offset=\"50%\"\r\n                            stopColor={segment.color}\r\n                            stopOpacity=\"1\"\r\n                          />\r\n                          <stop\r\n                            offset=\"100%\"\r\n                            stopColor={segment.color}\r\n                            stopOpacity=\"1\"\r\n                          />\r\n                        </linearGradient>\r\n                      </defs>\r\n\r\n                      <rect\r\n                        x={x}\r\n                        y={segment.y + 20}\r\n                        width={barWidth}\r\n                        height={segment.height}\r\n                        fill={`url(#gradient-${plantData.plant}-${segment.category})`}\r\n                        rx=\"6\"\r\n                        ry=\"6\"\r\n                        onMouseEnter={() =>\r\n                          setHoveredCategory(segment.category)\r\n                        }\r\n                        onMouseMove={(e) =>\r\n                          setTooltip({\r\n                            x: e.clientX,\r\n                            y: e.clientY,\r\n                            plant: plantData.plant,\r\n                            category: segment.category,\r\n                            value: segment.value,\r\n                            Sale: (\r\n                              (segment.value / plantData.total) *\r\n                              100\r\n                            ).toFixed(1),\r\n                          })\r\n                        }\r\n                        onMouseLeave={() => setHoveredCategory(null)}\r\n                        opacity={\r\n                          hoveredCategory &&\r\n                          hoveredCategory !== segment.category\r\n                            ? 0.3\r\n                            : 1\r\n                        }\r\n                      />\r\n\r\n                      {hoveredCategory === segment.category &&\r\n                        tooltip &&\r\n                        tooltip.plant === plantData.plant && (\r\n                          <foreignObject\r\n                            x={x + barWidth + 8} // bar ke side me\r\n                            y={segment.y - 50} // bar ke upar shift\r\n                            width={150}\r\n                            height={50}\r\n                            style={{ pointerEvents: \"none\", zIndex: 999 }}\r\n                          >\r\n                            <div className=\"bg-white shadow-md rounded px-2 py-1 text-xs text-gray-700 border\">\r\n                              <div className=\"font-medium\">\r\n                                {plantData.plant}\r\n                              </div>\r\n                              <div>\r\n                                {categoryLabels[segment.category]}: \r\n                                {segment.value.toFixed(2)} Cr\r\n                              </div>\r\n                              <div>\r\n                                Sales:{\" \"}\r\n                                {(\r\n                                  (segment.value / plantData.total) *\r\n                                  100\r\n                                ).toFixed(1)}\r\n                                %\r\n                              </div>\r\n                            </div>\r\n                          </foreignObject>\r\n                        )}\r\n                    </g>\r\n                  ))}\r\n\r\n                  {/* Plant labels */}\r\n                  <text\r\n                    x={x + barWidth / 2}\r\n                    y={maxHeight + 45}\r\n                    textAnchor=\"middle\"\r\n                    className=\"text-sm font-semibold fill-gray-700\"\r\n                  >\r\n                    {plantData.plant}\r\n                  </text>\r\n                  <text\r\n                    x={x + barWidth / 2}\r\n                    y={maxHeight + 62}\r\n                    textAnchor=\"middle\"\r\n                    className=\"text-xs fill-gray-500\"\r\n                  >\r\n                    {plantData.total.toFixed(2)}Cr\r\n                  </text>\r\n                </g>\r\n              );\r\n            })}\r\n          </svg>\r\n        </div>\r\n      </div>\r\n      {/* Right Side  Insights */}\r\n      <div className=\"w-96 ml-6 bg-white rounded-2xl shadow-xl border border-gray-200/50 p-6\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center gap-3 mb-6\">\r\n          <div className=\"p-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg\">\r\n            \r\n          </div>\r\n          <h3 className=\"text-xl font-bold text-gray-800\">Key Insights</h3>\r\n        </div>\r\n\r\n        {/* Machining View */}\r\n        {mode === \"Machining\" && (\r\n          <div className=\"space-y-4 mb-6\">\r\n            {/* Highest Cost */}\r\n            <div className=\"bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-red-700\">\r\n                    Highest Cost Plant\r\n                  </p>\r\n                  <p className=\"text-xl font-bold text-red-800\">\r\n                    {selectedData[selectedData.length - 1].plant}\r\n                  </p>\r\n                  <p className=\"text-lg font-semibold text-red-600\">\r\n                    {selectedData[selectedData.length - 1].total.toFixed(2)} Cr\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Lowest Cost */}\r\n            <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-green-700\">\r\n                    Lowest Cost Plant\r\n                  </p>\r\n                  <p className=\"text-xl font-bold text-green-800\">\r\n                    {selectedData[0].plant}\r\n                  </p>\r\n                  <p className=\"text-lg font-semibold text-green-600\">\r\n                    {selectedData[0].total.toFixed(2)} Cr\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Major Cost Contributors */}\r\n            <div className=\"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-xl p-4\">\r\n              <h4 className=\"text-sm font-semibold text-purple-700 mb-3 flex items-center gap-2\">\r\n                 Major Cost Contributors\r\n              </h4>\r\n              <div className=\"space-y-3\">\r\n                {Object.entries(categoryTotals)\r\n                  .sort((a, b) => b[1] - a[1])\r\n                  .slice(0, 3)\r\n                  .map(([cat, val], index) => {\r\n                    const percentage = (\r\n                      (val /\r\n                        Object.values(categoryTotals).reduce(\r\n                          (a, b) => a + b,\r\n                          0\r\n                        )) *\r\n                      100\r\n                    ).toFixed(1);\r\n                    return (\r\n                      <div key={cat} className=\"relative\">\r\n                        <div className=\"flex justify-between items-center mb-1\">\r\n                          <span className=\"text-sm font-medium text-gray-700\">\r\n                            #{index + 1} {categoryLabels[cat]}\r\n                          </span>\r\n                          <span className=\"text-sm font-bold text-purple-600\">\r\n                            {percentage}%\r\n                          </span>\r\n                        </div>\r\n                        <div className=\"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden\">\r\n                          <div\r\n                            className=\"h-2.5 rounded-full transition-all duration-500 ease-out\"\r\n                            style={{\r\n                              width: `${percentage}%`,\r\n                              background: `linear-gradient(90deg, ${colors[cat]}, ${colors[cat]}CC)`,\r\n                            }}\r\n                          />\r\n                        </div>\r\n                        <div className=\"text-xs text-gray-500 mt-1\">\r\n                          {val.toFixed(2)} Cr total\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Forging Views */}\r\n        {mode === \"Forging\" && forgingView === \"sales\" && (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"bg-gradient-to-r from-yellow-50 to-amber-50 border border-yellow-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200\">\r\n              <p className=\"text-sm font-medium text-amber-700\">\r\n                Top Sales Plant\r\n              </p>\r\n              <p className=\"text-xl font-bold text-amber-800\">\r\n                {\r\n                  dataForging.reduce((a, b) => (a.sales > b.sales ? a : b))\r\n                    .plant\r\n                }\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200\">\r\n              <p className=\"text-sm font-medium text-blue-700\">Total Sales</p>\r\n              <p className=\"text-xl font-bold text-blue-800\">\r\n                {dataForging.reduce((sum, p) => sum + p.sales, 0).toFixed(1)}{\" \"}\r\n                Cr\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {mode === \"Forging\" && forgingView === \"production\" && (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"bg-gradient-to-r from-orange-50 to-yellow-50 border border-orange-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200\">\r\n              <p className=\"text-sm font-medium text-orange-700\">\r\n                Highest Production Plant\r\n              </p>\r\n              <p className=\"text-xl font-bold text-orange-800\">\r\n                {\r\n                  dataForging.reduce((a, b) =>\r\n                    a.production > b.production ? a : b\r\n                  ).plant\r\n                }\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200\">\r\n              <p className=\"text-sm font-medium text-green-700\">\r\n                Average Production\r\n              </p>\r\n              <p className=\"text-xl font-bold text-green-800\">\r\n                {(\r\n                  dataForging.reduce((s, p) => s + p.production, 0) /\r\n                  dataForging.length\r\n                ).toFixed(1)}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {mode === \"Forging\" && forgingView === \"tonnage\" && (\r\n          <div className=\"space-y-4\">\r\n            <div className=\"bg-gradient-to-r from-pink-50 to-rose-50 border border-pink-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200\">\r\n              <p className=\"text-sm font-medium text-pink-700\">\r\n                Highest Tonnage Plant\r\n              </p>\r\n              <p className=\"text-xl font-bold text-pink-800\">\r\n                {\r\n                  dataForging.reduce((a, b) => (a.tonnage > b.tonnage ? a : b))\r\n                    .plant\r\n                }\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"bg-gradient-to-r from-indigo-50 to-blue-50 border border-indigo-200 rounded-xl p-4 transform hover:scale-105 transition-all duration-200\">\r\n              <p className=\"text-sm font-medium text-indigo-700\">\r\n                Total Tonnage\r\n              </p>\r\n              <p className=\"text-xl font-bold text-indigo-800\">\r\n                {dataForging.reduce((s, p) => s + p.tonnage, 0).toFixed(1)}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CleanPlantCostChart;\r\n","import React, { useState, useEffect } from \"react\";\nimport {\n  X,\n  TrendingUp,\n  CheckCircle,\n  AlertTriangle,\n  Zap,\n  Target,\n  Lightbulb,\n  ArrowRight,\n} from \"lucide-react\";\n\nconst ActionInsightsModal = ({\n  kpiName,\n  month,\n  position,\n  cardRef,\n  onClose,\n}) => {\n  const [modalPosition, setModalPosition] = useState(null);\n  const [activeTab, setActiveTab] = useState(\"action\");\n\n  useEffect(() => {\n    if (!modalPosition && position && cardRef?.current) {\n      const modalHeight = 185;\n      const modalWidth = 230;\n      const cardRect = cardRef.current.getBoundingClientRect();\n\n      let top = position.y - modalHeight - 10;\n      let left = position.x - modalWidth / 2;\n\n      if (top < 5) top = 5;\n      if (left < 5) left = 5;\n      if (left + modalWidth > cardRect.width - 5) {\n        left = cardRect.width - modalWidth - 5;\n      }\n\n      setModalPosition({ top, left });\n    }\n  }, [position, cardRef, modalPosition]);\n\n  if (!modalPosition) return null;\n\n  const tabs = [\n    { id: \"action\", label: \"Action\", icon: Zap, color: \"#3b82f6\", bg: \"#eff6ff\", text: \"text-blue-600\" },\n    { id: \"improve\", label: \"Improve\", icon: Target, color: \"#10b981\", bg: \"#ecfdf5\", text: \"text-emerald-600\" },\n    { id: \"insights\", label: \"Insights\", icon: Lightbulb, color: \"#f97316\", bg: \"#fff7ed\", text: \"text-orange-600\" },\n  ];\n\n  const currentTab = tabs.find((t) => t.id === activeTab);\n\n  const tabContent = {\n    action: {\n      title: \"Action Required\",\n      icon: TrendingUp,\n      items: [\"Cost increased by 12%\", \"Peak usage: night shift\", \"Material waste: 8%\"],\n    },\n    improve: {\n      title: \"Improvement Steps\",\n      icon: CheckCircle,\n      items: [\"Schedule maintenance\", \"Negotiate bulk discounts\", \"Optimize shift timings\"],\n    },\n    insights: {\n      title: \"Root Cause\",\n      icon: AlertTriangle,\n      items: [\"High production volume\", \"Equipment downtime\", \"Supplier price hike\"],\n    },\n  };\n\n  const content = tabContent[activeTab];\n  const ContentIcon = content.icon;\n\n  return (\n    <div\n      className=\"absolute\"\n      style={{\n        top: `${modalPosition.top}px`,\n        left: `${modalPosition.left}px`,\n        width: \"230px\",\n        pointerEvents: \"all\",\n        zIndex: 999999,\n      }}\n      onMouseDown={(e) => { e.stopPropagation(); e.preventDefault(); }}\n      onClick={(e) => { e.stopPropagation(); e.preventDefault(); }}\n    >\n      {/* Arrow */}\n      <div\n        className=\"absolute -bottom-[6px] left-1/2 transform -translate-x-1/2 w-3 h-3 rotate-45\"\n        style={{\n          backgroundColor: \"#f9fafb\",\n          borderRight: \"1px solid #e5e7eb\",\n          borderBottom: \"1px solid #e5e7eb\",\n          zIndex: 999998,\n        }}\n      />\n\n      {/* Modal */}\n      <div\n        className=\"rounded-lg overflow-hidden\"\n        style={{\n          backgroundColor: \"#ffffff\",\n          border: \"1px solid #e5e7eb\",\n          boxShadow: \"0 10px 25px -5px rgba(0, 0, 0, 0.15)\",\n        }}\n      >\n        {/* Header - Compact */}\n        <div\n          className=\"px-2.5 py-1.5 flex items-center justify-between\"\n          style={{ backgroundColor: currentTab.color }}\n        >\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-[13px] font-bold text-white\">{kpiName}</span>\n            <span className=\"text-[10px] text-white/70 font-medium\"> {month}</span>\n          </div>\n          <button\n            onClick={(e) => { e.stopPropagation(); e.preventDefault(); onClose(); }}\n            className=\"w-5 h-5 rounded bg-white/20 hover:bg-white/30 flex items-center justify-center\"\n          >\n            <X className=\"w-3 h-3 text-white\" />\n          </button>\n        </div>\n\n        {/* Tabs - Compact */}\n        <div\n          className=\"flex border-b border-gray-200\"\n          style={{ backgroundColor: \"#f9fafb\" }}\n          onMouseDown={(e) => e.stopPropagation()}\n          onClick={(e) => e.stopPropagation()}\n        >\n          {tabs.map((tab) => {\n            const Icon = tab.icon;\n            const isActive = activeTab === tab.id;\n            return (\n              <button\n                key={tab.id}\n                type=\"button\"\n                onClick={(e) => { e.stopPropagation(); e.preventDefault(); setActiveTab(tab.id); }}\n                className={`flex-1 py-1 flex items-center justify-center gap-1 text-[10px] font-bold transition-all ${\n                  isActive ? `${tab.text} border-b-2` : \"text-gray-500 hover:bg-gray-100\"\n                }`}\n                style={{\n                  backgroundColor: isActive ? tab.bg : \"transparent\",\n                  borderBottomColor: isActive ? tab.color : \"transparent\",\n                }}\n              >\n                <Icon className=\"w-3 h-3\" />\n                <span>{tab.label}</span>\n              </button>\n            );\n          })}\n        </div>\n\n        {/* Content - Compact */}\n        <div className=\"p-2.5\" style={{ backgroundColor: currentTab.bg }}>\n          <div className=\"flex items-start gap-2\">\n            <div\n              className=\"w-6 h-6 rounded flex items-center justify-center flex-shrink-0\"\n              style={{ backgroundColor: currentTab.color }}\n            >\n              <ContentIcon className=\"w-3 h-3 text-white\" />\n            </div>\n            <div className=\"flex-1\">\n              <h4 className=\"font-bold text-gray-800 text-[12px] mb-1\">{content.title}</h4>\n              <ul className=\"space-y-0.5\">\n                {content.items.map((item, idx) => (\n                  <li key={idx} className=\"flex items-center gap-1.5 text-[11px] text-gray-700\">\n                    <span\n                      className=\"w-1 h-1 rounded-full flex-shrink-0\"\n                      style={{ backgroundColor: currentTab.color }}\n                    />\n                    <span className=\"font-semibold\">{item}</span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        {/* Footer Buttons - Compact */}\n        <div\n          className=\"px-2.5 py-1.5 flex gap-2 border-t border-gray-200\"\n          style={{ backgroundColor: \"#f9fafb\" }}\n        >\n          <button\n            onClick={(e) => { e.stopPropagation(); e.preventDefault(); onClose(); }}\n            className=\"flex-1 py-1 rounded text-[11px] font-bold bg-gray-200 text-gray-700 hover:bg-gray-300 transition-all\"\n          >\n            Close\n          </button>\n          <button\n            onClick={(e) => { e.stopPropagation(); e.preventDefault(); }}\n            className=\"flex-1 py-1 rounded text-[11px] font-bold text-white hover:opacity-90 transition-all flex items-center justify-center gap-1\"\n            style={{ backgroundColor: currentTab.color }}\n          >\n            Details\n            <ArrowRight className=\"w-3 h-3\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ActionInsightsModal;","import React, { useState, useRef, useEffect, useCallback } from \"react\";\r\nimport { Calendar, ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport { useCostStore } from \"../store/costStore\";\r\n\r\nconst monthNames = [\r\n  \"Jan\",\r\n  \"Feb\",\r\n  \"Mar\",\r\n  \"Apr\",\r\n  \"May\",\r\n  \"Jun\",\r\n  \"Jul\",\r\n  \"Aug\",\r\n  \"Sep\",\r\n  \"Oct\",\r\n  \"Nov\",\r\n  \"Dec\",\r\n];\r\n\r\nconst MonthRangeSlider = ({ theme, compact = false }) => {\r\n  const sliderRef = useRef(null);\r\n  const [isDragging, setIsDragging] = useState(null); // 'start', 'end', or 'range'\r\n  const [dragStartX, setDragStartX] = useState(0);\r\n  const [initialRange, setInitialRange] = useState({ from: 1, to: 12 });\r\n\r\n  // Zustand Store\r\n  const monthRange = useCostStore((state) => state.monthRange);\r\n  const setMonthRange = useCostStore((state) => state.setMonthRange);\r\n  const currentYear = useCostStore((state) => state.currentYear);\r\n  const setCurrentYear = useCostStore((state) => state.setCurrentYear);\r\n  const viewType = useCostStore((state) => state.viewType);\r\n  const fetchCostData = useCostStore((state) => state.fetchCostData);\r\n  const apiLoading = useCostStore((state) => state.apiLoading);\r\n\r\n  // Get current month for \"Current Month\" preset\r\n  const today = new Date();\r\n  const currentMonth = today.getMonth() + 1;\r\n\r\n  // Quick presets\r\n  const presets = [\r\n    {\r\n      label: \"Current Month\",\r\n      value: \"current\",\r\n      from: currentMonth,\r\n      to: currentMonth,\r\n    },\r\n    {\r\n      label: \"Last 3M\",\r\n      value: \"3m\",\r\n      from: Math.max(1, currentMonth - 2),\r\n      to: currentMonth,\r\n    },\r\n    {\r\n      label: \"Last 6M\",\r\n      value: \"6m\",\r\n      from: Math.max(1, currentMonth - 5),\r\n      to: currentMonth,\r\n    },\r\n    { label: \"YTD\", value: \"ytd\", from: 1, to: currentMonth },\r\n    { label: \"Full Year\", value: \"full\", from: 1, to: 12 },\r\n  ];\r\n\r\n  // Handle preset click\r\n  const handlePresetClick = async (preset) => {\r\n    if (apiLoading) return;\r\n    setMonthRange(preset.from, preset.to);\r\n    await fetchCostData(preset.from, preset.to, currentYear, viewType);\r\n  };\r\n\r\n  // Get active preset\r\n  const getActivePreset = () => {\r\n    const preset = presets.find(\r\n      (p) => p.from === monthRange.from && p.to === monthRange.to\r\n    );\r\n    return preset?.value || null;\r\n  };\r\n\r\n  // Calculate position from month (1-12)\r\n  const getPositionFromMonth = (month) => {\r\n    return ((month - 1) / 11) * 100;\r\n  };\r\n\r\n  // Calculate month from position (0-100)\r\n  const getMonthFromPosition = (position) => {\r\n    const month = Math.round((position / 100) * 11) + 1;\r\n    return Math.max(1, Math.min(12, month));\r\n  };\r\n\r\n  // Handle mouse down on slider track\r\n  const handleTrackClick = (e) => {\r\n    if (apiLoading || isDragging) return;\r\n\r\n    const rect = sliderRef.current.getBoundingClientRect();\r\n    const clickX = e.clientX - rect.left;\r\n    const position = (clickX / rect.width) * 100;\r\n    const clickedMonth = getMonthFromPosition(position);\r\n\r\n    // Determine which handle is closer\r\n    const startPos = getPositionFromMonth(monthRange.from);\r\n    const endPos = getPositionFromMonth(monthRange.to);\r\n    const clickPos = position;\r\n\r\n    const distToStart = Math.abs(clickPos - startPos);\r\n    const distToEnd = Math.abs(clickPos - endPos);\r\n\r\n    if (distToStart < distToEnd) {\r\n      if (clickedMonth <= monthRange.to) {\r\n        updateRange(clickedMonth, monthRange.to);\r\n      }\r\n    } else {\r\n      if (clickedMonth >= monthRange.from) {\r\n        updateRange(monthRange.from, clickedMonth);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Update range and fetch data\r\n  const updateRange = async (from, to) => {\r\n    if (from > to) [from, to] = [to, from];\r\n    setMonthRange(from, to);\r\n    await fetchCostData(from, to, currentYear, viewType);\r\n  };\r\n\r\n  // Handle drag start\r\n  const handleDragStart = (e, type) => {\r\n    if (apiLoading) return;\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    setIsDragging(type);\r\n    setDragStartX(e.clientX || e.touches?.[0]?.clientX);\r\n    setInitialRange({ from: monthRange.from, to: monthRange.to });\r\n  };\r\n\r\n  // Handle drag move\r\n  const handleDragMove = useCallback(\r\n    (e) => {\r\n      if (!isDragging || !sliderRef.current) return;\r\n\r\n      const clientX = e.clientX || e.touches?.[0]?.clientX;\r\n      const rect = sliderRef.current.getBoundingClientRect();\r\n      const position = ((clientX - rect.left) / rect.width) * 100;\r\n      const newMonth = getMonthFromPosition(position);\r\n\r\n      if (isDragging === \"start\") {\r\n        if (newMonth <= monthRange.to) {\r\n          setMonthRange(newMonth, monthRange.to);\r\n        }\r\n      } else if (isDragging === \"end\") {\r\n        if (newMonth >= monthRange.from) {\r\n          setMonthRange(monthRange.from, newMonth);\r\n        }\r\n      } else if (isDragging === \"range\") {\r\n        const deltaX = clientX - dragStartX;\r\n        const deltaMonths = Math.round((deltaX / rect.width) * 11);\r\n\r\n        let newFrom = initialRange.from + deltaMonths;\r\n        let newTo = initialRange.to + deltaMonths;\r\n\r\n        // Clamp to valid range\r\n        if (newFrom < 1) {\r\n          newTo = newTo + (1 - newFrom);\r\n          newFrom = 1;\r\n        }\r\n        if (newTo > 12) {\r\n          newFrom = newFrom - (newTo - 12);\r\n          newTo = 12;\r\n        }\r\n\r\n        newFrom = Math.max(1, Math.min(12, newFrom));\r\n        newTo = Math.max(1, Math.min(12, newTo));\r\n\r\n        if (newFrom <= newTo) {\r\n          setMonthRange(newFrom, newTo);\r\n        }\r\n      }\r\n    },\r\n    [isDragging, monthRange, dragStartX, initialRange, setMonthRange]\r\n  );\r\n\r\n  // Handle drag end\r\n  const handleDragEnd = useCallback(async () => {\r\n    if (isDragging) {\r\n      setIsDragging(null);\r\n      await fetchCostData(\r\n        monthRange.from,\r\n        monthRange.to,\r\n        currentYear,\r\n        viewType\r\n      );\r\n    }\r\n  }, [isDragging, monthRange, currentYear, viewType, fetchCostData]);\r\n\r\n  // Add/remove event listeners\r\n  useEffect(() => {\r\n    if (isDragging) {\r\n      window.addEventListener(\"mousemove\", handleDragMove);\r\n      window.addEventListener(\"mouseup\", handleDragEnd);\r\n      window.addEventListener(\"touchmove\", handleDragMove);\r\n      window.addEventListener(\"touchend\", handleDragEnd);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener(\"mousemove\", handleDragMove);\r\n      window.removeEventListener(\"mouseup\", handleDragEnd);\r\n      window.removeEventListener(\"touchmove\", handleDragMove);\r\n      window.removeEventListener(\"touchend\", handleDragEnd);\r\n    };\r\n  }, [isDragging, handleDragMove, handleDragEnd]);\r\n\r\n  // Year navigation\r\n  const handleYearChange = async (delta) => {\r\n    if (apiLoading) return;\r\n    const newYear = currentYear + delta;\r\n    if (newYear >= 2020 && newYear <= new Date().getFullYear()) {\r\n      setCurrentYear(newYear);\r\n      await fetchCostData(monthRange.from, monthRange.to, newYear, viewType);\r\n    }\r\n  };\r\n\r\n  const startPosition = getPositionFromMonth(monthRange.from);\r\n  const endPosition = getPositionFromMonth(monthRange.to);\r\n  const activePreset = getActivePreset();\r\n\r\n  return (\r\n    <div className={`${compact ? \"px-5 py-4\" : \"p-6\"} relative`}>\r\n      {/* Header Row: Year + Presets */}\r\n      <div className=\"flex items-center justify-between mb-5\">\r\n        {/* Year Selector */}\r\n        <div className=\"flex items-center gap-3\">\r\n          <button\r\n            onClick={() => handleYearChange(-1)}\r\n            disabled={apiLoading || currentYear <= 2020}\r\n            className={`p-2 rounded-lg transition-all ${\r\n              apiLoading || currentYear <= 2020\r\n                ? \"opacity-40 cursor-not-allowed\"\r\n                : \"hover:bg-gray-100 active:scale-95\"\r\n            }`}\r\n          >\r\n            <ChevronLeft className=\"w-6 h-6 text-gray-600\" />\r\n          </button>\r\n\r\n          <div className=\"flex items-center gap-2 px-5 py-2.5 bg-blue-50 rounded-xl border-2 border-blue-300\">\r\n            <Calendar className=\"w-6 h-6 text-blue-600\" />\r\n            <span className=\"text-lg font-extrabold text-gray-800\">\r\n              {currentYear}\r\n            </span>\r\n          </div>\r\n\r\n          <button\r\n            onClick={() => handleYearChange(1)}\r\n            disabled={apiLoading || currentYear >= new Date().getFullYear()}\r\n            className={`p-2 rounded-lg transition-all ${\r\n              apiLoading || currentYear >= new Date().getFullYear()\r\n                ? \"opacity-40 cursor-not-allowed\"\r\n                : \"hover:bg-gray-100 active:scale-95\"\r\n            }`}\r\n          >\r\n            <ChevronRight className=\"w-6 h-6 text-gray-600\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Quick Presets */}\r\n        <div className=\"flex items-center gap-2\">\r\n          {presets.map((preset) => (\r\n            <button\r\n              key={preset.value}\r\n              onClick={() => handlePresetClick(preset)}\r\n              disabled={apiLoading}\r\n              className={`px-4 py-2.5 rounded-xl text-base font-bold transition-all ${\r\n                activePreset === preset.value\r\n                  ? \"bg-blue-500 text-white shadow-lg\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              } ${apiLoading ? \"opacity-50 cursor-not-allowed\" : \"\"}`}\r\n            >\r\n              {preset.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Slider Container */}\r\n      <div className=\"relative pt-2\">\r\n        {/* Month Labels */}\r\n        <div className=\"flex justify-between mb-4 px-1\">\r\n          {monthNames.map((month, index) => {\r\n            const monthNum = index + 1;\r\n            const isInRange =\r\n              monthNum >= monthRange.from && monthNum <= monthRange.to;\r\n            const isEndpoint =\r\n              monthNum === monthRange.from || monthNum === monthRange.to;\r\n\r\n            return (\r\n              <span\r\n                key={month}\r\n                className={`text-base font-bold transition-all cursor-pointer select-none px-1 ${\r\n                  isEndpoint\r\n                    ? \"text-blue-600 scale-110\"\r\n                    : isInRange\r\n                    ? \"text-blue-500\"\r\n                    : \"text-gray-400\"\r\n                }`}\r\n                onClick={() => {\r\n                  if (apiLoading) return;\r\n                  // Smart click: closest handle moves to this month\r\n                  const distToStart = Math.abs(monthNum - monthRange.from);\r\n                  const distToEnd = Math.abs(monthNum - monthRange.to);\r\n\r\n                  if (distToStart <= distToEnd && monthNum <= monthRange.to) {\r\n                    updateRange(monthNum, monthRange.to);\r\n                  } else if (monthNum >= monthRange.from) {\r\n                    updateRange(monthRange.from, monthNum);\r\n                  }\r\n                }}\r\n              >\r\n                {month}\r\n              </span>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Slider Track */}\r\n        <div\r\n          ref={sliderRef}\r\n          className=\"relative h-5 bg-gray-200 rounded-full cursor-pointer overflow-visible\"\r\n          onClick={handleTrackClick}\r\n        >\r\n          {/* Selected Range Background - Solid Color */}\r\n          <div\r\n            className=\"absolute h-full bg-blue-400 rounded-full transition-all duration-150 shadow-md\"\r\n            style={{\r\n              left: `${startPosition}%`,\r\n              width: `${endPosition - startPosition}%`,\r\n            }}\r\n          />\r\n\r\n          {/* Draggable Range Area */}\r\n          <div\r\n            className=\"absolute h-full cursor-grab active:cursor-grabbing\"\r\n            style={{\r\n              left: `${startPosition}%`,\r\n              width: `${endPosition - startPosition}%`,\r\n            }}\r\n            onMouseDown={(e) => handleDragStart(e, \"range\")}\r\n            onTouchStart={(e) => handleDragStart(e, \"range\")}\r\n          />\r\n\r\n          {/* Start Handle */}\r\n          <div\r\n            className={`absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-7 h-7 \r\n              bg-white border-[3px] border-blue-500 rounded-full shadow-lg cursor-ew-resize\r\n              hover:scale-125 hover:border-blue-600 transition-transform z-20\r\n              ${\r\n                isDragging === \"start\"\r\n                  ? \"scale-125 border-blue-600 shadow-xl\"\r\n                  : \"\"\r\n              }`}\r\n            style={{ left: `${startPosition}%` }}\r\n            onMouseDown={(e) => handleDragStart(e, \"start\")}\r\n            onTouchStart={(e) => handleDragStart(e, \"start\")}\r\n          >\r\n            <div className=\"absolute inset-1.5 bg-blue-500 rounded-full\" />\r\n          </div>\r\n\r\n          {/* End Handle */}\r\n          <div\r\n            className={`absolute top-1/2 -translate-y-1/2 -translate-x-1/2 w-7 h-7 \r\n              bg-white border-[3px] border-blue-500 rounded-full shadow-lg cursor-ew-resize\r\n              hover:scale-125 hover:border-blue-600 transition-transform z-20\r\n              ${\r\n                isDragging === \"end\"\r\n                  ? \"scale-125 border-blue-600 shadow-xl\"\r\n                  : \"\"\r\n              }`}\r\n            style={{ left: `${endPosition}%` }}\r\n            onMouseDown={(e) => handleDragStart(e, \"end\")}\r\n            onTouchStart={(e) => handleDragStart(e, \"end\")}\r\n          >\r\n            <div className=\"absolute inset-1.5 bg-blue-500 rounded-full\" />\r\n          </div>\r\n\r\n          {/* Month tick marks */}\r\n          {monthNames.map((_, index) => (\r\n            <div\r\n              key={index}\r\n              className=\"absolute top-1/2 -translate-y-1/2 w-0.5 h-3 bg-gray-300 rounded-full\"\r\n              style={{ left: `${(index / 11) * 100}%` }}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Loading Indicator */}\r\n      {apiLoading && (\r\n        <div className=\"absolute inset-0 bg-white/50 rounded-xl flex items-center justify-center\">\r\n          <div className=\"w-7 h-7 border-3 border-blue-500 border-t-transparent rounded-full animate-spin\" />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MonthRangeSlider;\r\n","// import React, { useState } from \"react\";\r\n// import {\r\n//   LineChart,\r\n//   Line,\r\n//   BarChart,\r\n//   Bar,\r\n//   PieChart,\r\n//   Pie,\r\n//   Cell,\r\n//   AreaChart,\r\n//   Area,\r\n//   XAxis,\r\n//   YAxis,\r\n//   CartesianGrid,\r\n//   Tooltip,\r\n//   Legend,\r\n//   ResponsiveContainer,\r\n// } from \"recharts\";\r\n// import {\r\n//   TrendingUp,\r\n//   TrendingDown,\r\n//   IndianRupee,\r\n//   Activity,\r\n//   Users,\r\n//   ShoppingCart,\r\n//   Briefcase,\r\n//   Clock,\r\n//   FileText,\r\n//   Package,\r\n//   BarChart3,\r\n//   AlertCircle,\r\n//   CheckCircle,\r\n//   Filter,\r\n//   Download,\r\n//   RefreshCw,\r\n//   Lightbulb,\r\n//   MessageSquare,\r\n//   Send,\r\n//   X,\r\n//   ChevronRight,\r\n//   Search,\r\n//   Percent,\r\n//   DollarSign,\r\n//   Building,\r\n//   Archive,\r\n//   Truck,\r\n//   Settings,\r\n//   Target,\r\n// } from \"lucide-react\";\r\n\r\n// const CostScreener = () => {\r\n//   const [selectedModule, setSelectedModule] = useState(null);\r\n//   const [chatOpen, setChatOpen] = useState(true);\r\n//   const [chatMessages, setChatMessages] = useState([\r\n//     {\r\n//       type: \"bot\",\r\n//       text: \" Hello! Ask me about any module - MIS, Sales, FI, Treasury, GST, Materials, Plant, or Dispatch!\",\r\n//     },\r\n//   ]);\r\n//   const [chatInput, setChatInput] = useState(\"\");\r\n\r\n//   const COLORS = {\r\n//     primary: \"#2563EB\",\r\n//     success: \"#059669\",\r\n//     warning: \"#D97706\",\r\n//     danger: \"#DC2626\",\r\n//     info: \"#7C3AED\",\r\n//   };\r\n\r\n//   // All 11 Module Cards Data\r\n//   const modules = [\r\n//     {\r\n//       id: \"mis\",\r\n//       title: \"MIS Dashboard\",\r\n//       subtitle: \"P&L, Balance Sheet & Ratios\",\r\n//       icon: Activity,\r\n//       color: \"from-blue-500 to-blue-600\",\r\n//       bgGradient: \"from-blue-50 to-blue-100\",\r\n//       summary: {\r\n//         metric1: \"P&L\",\r\n//         value1: \"On Track\",\r\n//         metric2: \"Balance Sheet\",\r\n//         value2: \"Healthy\",\r\n//         metric3: \"Ratios\",\r\n//         value3: \"Positive\",\r\n//       },\r\n//       deepDiveData: {\r\n//         sections: [\r\n//           \"Dashboard - P & L\",\r\n//           \"Balance sheet & MIS P & L\",\r\n//           \"Balancesheet ratios\",\r\n//           \"Sales\",\r\n//           \"Raw Material Consumption\",\r\n//           \"Manufacturing Cost\",\r\n//         ],\r\n//       },\r\n//     },\r\n//     {\r\n//       id: \"treasury\",\r\n//       title: \"Treasury\",\r\n//       subtitle: \"Cash, FX, Loans, AP/AR\",\r\n//       icon: Briefcase,\r\n//       color: \"from-green-500 to-green-600\",\r\n//       bgGradient: \"from-green-50 to-green-100\",\r\n//       summary: {\r\n//         metric1: \"Cash Flow\",\r\n//         value1: \"285 Cr\",\r\n//         metric2: \"FX Loss\",\r\n//         value2: \"6 Mn\",\r\n//         metric3: \"Loans\",\r\n//         value3: \"630 Cr\",\r\n//       },\r\n//       deepDiveData: {\r\n//         sections: [\r\n//           \"Cash Flow\",\r\n//           \"Bank balances\",\r\n//           \"FX - Forward position\",\r\n//           \"Fx - Realised & unrealised gain/loss\",\r\n//           \"Loan position\",\r\n//           \"Account payable\",\r\n//           \"Account Receivable\",\r\n//         ],\r\n//       },\r\n//     },\r\n//     {\r\n//       id: \"fi\",\r\n//       title: \"FI - Ageing\",\r\n//       subtitle: \"Advances, CWIP, Sub-con\",\r\n//       icon: Clock,\r\n//       color: \"from-orange-500 to-orange-600\",\r\n//       bgGradient: \"from-orange-50 to-orange-100\",\r\n//       summary: {\r\n//         metric1: \"Advances\",\r\n//         value1: \"30 L\",\r\n//         metric2: \"CWIP >12M\",\r\n//         value2: \"200 Cr \",\r\n//         metric3: \"Sub-con\",\r\n//         value3: \"222 Cr\",\r\n//       },\r\n//       deepDiveData: {\r\n//         ageingAdvances: [\r\n//           {\r\n//             category: \"abc\",\r\n//             \"1m\": 1000000,\r\n//             \"3m\": 0,\r\n//             \"6m\": 0,\r\n//             \"12m\": 0,\r\n//             \">12m\": 0,\r\n//             total: 1000000,\r\n//           },\r\n//           {\r\n//             category: \"xyz\",\r\n//             \"1m\": 0,\r\n//             \"3m\": 0,\r\n//             \"6m\": 0,\r\n//             \"12m\": 2000000,\r\n//             \">12m\": 0,\r\n//             total: 2000000,\r\n//           },\r\n//           {\r\n//             category: \"Total\",\r\n//             \"1m\": 1000000,\r\n//             \"3m\": 0,\r\n//             \"6m\": 0,\r\n//             \"12m\": 2000000,\r\n//             \">12m\": 0,\r\n//             total: 3000000,\r\n//           },\r\n//         ],\r\n//         ageingCWIP: [\r\n//           {\r\n//             category: \"abc\",\r\n//             \"1m\": 1000000,\r\n//             \"3m\": 2000000,\r\n//             \"6m\": 15000000,\r\n//             \"12m\": 0,\r\n//             \">12m\": 200000000,\r\n//             total: 218000000,\r\n//           },\r\n//           {\r\n//             category: \"xyz\",\r\n//             \"1m\": 0,\r\n//             \"3m\": 1000000,\r\n//             \"6m\": 2000000,\r\n//             \"12m\": 2000000,\r\n//             \">12m\": 0,\r\n//             total: 5000000,\r\n//           },\r\n//           {\r\n//             category: \"Total\",\r\n//             \"1m\": 1000000,\r\n//             \"3m\": 3000000,\r\n//             \"6m\": 17000000,\r\n//             \"12m\": 2000000,\r\n//             \">12m\": 200000000,\r\n//             total: 223000000,\r\n//           },\r\n//         ],\r\n//         subconChallan: [\r\n//           {\r\n//             vendor: \"abc\",\r\n//             \"3m\": 2000000,\r\n//             \"6m\": 15000000,\r\n//             \"12m\": 0,\r\n//             \">12m\": 200000000,\r\n//             total: 217000000,\r\n//           },\r\n//           {\r\n//             vendor: \"xyz\",\r\n//             \"3m\": 1000000,\r\n//             \"6m\": 2000000,\r\n//             \"12m\": 2000000,\r\n//             \">12m\": 0,\r\n//             total: 5000000,\r\n//           },\r\n//           {\r\n//             vendor: \"Total\",\r\n//             \"3m\": 3000000,\r\n//             \"6m\": 17000000,\r\n//             \"12m\": 2000000,\r\n//             \">12m\": 200000000,\r\n//             total: 222000000,\r\n//           },\r\n//         ],\r\n//       },\r\n//     },\r\n//     {\r\n//       id: \"sales\",\r\n//       title: \"Sales Performance\",\r\n//       subtitle: \"Auto, Gear, GB&DC\",\r\n//       icon: ShoppingCart,\r\n//       color: \"from-purple-500 to-purple-600\",\r\n//       bgGradient: \"from-purple-50 to-purple-100\",\r\n//       summary: {\r\n//         metric1: \"Total FTM\",\r\n//         value1: \"1,892 Mn\",\r\n//         metric2: \"Auto\",\r\n//         value2: \"1,367 Mn\",\r\n//         metric3: \"Export\",\r\n//         value3: \"689 Mn\",\r\n//       },\r\n//       deepDiveData: {\r\n//         ftm: {\r\n//           auto: {\r\n//             plan: 1347.48,\r\n//             actual: 1367.42,\r\n//             exportUSD: { plan: 360.54, actual: 352.72 },\r\n//             exportEuro: { plan: 40.52, actual: 27.13 },\r\n//             domestic: { plan: 818.75, actual: 842.99 },\r\n//           },\r\n//           gear: {\r\n//             plan: 478.6,\r\n//             actual: 479.91,\r\n//             exportUSD: { plan: 41.42, actual: 74.25 },\r\n//             exportEuro: { plan: 239.65, actual: 228.51 },\r\n//             domestic: { plan: 94.15, actual: 77.12 },\r\n//           },\r\n//           gbdc: {\r\n//             plan: 52.72,\r\n//             actual: 44.98,\r\n//             exportUSD: { plan: 0, actual: 0.2 },\r\n//             exportEuro: { plan: 15.0, actual: 6.31 },\r\n//             domestic: { plan: 2.07, actual: 4.88 },\r\n//           },\r\n//           total: { plan: 1878.79, actual: 1892.32 },\r\n//         },\r\n//       },\r\n//     },\r\n//     {\r\n//       id: \"customers\",\r\n//       title: \"Sales by Customer\",\r\n//       subtitle: \"Top Customers Analysis\",\r\n//       icon: Users,\r\n//       color: \"from-pink-500 to-pink-600\",\r\n//       bgGradient: \"from-pink-50 to-pink-100\",\r\n//       summary: {\r\n//         metric1: \"Stellantis\",\r\n//         value1: \"Top\",\r\n//         metric2: \"Dana\",\r\n//         value2: \"2nd\",\r\n//         metric3: \"TML/Maruti\",\r\n//         value3: \"3rd/4th\",\r\n//       },\r\n//       deepDiveData: {\r\n//         customers: [\r\n//           {\r\n//             name: \"Stellantis\",\r\n//             budOct: 450,\r\n//             actOct: 460,\r\n//             delta: 10,\r\n//             budYTD: 2500,\r\n//             actYTD: 2600,\r\n//             deltaYTD: 100,\r\n//           },\r\n//           {\r\n//             name: \"Dana\",\r\n//             budOct: 380,\r\n//             actOct: 375,\r\n//             delta: -5,\r\n//             budYTD: 2100,\r\n//             actYTD: 2080,\r\n//             deltaYTD: -20,\r\n//           },\r\n//           {\r\n//             name: \"TML\",\r\n//             budOct: 320,\r\n//             actOct: 310,\r\n//             delta: -10,\r\n//             budYTD: 1800,\r\n//             actYTD: 1750,\r\n//             deltaYTD: -50,\r\n//           },\r\n//           {\r\n//             name: \"Maruti\",\r\n//             budOct: 280,\r\n//             actOct: 295,\r\n//             delta: 15,\r\n//             budYTD: 1600,\r\n//             actYTD: 1680,\r\n//             deltaYTD: 80,\r\n//           },\r\n//         ],\r\n//       },\r\n//     },\r\n//     {\r\n//       id: \"fx\",\r\n//       title: \"FX Management\",\r\n//       subtitle: \"Forward Contracts & Hedging\",\r\n//       icon: DollarSign,\r\n//       color: \"from-teal-500 to-teal-600\",\r\n//       bgGradient: \"from-teal-50 to-teal-100\",\r\n//       summary: {\r\n//         metric1: \"USD Forward\",\r\n//         value1: \"36 Mn\",\r\n//         metric2: \"Euro Forward\",\r\n//         value2: \"36 Mn\",\r\n//         metric3: \"FX Loss\",\r\n//         value3: \"6 Mn\",\r\n//       },\r\n//       deepDiveData: {\r\n//         usdForward: [\r\n//           { month: \"Oct-25\", contract: 5.0, rate: 89.0, loss: -5.0 },\r\n//           { month: \"Nov-25\", contract: 5.0, rate: 90.0, loss: 0 },\r\n//           { month: \"Dec-25\", contract: 6.0, rate: 90.2, loss: 1.2 },\r\n//           { month: \"Jan-26\", contract: 6.0, rate: 90.3, loss: 1.8 },\r\n//           { month: \"FY 25-26\", contract: 36.0, rate: 0, loss: 4.3 },\r\n//         ],\r\n//         euroForward: [\r\n//           { month: \"Oct-25\", contract: 5.0, rate: 104.0, loss: -5.0 },\r\n//           { month: \"Nov-25\", contract: 5.0, rate: 105.0, loss: 0 },\r\n//           { month: \"Dec-25\", contract: 6.0, rate: 105.1, loss: 0.6 },\r\n//           { month: \"Jan-26\", contract: 6.0, rate: 105.2, loss: 1.2 },\r\n//           { month: \"FY 25-26\", contract: 36.0, rate: 0, loss: 1.7 },\r\n//         ],\r\n//       },\r\n//     },\r\n//     {\r\n//       id: \"gst\",\r\n//       title: \"GST Management\",\r\n//       subtitle: \"CGST, SGST, IGST Balance\",\r\n//       icon: FileText,\r\n//       color: \"from-yellow-500 to-yellow-600\",\r\n//       bgGradient: \"from-yellow-50 to-yellow-100\",\r\n//       summary: {\r\n//         metric1: \"Net Balance\",\r\n//         value1: \"-10 L\",\r\n//         metric2: \"CGST\",\r\n//         value2: \"-10 L\",\r\n//         metric3: \"ITC\",\r\n//         value3: \"250 L\",\r\n//       },\r\n//       deepDiveData: {\r\n//         gstBalance: [\r\n//           {\r\n//             type: \"CGST\",\r\n//             opening: 40,\r\n//             itc: 25,\r\n//             liability: -70,\r\n//             rcm: -5,\r\n//             net: -10,\r\n//           },\r\n//           {\r\n//             type: \"SGST\",\r\n//             opening: 50,\r\n//             itc: 25,\r\n//             liability: -70,\r\n//             rcm: -5,\r\n//             net: 0,\r\n//           },\r\n//           {\r\n//             type: \"IGST\",\r\n//             opening: 60,\r\n//             itc: 200,\r\n//             liability: -240,\r\n//             rcm: -20,\r\n//             net: 0,\r\n//           },\r\n//           {\r\n//             type: \"Total\",\r\n//             opening: 150,\r\n//             itc: 250,\r\n//             liability: -380,\r\n//             rcm: -30,\r\n//             net: -10,\r\n//           },\r\n//         ],\r\n//       },\r\n//     },\r\n//     {\r\n//       id: \"refunds\",\r\n//       title: \"Tax Refunds\",\r\n//       subtitle: \"IGST, DBK, RODTEP\",\r\n//       icon: Package,\r\n//       color: \"from-indigo-500 to-indigo-600\",\r\n//       bgGradient: \"from-indigo-50 to-indigo-100\",\r\n//       summary: {\r\n//         metric1: \"IGST Pending\",\r\n//         value1: \"476 L\",\r\n//         metric2: \"DBK Pending\",\r\n//         value2: \"105 L\",\r\n//         metric3: \"RODTEP\",\r\n//         value3: \"29 L\",\r\n//       },\r\n//       deepDiveData: {\r\n//         refunds: [\r\n//           {\r\n//             year: \"2020-21\",\r\n//             igstTotal: 2000,\r\n//             igstRecv: 10,\r\n//             dbkTotal: 150,\r\n//             dbkRecv: 22,\r\n//             rodtepTotal: 100,\r\n//             rodtepRecv: 0,\r\n//           },\r\n//           {\r\n//             year: \"2021-22\",\r\n//             igstTotal: 2200,\r\n//             igstRecv: 15,\r\n//             dbkTotal: 200,\r\n//             dbkRecv: 10,\r\n//             rodtepTotal: 110,\r\n//             rodtepRecv: 1,\r\n//           },\r\n//           {\r\n//             year: \"2022-23\",\r\n//             igstTotal: 2500,\r\n//             igstRecv: 10,\r\n//             dbkTotal: 220,\r\n//             dbkRecv: 1,\r\n//             rodtepTotal: 115,\r\n//             rodtepRecv: 1,\r\n//           },\r\n//           {\r\n//             year: \"2024-25\",\r\n//             igstTotal: 2550,\r\n//             igstRecv: 30,\r\n//             dbkTotal: 230,\r\n//             dbkRecv: 30,\r\n//             rodtepTotal: 115,\r\n//             rodtepRecv: 6,\r\n//           },\r\n//           {\r\n//             year: \"Total\",\r\n//             igstTotal: 10850,\r\n//             igstRecv: 476,\r\n//             dbkTotal: 960,\r\n//             dbkRecv: 105,\r\n//             rodtepTotal: 520,\r\n//             rodtepRecv: 29,\r\n//           },\r\n//         ],\r\n//       },\r\n//     },\r\n//     {\r\n//       id: \"material\",\r\n//       title: \"Material Management\",\r\n//       subtitle: \"GRN, Stock, Movement\",\r\n//       icon: Archive,\r\n//       color: \"from-cyan-500 to-cyan-600\",\r\n//       bgGradient: \"from-cyan-50 to-cyan-100\",\r\n//       summary: {\r\n//         metric1: \"Pending GRN\",\r\n//         value1: \"30 items\",\r\n//         metric2: \">7 days\",\r\n//         value2: \"2 items \",\r\n//         metric3: \"Mismatch\",\r\n//         value3: \"1 L\",\r\n//       },\r\n//       deepDiveData: {\r\n//         pendingGRN: [\r\n//           { days: \"For 1 days\", mundhwa: 10, ranjangaon: 15, total: 25 },\r\n//           { days: \"For 2-3 days\", mundhwa: 1, ranjangaon: 1, total: 2 },\r\n//           { days: \"For 4-7 days\", mundhwa: 0, ranjangaon: 1, total: 1 },\r\n//           { days: \"More than 7 days\", mundhwa: 1, ranjangaon: 1, total: 2 },\r\n//           { days: \"Total\", mundhwa: 12, ranjangaon: 18, total: 30 },\r\n//         ],\r\n//         mismatch: [\r\n//           { type: \"Mismatch numbers\", mundhwa: 0, ranjangaon: 2, total: 2 },\r\n//           {\r\n//             type: \"Mismatch value\",\r\n//             mundhwa: 0,\r\n//             ranjangaon: 100000,\r\n//             total: 100000,\r\n//           },\r\n//         ],\r\n//         partMovement: [\r\n//           { period: \"Last 1 month\", count: 30, value: 300000 },\r\n//           { period: \"Last 3 month\", count: 30, value: 300000 },\r\n//           { period: \"Last 6 month\", count: 30, value: 300000 },\r\n//           { period: \"Last 12 month\", count: 30, value: 300000 },\r\n//         ],\r\n//       },\r\n//     },\r\n//     {\r\n//       id: \"plant\",\r\n//       title: \"Plant Operations\",\r\n//       subtitle: \"Utilization & Efficiency\",\r\n//       icon: Building,\r\n//       color: \"from-rose-500 to-rose-600\",\r\n//       bgGradient: \"from-rose-50 to-rose-100\",\r\n//       summary: {\r\n//         metric1: \"Avg Util\",\r\n//         value1: \"46%\",\r\n//         metric2: \"Rejection\",\r\n//         value2: \"50 Mn/yr\",\r\n//         metric3: \"Scrap\",\r\n//         value3: \"73%\",\r\n//       },\r\n//       deepDiveData: {\r\n//         utilization: [\r\n//           {\r\n//             machine: \"2500 Ton Press\",\r\n//             mundhwa: 50,\r\n//             ranjangaon: 20,\r\n//             khed: null,\r\n//           },\r\n//           {\r\n//             machine: \"1500 Ton Press\",\r\n//             mundhwa: 70,\r\n//             ranjangaon: 80,\r\n//             khed: null,\r\n//           },\r\n//           {\r\n//             machine: \"Tesla line - 4 DU\",\r\n//             mundhwa: null,\r\n//             ranjangaon: null,\r\n//             khed: 10,\r\n//           },\r\n//         ],\r\n//         rejection: [\r\n//           {\r\n//             month: \"Apr-25\",\r\n//             mundhwa: 2500000,\r\n//             ranjangaon: 5000000,\r\n//             khed: 6000000,\r\n//             total: 13500000,\r\n//           },\r\n//           {\r\n//             month: \"May-25\",\r\n//             mundhwa: 2500000,\r\n//             ranjangaon: 5000000,\r\n//             khed: 7000000,\r\n//             total: 14500000,\r\n//           },\r\n//           {\r\n//             month: \"Jun-25\",\r\n//             mundhwa: 2500000,\r\n//             ranjangaon: 5000000,\r\n//             khed: 5000000,\r\n//             total: 12500000,\r\n//           },\r\n//         ],\r\n//         scrap: [\r\n//           { month: \"Apr-25\", mundhwa: 95, ranjangaon: 100, khed: 50 },\r\n//           { month: \"May-25\", mundhwa: 80, ranjangaon: 90, khed: 60 },\r\n//         ],\r\n//       },\r\n//     },\r\n//     {\r\n//       id: \"consumption\",\r\n//       title: \"Material Consumption\",\r\n//       subtitle: \"Die-wise Variance\",\r\n//       icon: Percent,\r\n//       color: \"from-violet-500 to-violet-600\",\r\n//       bgGradient: \"from-violet-50 to-violet-100\",\r\n//       summary: {\r\n//         metric1: \"Die #12345\",\r\n//         value1: \"-5%\",\r\n//         metric2: \"Die #25600\",\r\n//         value2: \"+3%\",\r\n//         metric3: \"Variance\",\r\n//         value3: \">2%\",\r\n//       },\r\n//       deepDiveData: {\r\n//         materialChange: [\r\n//           { dieNumber: 12345, mundhwa: -5.0, ranjangaon: -4.5 },\r\n//           { dieNumber: 25600, mundhwa: 3.0, ranjangaon: 2.4 },\r\n//           { dieNumber: 21456, mundhwa: 0, ranjangaon: 0 },\r\n//         ],\r\n//       },\r\n//     },\r\n//     {\r\n//       id: \"dispatch\",\r\n//       title: \"Dispatch Discipline\",\r\n//       subtitle: \"On-time Performance\",\r\n//       icon: Truck,\r\n//       color: \"from-emerald-500 to-emerald-600\",\r\n//       bgGradient: \"from-emerald-50 to-emerald-100\",\r\n//       summary: {\r\n//         metric1: \"Post 5 PM\",\r\n//         value1: \"10-20%\",\r\n//         metric2: \"Delays\",\r\n//         value2: \"15-30%\",\r\n//         metric3: \"Cancel\",\r\n//         value3: \"45 cases\",\r\n//       },\r\n//       deepDiveData: {\r\n//         dispatch: [\r\n//           { metric: \"Post 5 pm\", mundhwa: 10, ranjangaon: 5, khed: 20 },\r\n//           {\r\n//             metric: \"Delay in PGI and invoice time beyond 24 hrs\",\r\n//             mundhwa: 20,\r\n//             ranjangaon: 30,\r\n//             khed: 15,\r\n//           },\r\n//           {\r\n//             metric: \"Delay in invoice and e invoice time beyond 24 hrs\",\r\n//             mundhwa: 20,\r\n//             ranjangaon: 30,\r\n//             khed: 15,\r\n//           },\r\n//           {\r\n//             metric: \"Delay in e invoice and e-way bill time beyond 24 hrs\",\r\n//             mundhwa: 20,\r\n//             ranjangaon: 30,\r\n//             khed: 15,\r\n//           },\r\n//           {\r\n//             metric: \"Cancellation of invoice\",\r\n//             mundhwa: 10,\r\n//             ranjangaon: 15,\r\n//             khed: 20,\r\n//           },\r\n//         ],\r\n//       },\r\n//     },\r\n//   ];\r\n\r\n//   const formatCurrency = (value) => {\r\n//     if (value >= 10000000) return `${(value / 10000000).toFixed(2)} Cr`;\r\n//     if (value >= 100000) return `${(value / 100000).toFixed(2)} L`;\r\n//     return `${value.toLocaleString(\"en-IN\")}`;\r\n//   };\r\n\r\n//   const handleSendMessage = () => {\r\n//     if (!chatInput.trim()) return;\r\n//     setChatMessages([...chatMessages, { type: \"user\", text: chatInput }]);\r\n//     const msg = chatInput.toLowerCase();\r\n//     setChatInput(\"\");\r\n\r\n//     setTimeout(() => {\r\n//       let response = \"\";\r\n//       if (msg.includes(\"sales\") || msg.includes(\"revenue\"))\r\n//         response =\r\n//           \" Total Sales: 1,892 Mn. Auto: 1,367 Mn, Gear: 480 Mn, GB&DC: 45 Mn. Export: 689 Mn (+6.3%)\";\r\n//       else if (msg.includes(\"cwip\") || msg.includes(\"ageing\"))\r\n//         response =\r\n//           \" CRITICAL: 200 Cr CWIP aged >12 months! Advances: 30 L (20L >12M). Sub-con: 222 Cr.\";\r\n//       else if (msg.includes(\"gst\"))\r\n//         response =\r\n//           \"GST Net: -10 Lakhs payable. CGST: -10L, SGST: 0, IGST: 0. Total ITC: 250L\";\r\n//       else if (msg.includes(\"refund\"))\r\n//         response =\r\n//           \"Pending Refunds: IGST 476L, DBK 105L, RODTEP 29L. Total: 610 Lakhs\";\r\n//       else if (msg.includes(\"grn\") || msg.includes(\"material\"))\r\n//         response =\r\n//           \"Pending GRN: 30 items (Mundhwa: 12, Ranjangaon: 18). 2 items >7 days . Mismatch value: 1L\";\r\n//       else if (msg.includes(\"plant\") || msg.includes(\"utilization\"))\r\n//         response =\r\n//           \"Plant Utilization - Mundhwa: 50-70%, Ranjangaon: 20-80% (2500T critical at 20% ), Khed: 10%\";\r\n//       else if (msg.includes(\"dispatch\"))\r\n//         response =\r\n//           \"Dispatch Issues: Post 5PM (10-20%), Invoice delays (15-30%), Cancellations: 45 cases\";\r\n//       else if (msg.includes(\"fx\") || msg.includes(\"forward\"))\r\n//         response =\r\n//           \"FX Forwards: USD 36Mn, Euro 36Mn. Current loss: 6 Mn. Spot rate: USD 90, Euro 105\";\r\n//       else\r\n//         response =\r\n//           \"I can help with: Sales, FI Ageing, GST, Refunds, Material/GRN, Plant, Dispatch, FX, Customers. What would you like to know?\";\r\n\r\n//       setChatMessages((prev) => [...prev, { type: \"bot\", text: response }]);\r\n//     }, 800);\r\n//   };\r\n\r\n//   const DeepDiveModal = ({ module, onClose }) => {\r\n//     if (!module) return null;\r\n\r\n//     const renderDeepDive = () => {\r\n//       switch (module.id) {\r\n//         case \"fi\":\r\n//           return (\r\n//             <div className=\"space-y-4\">\r\n//               {/* Ageing of Advances */}\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-orange-600 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Ageing of Advances\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\">Category</th>\r\n//                         <th className=\"px-3 py-2 text-center\">1 month</th>\r\n//                         <th className=\"px-3 py-2 text-center\">3 month</th>\r\n//                         <th className=\"px-3 py-2 text-center\">6 month</th>\r\n//                         <th className=\"px-3 py-2 text-center\">12 month</th>\r\n//                         <th className=\"px-3 py-2 text-center\">&gt;12 month</th>\r\n//                         <th className=\"px-3 py-2 text-center bg-blue-50 font-bold\">\r\n//                           Total\r\n//                         </th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.ageingAdvances.map((row, idx) => (\r\n//                         <tr\r\n//                           key={idx}\r\n//                           className={`border-b ${\r\n//                             row.category === \"Total\"\r\n//                               ? \"bg-green-50 font-semibold\"\r\n//                               : \"hover:bg-gray-50\"\r\n//                           }`}\r\n//                         >\r\n//                           <td className=\"px-3 py-2\">{row.category}</td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row[\"1m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row[\"3m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row[\"6m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row[\"12m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center text-red-600 font-semibold\">\r\n//                             {formatCurrency(row[\">12m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center bg-blue-50 font-bold\">\r\n//                             {formatCurrency(row.total)}\r\n//                           </td>\r\n//                         </tr>\r\n//                       ))}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n\r\n//               {/* Ageing of CWIP */}\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-purple-600 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Ageing of CWIP / Asset\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\">Category</th>\r\n//                         <th className=\"px-3 py-2 text-center\">1 month</th>\r\n//                         <th className=\"px-3 py-2 text-center\">3 month</th>\r\n//                         <th className=\"px-3 py-2 text-center\">6 month</th>\r\n//                         <th className=\"px-3 py-2 text-center\">12 month</th>\r\n//                         <th className=\"px-3 py-2 text-center\">&gt;12 month</th>\r\n//                         <th className=\"px-3 py-2 text-center bg-blue-50 font-bold\">\r\n//                           Total\r\n//                         </th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.ageingCWIP.map((row, idx) => (\r\n//                         <tr\r\n//                           key={idx}\r\n//                           className={`border-b ${\r\n//                             row.category === \"Total\"\r\n//                               ? \"bg-green-50 font-semibold\"\r\n//                               : \"hover:bg-gray-50\"\r\n//                           }`}\r\n//                         >\r\n//                           <td className=\"px-3 py-2\">{row.category}</td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row[\"1m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row[\"3m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row[\"6m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row[\"12m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center text-red-600 font-bold\">\r\n//                             {formatCurrency(row[\">12m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center bg-blue-50 font-bold\">\r\n//                             {formatCurrency(row.total)}\r\n//                           </td>\r\n//                         </tr>\r\n//                       ))}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n\r\n//               {/* Sub-con Challan */}\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-teal-600 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Open Sub-con Challan / Vendor name - Material\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\">Vendor</th>\r\n//                         <th className=\"px-3 py-2 text-center\">3 month</th>\r\n//                         <th className=\"px-3 py-2 text-center\">6 month</th>\r\n//                         <th className=\"px-3 py-2 text-center\">12 month</th>\r\n//                         <th className=\"px-3 py-2 text-center\">&gt;12 month</th>\r\n//                         <th className=\"px-3 py-2 text-center bg-blue-50 font-bold\">\r\n//                           Total\r\n//                         </th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.subconChallan.map((row, idx) => (\r\n//                         <tr\r\n//                           key={idx}\r\n//                           className={`border-b ${\r\n//                             row.vendor === \"Total\"\r\n//                               ? \"bg-green-50 font-semibold\"\r\n//                               : \"hover:bg-gray-50\"\r\n//                           }`}\r\n//                         >\r\n//                           <td className=\"px-3 py-2\">{row.vendor}</td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row[\"3m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row[\"6m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row[\"12m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center text-red-600 font-bold\">\r\n//                             {formatCurrency(row[\">12m\"])}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center bg-blue-50 font-bold\">\r\n//                             {formatCurrency(row.total)}\r\n//                           </td>\r\n//                         </tr>\r\n//                       ))}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           );\r\n\r\n//         case \"sales\":\r\n//           return (\r\n//             <div className=\"space-y-4\">\r\n//               <div className=\"bg-white rounded-lg p-3 border border-gray-200\">\r\n//                 <div className=\"text-sm text-gray-600 mb-2\">\r\n//                   Filters: Customer, country, PY to CY FTM and YTD\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-purple-600 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   FTM Oct 25 (Rs. Mio.)\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\" rowSpan=\"2\">\r\n//                           Particulars\r\n//                         </th>\r\n//                         <th className=\"px-3 py-2 text-center\" colSpan=\"2\">\r\n//                           Auto\r\n//                         </th>\r\n//                         <th className=\"px-3 py-2 text-center\" colSpan=\"2\">\r\n//                           Gear\r\n//                         </th>\r\n//                         <th className=\"px-3 py-2 text-center\" colSpan=\"2\">\r\n//                           GB & DC\r\n//                         </th>\r\n//                         <th\r\n//                           className=\"px-3 py-2 text-center bg-blue-50\"\r\n//                           colSpan=\"2\"\r\n//                         >\r\n//                           Total-KTFL\r\n//                         </th>\r\n//                       </tr>\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-1.5 text-center text-gray-600\">\r\n//                           Plan\r\n//                         </th>\r\n//                         <th className=\"px-3 py-1.5 text-center text-gray-600\">\r\n//                           Actuals\r\n//                         </th>\r\n//                         <th className=\"px-3 py-1.5 text-center text-gray-600\">\r\n//                           Plan\r\n//                         </th>\r\n//                         <th className=\"px-3 py-1.5 text-center text-gray-600\">\r\n//                           Actuals\r\n//                         </th>\r\n//                         <th className=\"px-3 py-1.5 text-center text-gray-600\">\r\n//                           Plan\r\n//                         </th>\r\n//                         <th className=\"px-3 py-1.5 text-center text-gray-600\">\r\n//                           Actuals\r\n//                         </th>\r\n//                         <th className=\"px-3 py-1.5 text-center bg-blue-50 text-gray-600\">\r\n//                           Plan\r\n//                         </th>\r\n//                         <th className=\"px-3 py-1.5 text-center bg-blue-50 text-gray-600\">\r\n//                           Actuals\r\n//                         </th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       <tr className=\"border-b hover:bg-gray-50\">\r\n//                         <td className=\"px-3 py-2 font-medium\">\r\n//                           Export (INR Mn / US$ Mn)\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.auto.exportUSD.plan.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center font-semibold\">\r\n//                           {module.deepDiveData.ftm.auto.exportUSD.actual.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.gear.exportUSD.plan.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center font-semibold\">\r\n//                           {module.deepDiveData.ftm.gear.exportUSD.actual.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.gbdc.exportUSD.plan.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center font-semibold\">\r\n//                           {module.deepDiveData.ftm.gbdc.exportUSD.actual.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50\">\r\n//                           {(\r\n//                             module.deepDiveData.ftm.auto.exportUSD.plan +\r\n//                             module.deepDiveData.ftm.gear.exportUSD.plan +\r\n//                             module.deepDiveData.ftm.gbdc.exportUSD.plan\r\n//                           ).toFixed(2)}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold\">\r\n//                           {(\r\n//                             module.deepDiveData.ftm.auto.exportUSD.actual +\r\n//                             module.deepDiveData.ftm.gear.exportUSD.actual +\r\n//                             module.deepDiveData.ftm.gbdc.exportUSD.actual\r\n//                           ).toFixed(2)}\r\n//                         </td>\r\n//                       </tr>\r\n//                       <tr className=\"border-b hover:bg-gray-50\">\r\n//                         <td className=\"px-3 py-2 font-medium\">\r\n//                           Export (INR Mn / Euro Mn)\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.auto.exportEuro.plan.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center font-semibold\">\r\n//                           {module.deepDiveData.ftm.auto.exportEuro.actual.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.gear.exportEuro.plan.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center font-semibold\">\r\n//                           {module.deepDiveData.ftm.gear.exportEuro.actual.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.gbdc.exportEuro.plan.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center font-semibold\">\r\n//                           {module.deepDiveData.ftm.gbdc.exportEuro.actual.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50\">\r\n//                           {(\r\n//                             module.deepDiveData.ftm.auto.exportEuro.plan +\r\n//                             module.deepDiveData.ftm.gear.exportEuro.plan +\r\n//                             module.deepDiveData.ftm.gbdc.exportEuro.plan\r\n//                           ).toFixed(2)}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold\">\r\n//                           {(\r\n//                             module.deepDiveData.ftm.auto.exportEuro.actual +\r\n//                             module.deepDiveData.ftm.gear.exportEuro.actual +\r\n//                             module.deepDiveData.ftm.gbdc.exportEuro.actual\r\n//                           ).toFixed(2)}\r\n//                         </td>\r\n//                       </tr>\r\n//                       <tr className=\"border-b hover:bg-gray-50\">\r\n//                         <td className=\"px-3 py-2 font-medium\">\r\n//                           Domestic Income\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.auto.domestic.plan.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center font-semibold\">\r\n//                           {module.deepDiveData.ftm.auto.domestic.actual.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.gear.domestic.plan.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center font-semibold\">\r\n//                           {module.deepDiveData.ftm.gear.domestic.actual.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.gbdc.domestic.plan.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center font-semibold\">\r\n//                           {module.deepDiveData.ftm.gbdc.domestic.actual.toFixed(\r\n//                             2\r\n//                           )}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50\">\r\n//                           {(\r\n//                             module.deepDiveData.ftm.auto.domestic.plan +\r\n//                             module.deepDiveData.ftm.gear.domestic.plan +\r\n//                             module.deepDiveData.ftm.gbdc.domestic.plan\r\n//                           ).toFixed(2)}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold\">\r\n//                           {(\r\n//                             module.deepDiveData.ftm.auto.domestic.actual +\r\n//                             module.deepDiveData.ftm.gear.domestic.actual +\r\n//                             module.deepDiveData.ftm.gbdc.domestic.actual\r\n//                           ).toFixed(2)}\r\n//                         </td>\r\n//                       </tr>\r\n//                       <tr className=\"bg-green-50 font-bold\">\r\n//                         <td className=\"px-3 py-2\">Total</td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.auto.plan.toFixed(2)}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.auto.actual.toFixed(2)}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.gear.plan.toFixed(2)}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.gear.actual.toFixed(2)}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.gbdc.plan.toFixed(2)}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">\r\n//                           {module.deepDiveData.ftm.gbdc.actual.toFixed(2)}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center bg-green-100\">\r\n//                           {module.deepDiveData.ftm.total.plan.toFixed(2)}\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center bg-green-100\">\r\n//                           {module.deepDiveData.ftm.total.actual.toFixed(2)}\r\n//                         </td>\r\n//                       </tr>\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           );\r\n\r\n//         case \"customers\":\r\n//           return (\r\n//             <div className=\"space-y-4\">\r\n//               <div className=\"bg-white rounded-lg p-3 border border-gray-200\">\r\n//                 <div className=\"text-sm text-gray-600\">\r\n//                   Filter for monthly, YTD comparison | Filter for Domestic,\r\n//                   exports & Auto, Gear, and GBDC\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-pink-600 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Sales by Customer (Rs. Mio.)\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\">Customer name</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Bud Oct 25</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Act Oct 25</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Delta</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Bud YTD Oct</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Act Oct 25</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Delta</th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.customers.map((cust, idx) => (\r\n//                         <tr key={idx} className=\"border-b hover:bg-gray-50\">\r\n//                           <td className=\"px-3 py-2 font-medium\">{cust.name}</td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {cust.budOct}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center font-semibold\">\r\n//                             {cust.actOct}\r\n//                           </td>\r\n//                           <td\r\n//                             className={`px-3 py-2 text-center font-semibold ${\r\n//                               cust.delta >= 0\r\n//                                 ? \"text-green-600\"\r\n//                                 : \"text-red-600\"\r\n//                             }`}\r\n//                           >\r\n//                             {cust.delta}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {cust.budYTD}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center font-semibold\">\r\n//                             {cust.actYTD}\r\n//                           </td>\r\n//                           <td\r\n//                             className={`px-3 py-2 text-center font-semibold ${\r\n//                               cust.deltaYTD >= 0\r\n//                                 ? \"text-green-600\"\r\n//                                 : \"text-red-600\"\r\n//                             }`}\r\n//                           >\r\n//                             {cust.deltaYTD}\r\n//                           </td>\r\n//                         </tr>\r\n//                       ))}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           );\r\n\r\n//         case \"fx\":\r\n//           return (\r\n//             <div className=\"space-y-4\">\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-teal-600 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Spot Rate Rs 90 / USD\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\"></th>\r\n//                         <th className=\"px-3 py-2 text-center\">Oct-25</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Nov-25</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Dec-25</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Jan-26</th>\r\n//                         <th className=\"px-3 py-2 text-center bg-blue-50\">\r\n//                           2025-26\r\n//                         </th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.usdForward.map((row, idx) => {\r\n//                         if (idx < 4) {\r\n//                           return (\r\n//                             <tr key={idx} className=\"border-b hover:bg-gray-50\">\r\n//                               <td className=\"px-3 py-2 font-medium\">\r\n//                                 {idx === 0\r\n//                                   ? \"Forward contract Mio. USD\"\r\n//                                   : idx === 1\r\n//                                   ? \"Forward contract Rate\"\r\n//                                   : \"Forward contract loss\"}\r\n//                               </td>\r\n//                               <td className=\"px-3 py-2 text-center\">\r\n//                                 {row.contract !== undefined\r\n//                                   ? row.contract.toFixed(2)\r\n//                                   : row.rate !== undefined\r\n//                                   ? row.rate.toFixed(2)\r\n//                                   : row.loss.toFixed(2)}\r\n//                               </td>\r\n//                               <td className=\"px-3 py-2 text-center\">\r\n//                                 {module.deepDiveData.usdForward[idx + 4]\r\n//                                   ?.contract !== undefined\r\n//                                   ? module.deepDiveData.usdForward[\r\n//                                       idx + 4\r\n//                                     ].contract.toFixed(2)\r\n//                                   : \"\"}\r\n//                               </td>\r\n//                               <td className=\"px-3 py-2 text-center\"></td>\r\n//                               <td className=\"px-3 py-2 text-center\"></td>\r\n//                               <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold\"></td>\r\n//                             </tr>\r\n//                           );\r\n//                         }\r\n//                         return null;\r\n//                       })}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-teal-700 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Spot Rate Rs 105 / Euro\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\"></th>\r\n//                         <th className=\"px-3 py-2 text-center\">Oct-25</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Nov-25</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Dec-25</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Jan-26</th>\r\n//                         <th className=\"px-3 py-2 text-center bg-blue-50\">\r\n//                           2025-26\r\n//                         </th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       <tr className=\"border-b\">\r\n//                         <td className=\"px-3 py-2 font-medium\">\r\n//                           Forward contract Mio. Euro\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">5.00</td>\r\n//                         <td className=\"px-3 py-2 text-center\">5.00</td>\r\n//                         <td className=\"px-3 py-2 text-center\">6.00</td>\r\n//                         <td className=\"px-3 py-2 text-center\">6.00</td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold\">\r\n//                           36.00\r\n//                         </td>\r\n//                       </tr>\r\n//                       <tr className=\"border-b\">\r\n//                         <td className=\"px-3 py-2 font-medium\">\r\n//                           Forward contract Rate\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">104.00</td>\r\n//                         <td className=\"px-3 py-2 text-center\">105.00</td>\r\n//                         <td className=\"px-3 py-2 text-center\">105.10</td>\r\n//                         <td className=\"px-3 py-2 text-center\">105.20</td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50\"></td>\r\n//                       </tr>\r\n//                       <tr className=\"border-b\">\r\n//                         <td className=\"px-3 py-2 font-medium\">\r\n//                           Forward contract loss\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center text-red-600\">\r\n//                           -5.00\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">-</td>\r\n//                         <td className=\"px-3 py-2 text-center\">0.60</td>\r\n//                         <td className=\"px-3 py-2 text-center\">1.20</td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold\">\r\n//                           1.70\r\n//                         </td>\r\n//                       </tr>\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           );\r\n\r\n//         case \"gst\":\r\n//           return (\r\n//             <div className=\"space-y-4\">\r\n//               <div className=\"bg-white rounded-lg p-3 border border-gray-200\">\r\n//                 <div className=\"text-sm text-gray-600\">\r\n//                   Filter for month / Year, different GST and company\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-yellow-600 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   FTM Oct 25\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\"></th>\r\n//                         <th className=\"px-3 py-2 text-center\">CGST</th>\r\n//                         <th className=\"px-3 py-2 text-center\">SGST</th>\r\n//                         <th className=\"px-3 py-2 text-center\">IGST</th>\r\n//                         <th className=\"px-3 py-2 text-center bg-blue-50 font-bold\">\r\n//                           Total\r\n//                         </th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.gstBalance.map((row, idx) => {\r\n//                         if (idx < 4) {\r\n//                           const labels = [\r\n//                             \"Opening balance\",\r\n//                             \"ITC\",\r\n//                             \"GST Liability\",\r\n//                             \"RCM GST\",\r\n//                           ];\r\n//                           const values =\r\n//                             idx === 0\r\n//                               ? [\r\n//                                   row.opening,\r\n//                                   module.deepDiveData.gstBalance[1].opening,\r\n//                                   module.deepDiveData.gstBalance[2].opening,\r\n//                                   module.deepDiveData.gstBalance[3].opening,\r\n//                                 ]\r\n//                               : idx === 1\r\n//                               ? [\r\n//                                   row.itc,\r\n//                                   module.deepDiveData.gstBalance[1].itc,\r\n//                                   module.deepDiveData.gstBalance[2].itc,\r\n//                                   module.deepDiveData.gstBalance[3].itc,\r\n//                                 ]\r\n//                               : idx === 2\r\n//                               ? [\r\n//                                   row.liability,\r\n//                                   module.deepDiveData.gstBalance[1].liability,\r\n//                                   module.deepDiveData.gstBalance[2].liability,\r\n//                                   module.deepDiveData.gstBalance[3].liability,\r\n//                                 ]\r\n//                               : [\r\n//                                   row.rcm,\r\n//                                   module.deepDiveData.gstBalance[1].rcm,\r\n//                                   module.deepDiveData.gstBalance[2].rcm,\r\n//                                   module.deepDiveData.gstBalance[3].rcm,\r\n//                                 ];\r\n//                           return null;\r\n//                         }\r\n//                         return null;\r\n//                       })}\r\n//                       <tr className=\"border-b\">\r\n//                         <td className=\"px-3 py-2 font-medium\">\r\n//                           Opening balance\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">40.00</td>\r\n//                         <td className=\"px-3 py-2 text-center\">50.00</td>\r\n//                         <td className=\"px-3 py-2 text-center\">60.00</td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold\">\r\n//                           150.00\r\n//                         </td>\r\n//                       </tr>\r\n//                       <tr className=\"border-b\">\r\n//                         <td className=\"px-3 py-2 font-medium\">ITC</td>\r\n//                         <td className=\"px-3 py-2 text-center text-green-600\">\r\n//                           25.00\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center text-green-600\">\r\n//                           25.00\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center text-green-600\">\r\n//                           200.00\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold text-green-600\">\r\n//                           250.00\r\n//                         </td>\r\n//                       </tr>\r\n//                       <tr className=\"border-b\">\r\n//                         <td className=\"px-3 py-2 font-medium\">GST Liability</td>\r\n//                         <td className=\"px-3 py-2 text-center text-red-600\">\r\n//                           -70.00\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center text-red-600\">\r\n//                           -70.00\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center text-red-600\">\r\n//                           -240.00\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold text-red-600\">\r\n//                           -380.00\r\n//                         </td>\r\n//                       </tr>\r\n//                       <tr className=\"border-b\">\r\n//                         <td className=\"px-3 py-2 font-medium\">RCM GST</td>\r\n//                         <td className=\"px-3 py-2 text-center text-red-600\">\r\n//                           -5.00\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center text-red-600\">\r\n//                           -5.00\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center text-red-600\">\r\n//                           -20.00\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold text-red-600\">\r\n//                           -30.00\r\n//                         </td>\r\n//                       </tr>\r\n//                       <tr className=\"bg-green-50 font-bold\">\r\n//                         <td className=\"px-3 py-2\">Net Balance</td>\r\n//                         <td className=\"px-3 py-2 text-center text-red-600\">\r\n//                           -10.00\r\n//                         </td>\r\n//                         <td className=\"px-3 py-2 text-center\">-</td>\r\n//                         <td className=\"px-3 py-2 text-center\">-</td>\r\n//                         <td className=\"px-3 py-2 text-center bg-green-100 text-red-600\">\r\n//                           -10.00\r\n//                         </td>\r\n//                       </tr>\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           );\r\n\r\n//         case \"refunds\":\r\n//           return (\r\n//             <div className=\"space-y-4\">\r\n//               <div className=\"bg-white rounded-lg p-3 border border-gray-200\">\r\n//                 <div className=\"text-sm text-gray-600\">\r\n//                   Filter for year / All\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-indigo-600 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Refunds Rs. Mio.\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\">Year / Month</th>\r\n//                         <th className=\"px-3 py-2 text-center\" colSpan=\"2\">\r\n//                           IGST\r\n//                         </th>\r\n//                         <th className=\"px-3 py-2 text-center\" colSpan=\"2\">\r\n//                           DBK\r\n//                         </th>\r\n//                         <th className=\"px-3 py-2 text-center\" colSpan=\"2\">\r\n//                           RODTEP\r\n//                         </th>\r\n//                       </tr>\r\n//                       <tr className=\"bg-gray-50\">\r\n//                         <th className=\"px-3 py-1.5 text-left\"></th>\r\n//                         <th className=\"px-3 py-1.5 text-center text-gray-600\">\r\n//                           Total refund\r\n//                         </th>\r\n//                         <th className=\"px-3 py-1.5 text-center text-gray-600\">\r\n//                           Receivable\r\n//                         </th>\r\n//                         <th className=\"px-3 py-1.5 text-center text-gray-600\">\r\n//                           Total refund\r\n//                         </th>\r\n//                         <th className=\"px-3 py-1.5 text-center text-gray-600\">\r\n//                           Receivable\r\n//                         </th>\r\n//                         <th className=\"px-3 py-1.5 text-center text-gray-600\">\r\n//                           Total refund\r\n//                         </th>\r\n//                         <th className=\"px-3 py-1.5 text-center text-gray-600\">\r\n//                           Receivable\r\n//                         </th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.refunds.map((row, idx) => (\r\n//                         <tr\r\n//                           key={idx}\r\n//                           className={`border-b ${\r\n//                             row.year === \"Total\"\r\n//                               ? \"bg-green-50 font-bold\"\r\n//                               : \"hover:bg-gray-50\"\r\n//                           }`}\r\n//                         >\r\n//                           <td className=\"px-3 py-2 font-medium\">{row.year}</td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.igstTotal.toFixed(2)}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center text-orange-600 font-semibold\">\r\n//                             {row.igstRecv.toFixed(2)}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.dbkTotal.toFixed(2)}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center text-orange-600 font-semibold\">\r\n//                             {row.dbkRecv.toFixed(2)}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.rodtepTotal.toFixed(2)}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center text-orange-600 font-semibold\">\r\n//                             {row.rodtepRecv.toFixed(2)}\r\n//                           </td>\r\n//                         </tr>\r\n//                       ))}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           );\r\n\r\n//         case \"material\":\r\n//           return (\r\n//             <div className=\"space-y-4\">\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-cyan-600 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Pending GRN / Plant\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\"></th>\r\n//                         <th className=\"px-3 py-2 text-center\">Mundhwa</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Ranjangaon</th>\r\n//                         <th className=\"px-3 py-2 text-center bg-blue-50 font-bold\">\r\n//                           Total\r\n//                         </th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.pendingGRN.map((row, idx) => (\r\n//                         <tr\r\n//                           key={idx}\r\n//                           className={`border-b ${\r\n//                             row.days === \"Total\"\r\n//                               ? \"bg-green-50 font-bold\"\r\n//                               : row.days === \"More than 7 days\"\r\n//                               ? \"bg-red-50\"\r\n//                               : \"hover:bg-gray-50\"\r\n//                           }`}\r\n//                         >\r\n//                           <td className=\"px-3 py-2 font-medium\">{row.days}</td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.mundhwa}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.ranjangaon}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold\">\r\n//                             {row.total}\r\n//                           </td>\r\n//                         </tr>\r\n//                       ))}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-cyan-700 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   101 and 561 recon\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <tbody>\r\n//                       {module.deepDiveData.mismatch.map((row, idx) => (\r\n//                         <tr key={idx} className=\"border-b hover:bg-gray-50\">\r\n//                           <td className=\"px-3 py-2 font-medium\">{row.type}</td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.mundhwa}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.ranjangaon}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold\">\r\n//                             {row.total}\r\n//                           </td>\r\n//                         </tr>\r\n//                       ))}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-cyan-800 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Part movement\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\">Period</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Parts Count</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Value</th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.partMovement.map((row, idx) => (\r\n//                         <tr key={idx} className=\"border-b hover:bg-gray-50\">\r\n//                           <td className=\"px-3 py-2\">\r\n//                             No movement of parts in {row.period}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">{row.count}</td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row.value)}\r\n//                           </td>\r\n//                         </tr>\r\n//                       ))}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           );\r\n\r\n//         case \"plant\":\r\n//           return (\r\n//             <div className=\"space-y-4\">\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-rose-600 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Utilization of machines\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\">Machine</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Mundhwa</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Ranjangaon</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Khed</th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.utilization.map((row, idx) => (\r\n//                         <tr key={idx} className=\"border-b hover:bg-gray-50\">\r\n//                           <td className=\"px-3 py-2 font-medium\">\r\n//                             {row.machine}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.mundhwa !== null ? (\r\n//                               <span\r\n//                                 className={`font-semibold ${\r\n//                                   row.mundhwa < 30\r\n//                                     ? \"text-red-600\"\r\n//                                     : row.mundhwa < 60\r\n//                                     ? \"text-yellow-600\"\r\n//                                     : \"text-green-600\"\r\n//                                 }`}\r\n//                               >\r\n//                                 {row.mundhwa}%\r\n//                               </span>\r\n//                             ) : (\r\n//                               \"-\"\r\n//                             )}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.ranjangaon !== null ? (\r\n//                               <span\r\n//                                 className={`font-semibold ${\r\n//                                   row.ranjangaon < 30\r\n//                                     ? \"text-red-600\"\r\n//                                     : row.ranjangaon < 60\r\n//                                     ? \"text-yellow-600\"\r\n//                                     : \"text-green-600\"\r\n//                                 }`}\r\n//                               >\r\n//                                 {row.ranjangaon}%\r\n//                               </span>\r\n//                             ) : (\r\n//                               \"-\"\r\n//                             )}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.khed !== null ? (\r\n//                               <span\r\n//                                 className={`font-semibold ${\r\n//                                   row.khed < 30\r\n//                                     ? \"text-red-600\"\r\n//                                     : row.khed < 60\r\n//                                     ? \"text-yellow-600\"\r\n//                                     : \"text-green-600\"\r\n//                                 }`}\r\n//                               >\r\n//                                 {row.khed}%\r\n//                               </span>\r\n//                             ) : (\r\n//                               \"-\"\r\n//                             )}\r\n//                           </td>\r\n//                         </tr>\r\n//                       ))}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-rose-700 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Rejection\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\">Month</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Mundhwa</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Ranjangaon</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Khed</th>\r\n//                         <th className=\"px-3 py-2 text-center bg-blue-50 font-bold\">\r\n//                           Total\r\n//                         </th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.rejection.map((row, idx) => (\r\n//                         <tr key={idx} className=\"border-b hover:bg-gray-50\">\r\n//                           <td className=\"px-3 py-2 font-medium\">{row.month}</td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row.mundhwa)}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row.ranjangaon)}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {formatCurrency(row.khed)}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center bg-blue-50 font-semibold\">\r\n//                             {formatCurrency(row.total)}\r\n//                           </td>\r\n//                         </tr>\r\n//                       ))}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           );\r\n\r\n//         case \"consumption\":\r\n//           return (\r\n//             <div className=\"space-y-4\">\r\n//               <div className=\"bg-white rounded-lg p-3 border border-gray-200\">\r\n//                 <div className=\"text-sm text-gray-600\">\r\n//                   Filter for two random month comparison\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-violet-600 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Material % change by more than 2% than previous month / Die\r\n//                   number\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\">Die Number</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Mundhwa</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Ranjangaon</th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.materialChange.map((row, idx) => (\r\n//                         <tr key={idx} className=\"border-b hover:bg-gray-50\">\r\n//                           <td className=\"px-3 py-2 font-medium\">\r\n//                             {row.dieNumber}\r\n//                           </td>\r\n//                           <td\r\n//                             className={`px-3 py-2 text-center font-semibold ${\r\n//                               row.mundhwa < 0\r\n//                                 ? \"text-red-600\"\r\n//                                 : row.mundhwa > 0\r\n//                                 ? \"text-green-600\"\r\n//                                 : \"\"\r\n//                             }`}\r\n//                           >\r\n//                             {row.mundhwa !== 0\r\n//                               ? `${row.mundhwa.toFixed(2)}%`\r\n//                               : \"\"}\r\n//                           </td>\r\n//                           <td\r\n//                             className={`px-3 py-2 text-center font-semibold ${\r\n//                               row.ranjangaon < 0\r\n//                                 ? \"text-red-600\"\r\n//                                 : row.ranjangaon > 0\r\n//                                 ? \"text-green-600\"\r\n//                                 : \"\"\r\n//                             }`}\r\n//                           >\r\n//                             {row.ranjangaon !== 0\r\n//                               ? `${row.ranjangaon.toFixed(2)}%`\r\n//                               : \"\"}\r\n//                           </td>\r\n//                         </tr>\r\n//                       ))}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           );\r\n\r\n//         case \"dispatch\":\r\n//           return (\r\n//             <div className=\"space-y-4\">\r\n//               <div className=\"bg-white rounded-lg border border-gray-200 overflow-hidden\">\r\n//                 <div className=\"bg-emerald-600 text-white px-4 py-2 font-semibold text-sm\">\r\n//                   Dispatch discipline\r\n//                 </div>\r\n//                 <div className=\"overflow-x-auto\">\r\n//                   <table className=\"w-full text-xs\">\r\n//                     <thead className=\"bg-gray-100\">\r\n//                       <tr>\r\n//                         <th className=\"px-3 py-2 text-left\">Metric</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Mundhwa</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Ranjangaon</th>\r\n//                         <th className=\"px-3 py-2 text-center\">Khed</th>\r\n//                       </tr>\r\n//                     </thead>\r\n//                     <tbody>\r\n//                       {module.deepDiveData.dispatch.map((row, idx) => (\r\n//                         <tr key={idx} className=\"border-b hover:bg-gray-50\">\r\n//                           <td className=\"px-3 py-2 font-medium text-xs\">\r\n//                             {row.metric}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.metric === \"Cancellation of invoice\"\r\n//                               ? row.mundhwa\r\n//                               : `${row.mundhwa}%`}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.metric === \"Cancellation of invoice\"\r\n//                               ? row.ranjangaon\r\n//                               : `${row.ranjangaon}%`}\r\n//                           </td>\r\n//                           <td className=\"px-3 py-2 text-center\">\r\n//                             {row.metric === \"Cancellation of invoice\"\r\n//                               ? row.khed\r\n//                               : `${row.khed}%`}\r\n//                           </td>\r\n//                         </tr>\r\n//                       ))}\r\n//                     </tbody>\r\n//                   </table>\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           );\r\n\r\n//         default:\r\n//           return (\r\n//             <div className=\"text-center text-gray-600 py-8\">\r\n//               Deep dive content for {module.title}\r\n//             </div>\r\n//           );\r\n//       }\r\n//     };\r\n\r\n//     return (\r\n//       <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 overflow-y-auto\">\r\n//         <div className=\"bg-white rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto shadow-2xl\">\r\n//           <div\r\n//             className={`bg-gradient-to-r ${module.color} text-white px-6 py-4 rounded-t-xl flex justify-between items-center sticky top-0 z-10`}\r\n//           >\r\n//             <div className=\"flex items-center\">\r\n//               {React.createElement(module.icon, {\r\n//                 size: 28,\r\n//                 className: \"mr-3\",\r\n//               })}\r\n//               <div>\r\n//                 <h3 className=\"text-2xl font-bold\">{module.title}</h3>\r\n//                 <p className=\"text-sm opacity-90\">{module.subtitle}</p>\r\n//               </div>\r\n//             </div>\r\n//             <button\r\n//               onClick={onClose}\r\n//               className=\"hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition\"\r\n//             >\r\n//               <X size={24} />\r\n//             </button>\r\n//           </div>\r\n//           <div className=\"p-6\">{renderDeepDive()}</div>\r\n//         </div>\r\n//       </div>\r\n//     );\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\">\r\n//       <header className=\"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white shadow-xl\">\r\n//         <div className=\"max-w-[1920px] mx-auto px-6 py-3\">\r\n//           <div className=\"flex items-center justify-between\">\r\n//             <div>\r\n//               <h1 className=\"text-2xl font-bold flex items-center\">\r\n//                 <IndianRupee className=\"mr-2\" size={28} />\r\n//                 Ultimate Finance Dashboard\r\n//               </h1>\r\n//               <p className=\"text-xs text-blue-100\">\r\n//                 11 Modules  All Excel Data  Single Screen  Interactive Deep\r\n//                 Dive\r\n//               </p>\r\n//             </div>\r\n//             <div className=\"flex items-center gap-2\">\r\n//               <div className=\"flex items-center bg-white bg-opacity-20 px-2 py-1 rounded text-xs\">\r\n//                 <div className=\"w-1.5 h-1.5 bg-green-400 rounded-full mr-1 animate-pulse\"></div>\r\n//                 Live\r\n//               </div>\r\n//               <button className=\"bg-white bg-opacity-20 hover:bg-opacity-30 px-2 py-1 rounded text-xs flex items-center gap-1\">\r\n//                 <RefreshCw size={14} />\r\n//                 Refresh\r\n//               </button>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       </header>\r\n\r\n//       <div className=\"max-w-[1920px] mx-auto px-4 py-3\">\r\n//         <div className=\"grid grid-cols-12 gap-3\">\r\n//           {/* Main Content - 11 Module Cards (9 columns) */}\r\n//           <div className=\"col-span-9\">\r\n//             <div className=\"grid grid-cols-4 gap-3\">\r\n//               {modules.map((module) => {\r\n//                 const Icon = module.icon;\r\n//                 return (\r\n//                   <div\r\n//                     key={module.id}\r\n//                     onClick={() => setSelectedModule(module)}\r\n//                     className={`bg-gradient-to-br ${module.bgGradient} rounded-xl p-3 cursor-pointer transform hover:scale-105 transition-all duration-300 shadow-md hover:shadow-xl border-2 border-white`}\r\n//                   >\r\n//                     <div className=\"flex items-start justify-between mb-2\">\r\n//                       <div\r\n//                         className={`bg-gradient-to-br ${module.color} p-2 rounded-lg shadow-md`}\r\n//                       >\r\n//                         <Icon className=\"text-white\" size={20} />\r\n//                       </div>\r\n//                       <ChevronRight size={16} className=\"text-gray-400\" />\r\n//                     </div>\r\n//                     <h3 className=\"font-bold text-sm text-gray-800 mb-1\">\r\n//                       {module.title}\r\n//                     </h3>\r\n//                     <p className=\"text-xs text-gray-600 mb-2\">\r\n//                       {module.subtitle}\r\n//                     </p>\r\n//                     <div className=\"space-y-1\">\r\n//                       <div className=\"flex justify-between text-xs\">\r\n//                         <span className=\"text-gray-600\">\r\n//                           {module.summary.metric1}:\r\n//                         </span>\r\n//                         <span className=\"font-semibold text-gray-800\">\r\n//                           {module.summary.value1}\r\n//                         </span>\r\n//                       </div>\r\n//                       <div className=\"flex justify-between text-xs\">\r\n//                         <span className=\"text-gray-600\">\r\n//                           {module.summary.metric2}:\r\n//                         </span>\r\n//                         <span className=\"font-semibold text-gray-800\">\r\n//                           {module.summary.value2}\r\n//                         </span>\r\n//                       </div>\r\n//                       <div className=\"flex justify-between text-xs\">\r\n//                         <span className=\"text-gray-600\">\r\n//                           {module.summary.metric3}:\r\n//                         </span>\r\n//                         <span className=\"font-semibold text-gray-800\">\r\n//                           {module.summary.value3}\r\n//                         </span>\r\n//                       </div>\r\n//                     </div>\r\n//                   </div>\r\n//                 );\r\n//               })}\r\n//             </div>\r\n//           </div>\r\n\r\n//           {/* Right Sidebar - AI Chatbot (3 columns) */}\r\n//           <div className=\"col-span-3\">\r\n//             <div className=\"bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-xl shadow-xl h-full flex flex-col\">\r\n//               <div className=\"p-3 border-b border-white border-opacity-20\">\r\n//                 <div className=\"flex items-center\">\r\n//                   <MessageSquare className=\"text-white mr-2\" size={20} />\r\n//                   <h3 className=\"text-white font-bold text-sm\">AI Assistant</h3>\r\n//                 </div>\r\n//                 <p className=\"text-xs text-white text-opacity-80 mt-1\">\r\n//                   Ask about any module!\r\n//                 </p>\r\n//               </div>\r\n\r\n//               <div\r\n//                 className=\"flex-1 overflow-y-auto p-3 space-y-2\"\r\n//                 style={{ maxHeight: \"calc(100vh - 300px)\" }}\r\n//               >\r\n//                 {chatMessages.map((msg, idx) => (\r\n//                   <div\r\n//                     key={idx}\r\n//                     className={`flex ${\r\n//                       msg.type === \"user\" ? \"justify-end\" : \"justify-start\"\r\n//                     }`}\r\n//                   >\r\n//                     <div\r\n//                       className={`max-w-[85%] px-3 py-2 rounded-lg text-xs ${\r\n//                         msg.type === \"user\"\r\n//                           ? \"bg-white text-gray-800\"\r\n//                           : \"bg-white bg-opacity-20 text-white\"\r\n//                       }`}\r\n//                     >\r\n//                       {msg.text}\r\n//                     </div>\r\n//                   </div>\r\n//                 ))}\r\n//               </div>\r\n\r\n//               <div className=\"p-3 border-t border-white border-opacity-20\">\r\n//                 <div className=\"flex items-center gap-2\">\r\n//                   <input\r\n//                     type=\"text\"\r\n//                     value={chatInput}\r\n//                     onChange={(e) => setChatInput(e.target.value)}\r\n//                     onKeyPress={(e) => e.key === \"Enter\" && handleSendMessage()}\r\n//                     placeholder=\"Ask about MIS, Sales, FI, GST...\"\r\n//                     className=\"flex-1 px-3 py-2 border border-white border-opacity-30 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-white bg-white bg-opacity-20 text-white placeholder-white placeholder-opacity-60\"\r\n//                   />\r\n//                   <button\r\n//                     onClick={handleSendMessage}\r\n//                     className=\"bg-white bg-opacity-30 hover:bg-opacity-40 text-white p-2 rounded-lg transition\"\r\n//                   >\r\n//                     <Send size={16} />\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {selectedModule && (\r\n//         <DeepDiveModal\r\n//           module={selectedModule}\r\n//           onClose={() => setSelectedModule(null)}\r\n//         />\r\n//       )}\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default CostScreener;\r\n\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport MachinePowerForm from \"./MachinePowerForm\";\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  ComposedChart,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  ReferenceLine,\r\n  Area,\r\n  ReferenceArea,\r\n} from \"recharts\";\r\n// Apne CostScreener.jsx mein simply import karein\r\nimport ActionInsightsModal from \"./ActionInsightsModal\";\r\n\r\nimport {\r\n  Zap,\r\n  Palette,\r\n  Check,\r\n  TrendingUp,\r\n  Factory,\r\n  Package,\r\n  Users,\r\n  Fuel,\r\n  Handshake,\r\n  Wrench,\r\n  Settings,\r\n  Building,\r\n  Box,\r\n  Truck,\r\n  ArrowUp,\r\n  ArrowDown,\r\n  AlertTriangle,\r\n  AlertCircle,\r\n  X,\r\n  ChevronDown,\r\n  CheckCircle,\r\n  Calendar,\r\n  Upload,\r\n} from \"lucide-react\";\r\nimport MonthRangeSlider from \"./MonthRangeSlider\";\r\n\r\n// Import Zustand Store\r\nimport { useCostStore } from \"../store/costStore\";\r\n\r\n// Themes Configuration\r\nconst themes = {\r\n  ocean: {\r\n    name: \"Ocean Breeze\",\r\n    mainBg: \"bg-gradient-to-br from-blue-50 via-cyan-50 to-teal-100\",\r\n    cardBg: \"bg-white/90 backdrop-blur-xl\",\r\n    modalBg: \"bg-white/95 backdrop-blur-xl\",\r\n    primaryText: \"text-slate-800\",\r\n    secondaryText: \"text-slate-600\",\r\n    mutedText: \"text-slate-500\",\r\n    border: \"border-cyan-200/60\",\r\n    shadow: \"shadow-xl shadow-cyan-400/20\",\r\n    chartBg: \"bg-gradient-to-br from-white via-cyan-50/50 to-blue-50/40\",\r\n    gridColor: \"#e0f2fe\",\r\n    buttonBg: \"bg-gradient-to-r from-cyan-100 to-blue-100\",\r\n    buttonHover: \"hover:from-cyan-200 hover:to-blue-200\",\r\n    cardGradient: \"from-cyan-50 via-blue-50 to-teal-100\",\r\n    dotPattern: \"from-cyan-500/5 via-blue-500/10 to-teal-500/5\",\r\n    accentGradient: \"from-cyan-500 via-blue-500 to-teal-600\",\r\n    glowEffect: \"shadow-2xl shadow-cyan-400/30\",\r\n    hoverGlow: \"hover:shadow-2xl hover:shadow-blue-500/40\",\r\n    chartColors: {\r\n      actualLine: \"#06b6d4\",\r\n      predictedLine: \"#3b82f6\",\r\n      targetLine: \"#fbbf24\",\r\n      actualFill: \"rgba(6, 182, 212, 0.3)\",\r\n      predictedFill: \"rgba(59, 130, 246, 0.2)\",\r\n      goodColor: \"#10b981\",\r\n      badColor: \"#ef4444\",\r\n      ebitdaActual: \"#059669\",\r\n      ebitdaBudget: \"#fbbf24\",\r\n      percentActual: \"#0891b2\",\r\n      percentPredicted: \"#7c3aed\",\r\n      highlightColor: \"#ef4444\",\r\n    },\r\n  },\r\n  sunset: {\r\n    name: \"Sunset Glow\",\r\n    mainBg: \"bg-gradient-to-br from-orange-50 via-pink-50 to-red-100\",\r\n    cardBg: \"bg-white/90 backdrop-blur-xl\",\r\n    modalBg: \"bg-white/95 backdrop-blur-xl\",\r\n    primaryText: \"text-gray-800\",\r\n    secondaryText: \"text-gray-600\",\r\n    mutedText: \"text-gray-500\",\r\n    border: \"border-orange-200/60\",\r\n    shadow: \"shadow-xl shadow-orange-400/20\",\r\n    chartBg: \"bg-gradient-to-br from-white via-orange-50/50 to-pink-50/40\",\r\n    gridColor: \"#fed7aa\",\r\n    buttonBg: \"bg-gradient-to-r from-orange-100 to-pink-100\",\r\n    buttonHover: \"hover:from-orange-200 hover:to-pink-200\",\r\n    cardGradient: \"from-orange-50 via-pink-50 to-red-100\",\r\n    dotPattern: \"from-orange-500/5 via-pink-500/10 to-red-500/5\",\r\n    accentGradient: \"from-orange-500 via-pink-500 to-red-600\",\r\n    glowEffect: \"shadow-2xl shadow-orange-400/30\",\r\n    hoverGlow: \"hover:shadow-2xl hover:shadow-pink-500/40\",\r\n    chartColors: {\r\n      actualLine: \"#f97316\",\r\n      predictedLine: \"#ec4899\",\r\n      targetLine: \"#fbbf24\",\r\n      actualFill: \"rgba(249, 115, 22, 0.3)\",\r\n      predictedFill: \"rgba(236, 72, 153, 0.2)\",\r\n      goodColor: \"#10b981\",\r\n      badColor: \"#dc2626\",\r\n      ebitdaActual: \"#ea580c\",\r\n      ebitdaBudget: \"#f59e0b\",\r\n      percentActual: \"#f97316\",\r\n      percentPredicted: \"#db2777\",\r\n      highlightColor: \"#6366f1\",\r\n    },\r\n  },\r\n\r\n  forest: {\r\n    name: \"Forest Depths\",\r\n    mainBg: \"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-100\",\r\n    cardBg: \"bg-white/90 backdrop-blur-xl\",\r\n    modalBg: \"bg-white/95 backdrop-blur-xl\",\r\n    primaryText: \"text-green-900\",\r\n    secondaryText: \"text-green-700\",\r\n    mutedText: \"text-green-600\",\r\n    border: \"border-emerald-200/60\",\r\n    shadow: \"shadow-xl shadow-emerald-400/20\",\r\n    chartBg: \"bg-gradient-to-br from-white via-emerald-50/50 to-green-50/40\",\r\n    gridColor: \"#d1fae5\",\r\n    buttonBg: \"bg-gradient-to-r from-emerald-100 to-green-100\",\r\n    buttonHover: \"hover:from-emerald-200 hover:to-green-200\",\r\n    cardGradient: \"from-emerald-50 via-green-50 to-teal-100\",\r\n    dotPattern: \"from-emerald-500/5 via-green-500/10 to-teal-500/5\",\r\n    accentGradient: \"from-emerald-500 via-green-500 to-teal-600\",\r\n    glowEffect: \"shadow-2xl shadow-emerald-400/30\",\r\n    hoverGlow: \"hover:shadow-2xl hover:shadow-green-500/40\",\r\n    chartColors: {\r\n      actualLine: \"#10b981\",\r\n      predictedLine: \"#059669\",\r\n      targetLine: \"#84cc16\",\r\n      actualFill: \"rgba(16, 185, 129, 0.3)\",\r\n      predictedFill: \"rgba(5, 150, 105, 0.2)\",\r\n      goodColor: \"#059669\",\r\n      badColor: \"#ef4444\",\r\n      ebitdaActual: \"#047857\",\r\n      ebitdaBudget: \"#65a30d\",\r\n      percentActual: \"#10b981\",\r\n      percentPredicted: \"#14b8a6\",\r\n      highlightColor: \"#6366f1\",\r\n    },\r\n  },\r\n\r\n  lavender: {\r\n    name: \"Lavender Dreams\",\r\n    mainBg: \"bg-gradient-to-br from-purple-50 via-indigo-50 to-pink-100\",\r\n    cardBg: \"bg-white/90 backdrop-blur-xl\",\r\n    modalBg: \"bg-white/95 backdrop-blur-xl\",\r\n    primaryText: \"text-purple-900\",\r\n    secondaryText: \"text-purple-700\",\r\n    mutedText: \"text-purple-600\",\r\n    border: \"border-purple-200/60\",\r\n    shadow: \"shadow-xl shadow-purple-400/20\",\r\n    chartBg: \"bg-gradient-to-br from-white via-purple-50/50 to-indigo-50/40\",\r\n    gridColor: \"#e9d5ff\",\r\n    buttonBg: \"bg-gradient-to-r from-purple-100 to-indigo-100\",\r\n    buttonHover: \"hover:from-purple-200 hover:to-indigo-200\",\r\n    cardGradient: \"from-purple-50 via-indigo-50 to-pink-100\",\r\n    dotPattern: \"from-purple-500/5 via-indigo-500/10 to-pink-500/5\",\r\n    accentGradient: \"from-purple-500 via-indigo-500 to-pink-600\",\r\n    glowEffect: \"shadow-2xl shadow-purple-400/30\",\r\n    hoverGlow: \"hover:shadow-2xl hover:shadow-indigo-500/40\",\r\n    chartColors: {\r\n      actualLine: \"#9333ea\",\r\n      predictedLine: \"#6366f1\",\r\n      targetLine: \"#ec4899\",\r\n      actualFill: \"rgba(147, 51, 234, 0.3)\",\r\n      predictedFill: \"rgba(99, 102, 241, 0.2)\",\r\n      goodColor: \"#10b981\",\r\n      badColor: \"#ef4444\",\r\n      ebitdaActual: \"#7c3aed\",\r\n      ebitdaBudget: \"#db2777\",\r\n      percentActual: \"#9333ea\",\r\n      percentPredicted: \"#8b5cf6\",\r\n      highlightColor: \"#6366f1\",\r\n    },\r\n  },\r\n\r\n  midnight: {\r\n    name: \"Midnight Aurora\",\r\n    mainBg: \"bg-gradient-to-br from-slate-900 via-purple-950 to-indigo-950\",\r\n    cardBg:\r\n      \"bg-gradient-to-br from-slate-800/90 via-slate-900/95 to-slate-800/90 backdrop-blur-xl\",\r\n    modalBg: \"bg-gradient-to-br from-slate-900 to-slate-800 backdrop-blur-xl\",\r\n    primaryText: \"text-white\",\r\n    secondaryText: \"text-slate-300\",\r\n    mutedText: \"text-slate-400\",\r\n    border: \"border-purple-400/30\",\r\n    shadow: \"shadow-2xl shadow-purple-500/30\",\r\n    chartBg:\r\n      \"bg-gradient-to-br from-slate-900/95 via-indigo-950/90 to-purple-950/80\",\r\n    gridColor: \"#4b5563\",\r\n    buttonBg: \"bg-gradient-to-r from-indigo-800 to-purple-800\",\r\n    buttonHover: \"hover:from-indigo-700 hover:to-purple-700\",\r\n    cardGradient: \"from-indigo-900/80 via-purple-900/70 to-slate-900/80\",\r\n    dotPattern: \"from-purple-500/10 via-indigo-500/15 to-blue-500/10\",\r\n    accentGradient: \"from-purple-400 via-indigo-400 to-blue-500\",\r\n    glowEffect: \"shadow-2xl shadow-purple-500/30\",\r\n    hoverGlow: \"hover:shadow-2xl hover:shadow-indigo-500/40\",\r\n    chartColors: {\r\n      actualLine: \"#a78bfa\",\r\n      predictedLine: \"#818cf8\",\r\n      targetLine: \"#fbbf24\",\r\n      actualFill: \"rgba(167, 139, 250, 0.3)\",\r\n      predictedFill: \"rgba(129, 140, 248, 0.2)\",\r\n      goodColor: \"#34d399\",\r\n      badColor: \"#f87171\",\r\n      ebitdaActual: \"#8b5cf6\",\r\n      ebitdaBudget: \"#facc15\",\r\n      percentActual: \"#c084fc\",\r\n      percentPredicted: \"#a78bfa\",\r\n      highlightColor: \"#6366f1\",\r\n    },\r\n  },\r\n\r\n  rose: {\r\n    name: \"Rose Garden\",\r\n    mainBg: \"bg-gradient-to-br from-pink-50 via-rose-50 to-red-50\",\r\n    cardBg: \"bg-white/90 backdrop-blur-xl\",\r\n    modalBg: \"bg-white/95 backdrop-blur-xl\",\r\n    primaryText: \"text-rose-900\",\r\n    secondaryText: \"text-rose-700\",\r\n    mutedText: \"text-rose-600\",\r\n    border: \"border-rose-200/60\",\r\n    shadow: \"shadow-xl shadow-rose-400/20\",\r\n    chartBg: \"bg-gradient-to-br from-white via-rose-50/50 to-pink-50/40\",\r\n    gridColor: \"#fecdd3\",\r\n    buttonBg: \"bg-gradient-to-r from-rose-100 to-pink-100\",\r\n    buttonHover: \"hover:from-rose-200 hover:to-pink-200\",\r\n    cardGradient: \"from-rose-50 via-pink-50 to-red-50\",\r\n    dotPattern: \"from-rose-500/5 via-pink-500/10 to-red-500/5\",\r\n    accentGradient: \"from-rose-500 via-pink-500 to-red-600\",\r\n    glowEffect: \"shadow-2xl shadow-rose-400/30\",\r\n    hoverGlow: \"hover:shadow-2xl hover:shadow-pink-500/40\",\r\n    chartColors: {\r\n      actualLine: \"#f43f5e\",\r\n      predictedLine: \"#ec4899\",\r\n      targetLine: \"#fbbf24\",\r\n      actualFill: \"rgba(244, 63, 94, 0.3)\",\r\n      predictedFill: \"rgba(236, 72, 153, 0.2)\",\r\n      goodColor: \"#10b981\",\r\n      badColor: \"#dc2626\",\r\n      ebitdaActual: \"#e11d48\",\r\n      ebitdaBudget: \"#f59e0b\",\r\n      percentActual: \"#f43f5e\",\r\n      percentPredicted: \"#fb7185\",\r\n      highlightColor: \"#6366f1\",\r\n    },\r\n  },\r\n\r\n  arctic: {\r\n    name: \"Arctic Frost\",\r\n    mainBg: \"bg-gradient-to-br from-slate-50 via-blue-50 to-gray-100\",\r\n    cardBg: \"bg-white/90 backdrop-blur-xl\",\r\n    modalBg: \"bg-white/95 backdrop-blur-xl\",\r\n    primaryText: \"text-slate-800\",\r\n    secondaryText: \"text-slate-600\",\r\n    mutedText: \"text-slate-500\",\r\n    border: \"border-blue-200/60\",\r\n    shadow: \"shadow-xl shadow-blue-400/20\",\r\n    chartBg: \"bg-gradient-to-br from-white via-blue-50/50 to-slate-50/40\",\r\n    gridColor: \"#dbeafe\",\r\n    buttonBg: \"bg-gradient-to-r from-blue-100 to-slate-100\",\r\n    buttonHover: \"hover:from-blue-200 hover:to-slate-200\",\r\n    cardGradient: \"from-blue-50 via-slate-50 to-gray-100\",\r\n    dotPattern: \"from-blue-500/5 via-slate-500/10 to-gray-500/5\",\r\n    accentGradient: \"from-blue-500 via-slate-500 to-gray-600\",\r\n    glowEffect: \"shadow-2xl shadow-blue-400/30\",\r\n    hoverGlow: \"hover:shadow-2xl hover:shadow-slate-500/40\",\r\n    chartColors: {\r\n      actualLine: \"#3b82f6\",\r\n      predictedLine: \"#64748b\",\r\n      targetLine: \"#fbbf24\",\r\n      actualFill: \"rgba(59, 130, 246, 0.3)\",\r\n      predictedFill: \"rgba(100, 116, 139, 0.2)\",\r\n      goodColor: \"#10b981\",\r\n      badColor: \"#ef4444\",\r\n      ebitdaActual: \"#2563eb\",\r\n      ebitdaBudget: \"#f59e0b\",\r\n      percentActual: \"#3b82f6\",\r\n      percentPredicted: \"#6b7280\",\r\n      highlightColor: \"#6366f1\",\r\n    },\r\n  },\r\n\r\n  amber: {\r\n    name: \"Amber Gold\",\r\n    mainBg: \"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-100\",\r\n    cardBg: \"bg-white/90 backdrop-blur-xl\",\r\n    modalBg: \"bg-white/95 backdrop-blur-xl\",\r\n    primaryText: \"text-amber-900\",\r\n    secondaryText: \"text-amber-700\",\r\n    mutedText: \"text-amber-600\",\r\n    border: \"border-amber-200/60\",\r\n    shadow: \"shadow-xl shadow-amber-400/20\",\r\n    chartBg: \"bg-gradient-to-br from-white via-amber-50/50 to-yellow-50/40\",\r\n    gridColor: \"#fde68a\",\r\n    buttonBg: \"bg-gradient-to-r from-amber-100 to-yellow-100\",\r\n    buttonHover: \"hover:from-amber-200 hover:to-yellow-200\",\r\n    cardGradient: \"from-amber-50 via-yellow-50 to-orange-100\",\r\n    dotPattern: \"from-amber-500/5 via-yellow-500/10 to-orange-500/5\",\r\n    accentGradient: \"from-amber-500 via-yellow-500 to-orange-600\",\r\n    glowEffect: \"shadow-2xl shadow-amber-400/30\",\r\n    hoverGlow: \"hover:shadow-2xl hover:shadow-yellow-500/40\",\r\n    chartColors: {\r\n      actualLine: \"#f59e0b\",\r\n      predictedLine: \"#eab308\",\r\n      targetLine: \"#ea580c\",\r\n      actualFill: \"rgba(245, 158, 11, 0.3)\",\r\n      predictedFill: \"rgba(234, 179, 8, 0.2)\",\r\n      goodColor: \"#10b981\",\r\n      badColor: \"#ef4444\",\r\n      ebitdaActual: \"#d97706\",\r\n      ebitdaBudget: \"#dc2626\",\r\n      percentActual: \"#f59e0b\",\r\n      percentPredicted: \"#facc15\",\r\n      highlightColor: \"#6366f1\",\r\n    },\r\n  },\r\n\r\n  neon: {\r\n    name: \"Neon Cyber\",\r\n    mainBg: \"bg-gradient-to-br from-gray-900 via-purple-950 to-blue-950\",\r\n    cardBg:\r\n      \"bg-gradient-to-br from-gray-800/90 via-gray-900/95 to-gray-800/90 backdrop-blur-xl\",\r\n    modalBg: \"bg-gradient-to-br from-gray-900 to-gray-800 backdrop-blur-xl\",\r\n    primaryText: \"text-white\",\r\n    secondaryText: \"text-gray-200\",\r\n    mutedText: \"text-gray-400\",\r\n    border: \"border-cyan-400/30\",\r\n    shadow: \"shadow-2xl shadow-cyan-500/30\",\r\n    chartBg:\r\n      \"bg-gradient-to-br from-gray-900/95 via-purple-950/90 to-blue-950/80\",\r\n    gridColor: \"#374151\",\r\n    axisTextColor: \"#ffffff\",\r\n    buttonBg: \"bg-gradient-to-r from-cyan-800 to-purple-800\",\r\n    buttonHover: \"hover:from-cyan-700 hover:to-purple-700\",\r\n    cardGradient: \"from-purple-900/80 via-blue-900/70 to-gray-900/80\",\r\n    dotPattern: \"from-cyan-500/10 via-purple-500/15 to-pink-500/10\",\r\n    accentGradient: \"from-cyan-400 via-purple-400 to-pink-500\",\r\n    glowEffect: \"shadow-2xl shadow-cyan-500/30\",\r\n    hoverGlow: \"hover:shadow-2xl hover:shadow-purple-500/40\",\r\n    chartColors: {\r\n      actualLine: \"#06b6d4\",\r\n      predictedLine: \"#e11d48\",\r\n      targetLine: \"#facc15\",\r\n      actualFill: \"rgba(6, 182, 212, 0.3)\",\r\n      predictedFill: \"rgba(225, 29, 72, 0.2)\",\r\n      goodColor: \"#10f981\",\r\n      badColor: \"#ff0066\",\r\n      ebitdaActual: \"#22d3ee\",\r\n      ebitdaBudget: \"#facc15\",\r\n      percentActual: \"#06b6d4\",\r\n      percentPredicted: \"#f472b6\",\r\n    },\r\n  },\r\n\r\n  coral: {\r\n    name: \"Coral Reef\",\r\n    mainBg: \"bg-gradient-to-br from-orange-50 via-coral-50 to-pink-100\",\r\n    cardBg: \"bg-white/90 backdrop-blur-xl\",\r\n    modalBg: \"bg-white/95 backdrop-blur-xl\",\r\n    primaryText: \"text-orange-900\",\r\n    secondaryText: \"text-orange-700\",\r\n    mutedText: \"text-orange-600\",\r\n    border: \"border-coral-200/60\",\r\n    shadow: \"shadow-xl shadow-coral-400/20\",\r\n    chartBg: \"bg-gradient-to-br from-white via-coral-50/50 to-orange-50/40\",\r\n    gridColor: \"#fed7aa\",\r\n    buttonBg: \"bg-gradient-to-r from-coral-100 to-orange-100\",\r\n    buttonHover: \"hover:from-coral-200 hover:to-orange-200\",\r\n    cardGradient: \"from-coral-50 via-orange-50 to-pink-100\",\r\n    dotPattern: \"from-coral-500/5 via-orange-500/10 to-pink-500/5\",\r\n    accentGradient: \"from-coral-500 via-orange-500 to-pink-600\",\r\n    glowEffect: \"shadow-2xl shadow-coral-400/30\",\r\n    hoverGlow: \"hover:shadow-2xl hover:shadow-orange-500/40\",\r\n    chartColors: {\r\n      actualLine: \"#ff7849\",\r\n      predictedLine: \"#ff6347\",\r\n      targetLine: \"#fbbf24\",\r\n      actualFill: \"rgba(255, 120, 73, 0.3)\",\r\n      predictedFill: \"rgba(255, 99, 71, 0.2)\",\r\n      goodColor: \"#10b981\",\r\n      badColor: \"#dc2626\",\r\n      ebitdaActual: \"#ff5733\",\r\n      ebitdaBudget: \"#f59e0b\",\r\n      percentActual: \"#ff7849\",\r\n      percentPredicted: \"#ff8c69\",\r\n    },\r\n  },\r\n};\r\n\r\n// Icon Map\r\nconst iconMap = {\r\n  Consumables: Package,\r\n  Power: Zap,\r\n  Fuel: Fuel,\r\n  Labour: Users,\r\n  \"Sub Contract\": Handshake,\r\n  \"Machine Hire Charges\": Settings,\r\n  \"Repair & Maintenance\": Wrench,\r\n  \"Employee Cost\": Users,\r\n  \"Establishment Expenses\": Building,\r\n  Packing: Box,\r\n  Freight: Truck,\r\n  \"Raw Material\": Factory,\r\n};\r\n\r\n// Month Names\r\nconst monthNames = [\r\n  \"Jan\",\r\n  \"Feb\",\r\n  \"Mar\",\r\n  \"Apr\",\r\n  \"May\",\r\n  \"Jun\",\r\n  \"Jul\",\r\n  \"Aug\",\r\n  \"Sep\",\r\n  \"Oct\",\r\n  \"Nov\",\r\n  \"Dec\",\r\n];\r\n\r\n// Helper Functions\r\nconst getMonthName = (monthNo) => {\r\n  return monthNames[monthNo - 1] || \"\";\r\n};\r\n\r\n// Custom Tooltip Component\r\nconst CustomTooltip = ({ active, payload, label, theme }) => {\r\n  if (active && payload && payload.length) {\r\n    const uniqueEntries = payload.filter((entry, index, self) => {\r\n      if (entry.value === null || entry.value === undefined) return false;\r\n      return (\r\n        self.findIndex(\r\n          (e) => e.dataKey === entry.dataKey && e.value === entry.value\r\n        ) === index\r\n      );\r\n    });\r\n\r\n    if (uniqueEntries.length === 0) return null;\r\n\r\n    return (\r\n      <div\r\n        className={`${theme.cardBg} p-4 rounded-xl ${theme.shadow} ${theme.border} border`}\r\n      >\r\n        <p className={`text-sm font-bold ${theme.primaryText} mb-3`}>{label}</p>\r\n        {uniqueEntries.map((entry, index) => (\r\n          <div key={`item-${entry.dataKey}-${index}`} className=\"text-sm mb-1\">\r\n            <span\r\n              className=\"inline-block w-3 h-3 rounded-full mr-2\"\r\n              style={{ backgroundColor: entry.color }}\r\n            />\r\n            <span className={`font-semibold ${theme.primaryText}`}>\r\n              {entry.name}:{\" \"}\r\n            </span>\r\n            <span className={`font-bold ${theme.primaryText}`}>\r\n              {entry.dataKey.includes(\"Percent\") ||\r\n              entry.dataKey.includes(\"Target\") ||\r\n              entry.dataKey.includes(\"EBITDA\")\r\n                ? `${entry.value}%`\r\n                : `${entry.value.toLocaleString()}`}\r\n            </span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n  return null;\r\n};\r\n\r\n// Tab Toggle Component\r\nconst TabToggle = ({ theme }) => {\r\n  const viewType = useCostStore((state) => state.viewType);\r\n  const setViewType = useCostStore((state) => state.setViewType);\r\n  const apiLoading = useCostStore((state) => state.apiLoading);\r\n  const currentYear = useCostStore((state) => state.currentYear);\r\n  const monthRange = useCostStore((state) => state.monthRange);\r\n  const fetchCostData = useCostStore((state) => state.fetchCostData);\r\n\r\n  const handleToggle = async (type) => {\r\n    setViewType(type);\r\n    await fetchCostData(monthRange.from, monthRange.to, currentYear, type);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-3\">\r\n      <span className={`text-sm font-semibold ${theme.secondaryText}`}>\r\n        View:\r\n      </span>\r\n\r\n      <div\r\n        className={`relative flex items-center rounded-full p-1 border shadow-md ${theme.cardBg} ${theme.border}`}\r\n      >\r\n        {/* Sliding Indicator */}\r\n        <div\r\n          className={`absolute top-1 left-1 h-9 w-28 rounded-full bg-gradient-to-r\r\n      ${theme.accentGradient} transition-all duration-300 ease-in-out ${\r\n            viewType === \"production\" ? \"translate-x-0\" : \"translate-x-28\"\r\n          }`}\r\n        />\r\n\r\n        {/* Production Button */}\r\n        <button\r\n          onClick={() => handleToggle(\"production\")}\r\n          disabled={apiLoading}\r\n          className={`relative z-10 w-28 h-9 rounded-full text-sm font-semibold flex items-center justify-center transition-colors\r\n        ${viewType === \"production\" ? \"text-white\" : \"text-gray-600\"}\r\n        ${apiLoading ? \"opacity-50 cursor-not-allowed\" : \"\"}\r\n      `}\r\n        >\r\n          {apiLoading && viewType === \"production\" ? (\r\n            <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n          ) : (\r\n            \"Production\"\r\n          )}\r\n        </button>\r\n\r\n        {/* Sale Button */}\r\n        <button\r\n          onClick={() => handleToggle(\"sale\")}\r\n          disabled={apiLoading}\r\n          className={`relative z-10 w-28 h-9 rounded-full text-sm font-semibold flex items-center justify-center transition-colors\r\n        ${viewType === \"sale\" ? \"text-white\" : \"text-gray-600\"}\r\n        ${apiLoading ? \"opacity-50 cursor-not-allowed\" : \"\"}\r\n      `}\r\n        >\r\n          {apiLoading && viewType === \"sale\" ? (\r\n            <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n          ) : (\r\n            \"Sale\"\r\n          )}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Main Component\r\nconst CostScreener = () => {\r\n  // Zustand Store\r\n  const viewType = useCostStore((state) => state.viewType);\r\n  const setViewType = useCostStore((state) => state.setViewType);\r\n  const apiData = useCostStore((state) => state.apiData);\r\n  const apiLoading = useCostStore((state) => state.apiLoading);\r\n  const apiError = useCostStore((state) => state.apiError);\r\n  const selectedTheme = useCostStore((state) => state.selectedTheme);\r\n  const setSelectedTheme = useCostStore((state) => state.setSelectedTheme);\r\n  const selectedLocation = useCostStore((state) => state.selectedLocation);\r\n  const setSelectedLocation = useCostStore(\r\n    (state) => state.setSelectedLocation\r\n  );\r\n  const fetchCostData = useCostStore((state) => state.fetchCostData);\r\n  const currentYear = useCostStore((state) => state.currentYear);\r\n  const monthRange = useCostStore((state) => state.monthRange);\r\n  const currentPeriodMonth = useCostStore((state) => state.currentPeriodMonth);\r\n  const setCurrentPeriodMonth = useCostStore(\r\n    (state) => state.setCurrentPeriodMonth\r\n  );\r\n\r\n  // Local States\r\n  const [showThemeSelector, setShowThemeSelector] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState(\"All\");\r\n  const [selectedLine, setSelectedLine] = useState(\"All\");\r\n  const [showCombinedValues, setShowCombinedValues] = useState(false);\r\n  const [expandedCards, setExpandedCards] = useState({});\r\n  const [cardCurrentMonths, setCardCurrentMonths] = useState({});\r\n  const [breakdownCards, setBreakdownCards] = useState({});\r\n  const [actionModal, setActionModal] = useState(null);\r\n  const cardRefs = useRef({});\r\n  const themeSelectorRef = useRef(null);\r\n  const currentTheme = themes[selectedTheme];\r\n\r\n  const handleLocationSelect = async (locationName) => {\r\n    setSelectedLocation(locationName);\r\n    const { monthRange, currentYear, viewType } = useCostStore.getState();\r\n    await fetchCostData(monthRange.from, monthRange.to, currentYear, viewType);\r\n  };\r\n\r\n  const openPowerForm = () => {\r\n    window.location.href = `${window.location.origin}/kalyani.iot/costing_entry`;\r\n  };\r\n\r\n  const locationsByCategory = {\r\n    All: [\r\n      { name: \"Ranjangaon\", code: \"RGN\", percentage: -9, status: \"active\" },\r\n      { name: \"Mundhwa\", code: \"MUN\", percentage: -7, status: \"active\" },\r\n      { name: \"Ranjangaon-2\", code: \"RGN-2\", percentage: -7, status: \"active\" },\r\n      { name: \"Baramati\", code: \"BRM\", percentage: 13, status: \"active\" },\r\n      { name: \"Chakan\", code: \"CHK\", percentage: -7, status: \"active\" },\r\n    ],\r\n    Forging: [\r\n      { name: \"Ranjangaon\", code: \"RGN\", percentage: -9, status: \"active\" },\r\n      { name: \"Mundhwa\", code: \"MUN\", percentage: -7, status: \"active\" },\r\n      { name: \"Ranjangaon-2\", code: \"RGN-2\", percentage: -7, status: \"active\" },\r\n      { name: \"Baramati\", code: \"BRM\", percentage: 13, status: \"active\" },\r\n      { name: \"Bhiwadi\", code: \"BWD\", percentage: 13, status: \"active\" },\r\n      { name: \"Gujrat\", code: \"GUT\", percentage: 13, status: \"active\" },\r\n    ],\r\n    Machining: [\r\n      { name: \"Chakan\", code: \"CHK\", percentage: -7, status: \"active\" },\r\n      { name: \"Khed\", code: \"KHD\", percentage: -4, status: \"active\" },\r\n      { name: \"Ambhethan-1\", code: \"AMB1\", percentage: -3, status: \"active\" },\r\n      { name: \"Ambhethan-2\", code: \"AMB2\", percentage: -3, status: \"active\" },\r\n    ],\r\n  };\r\n\r\n  const linesByLocation = {\r\n    Ranjangaon: [\r\n      { name: \"Line 1\", code: \"L1\", status: \"active\", capacity: \"85%\" },\r\n      { name: \"Line 2\", code: \"L2\", status: \"active\", capacity: \"92%\" },\r\n      { name: \"Line 3\", code: \"L3\", status: \"active\", capacity: \"78%\" },\r\n      { name: \"Line 4\", code: \"L4\", status: \"maintenance\", capacity: \"0%\" },\r\n    ],\r\n    Mundhwa: [\r\n      { name: \"Line A\", code: \"LA\", status: \"active\", capacity: \"88%\" },\r\n      { name: \"Line B\", code: \"LB\", status: \"active\", capacity: \"91%\" },\r\n      { name: \"Line C\", code: \"LC\", status: \"active\", capacity: \"82%\" },\r\n    ],\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\" Component Mounted - Initializing\");\r\n\r\n  //   const today = new Date();\r\n  //   const currentMonth = today.getMonth() + 1;\r\n\r\n  //   setCurrentPeriodMonth(currentMonth);\r\n\r\n  //   let to = currentMonth;\r\n  //   let from = currentMonth - 5;\r\n\r\n  //   if (from < 1) {\r\n  //     from = 1;\r\n  //     to = 6;\r\n  //   }\r\n\r\n  //   fetchCostData(from, to, currentYear, viewType);\r\n  // }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\" Component Mounted - Initializing\");\r\n\r\n    const today = new Date();\r\n    const currentMonth = today.getMonth() + 1;\r\n\r\n    setCurrentPeriodMonth(currentMonth);\r\n\r\n    let to = currentMonth;\r\n    let from = currentMonth - 5;\r\n\r\n    if (from < 1) {\r\n      from = 1;\r\n      to = 6;\r\n    }\r\n\r\n    // Reset location to \"All\" on initial load when category is \"All\"\r\n    if (selectedCategory === \"All\") {\r\n      setSelectedLocation(\"All\");\r\n    }\r\n\r\n    fetchCostData(from, to, currentYear, viewType);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      if (\r\n        themeSelectorRef.current &&\r\n        !themeSelectorRef.current.contains(event.target)\r\n      ) {\r\n        setShowThemeSelector(false);\r\n      }\r\n    }\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  // Transform API Data to Chart Format\r\n  const transformApiDataToChartFormat = () => {\r\n    if (!apiData || apiData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    const monthlyData = {};\r\n\r\n    apiData.forEach((item) => {\r\n      const monthName = getMonthName(item.month_no);\r\n\r\n      if (!monthlyData[monthName]) {\r\n        monthlyData[monthName] = {\r\n          month: monthName,\r\n          monthNo: item.month_no,\r\n          costs: {},\r\n          total: 0,\r\n          count: 0,\r\n        };\r\n      }\r\n\r\n      const costHead = (item.cost_head || \"Other\").trim();\r\n      const amount = parseFloat(item.total_amount || 0);\r\n\r\n      if (amount !== 0 && !isNaN(amount)) {\r\n        if (monthlyData[monthName].costs[costHead]) {\r\n          monthlyData[monthName].costs[costHead] += amount;\r\n        } else {\r\n          monthlyData[monthName].costs[costHead] = amount;\r\n        }\r\n\r\n        monthlyData[monthName].total += amount;\r\n        monthlyData[monthName].count++;\r\n      }\r\n    });\r\n\r\n    const sortedData = Object.values(monthlyData)\r\n      .filter((m) => m.count > 0)\r\n      .sort((a, b) => a.monthNo - b.monthNo);\r\n\r\n    if (sortedData.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    const finalData = sortedData.map((monthData) => ({\r\n      month: monthData.month,\r\n      TotalActual: parseFloat(monthData.total.toFixed(2)),\r\n      TotalPredicted: null,\r\n      EBITDAActual: null,\r\n      EBITDABudget: null,\r\n      PercentActual: null,\r\n      PercentPredicted: null,\r\n      PercentTarget: 20,\r\n      rawData: monthData.costs,\r\n    }));\r\n\r\n    return finalData;\r\n  };\r\n\r\n  // Transform API Data to KPI Cards\r\n  const transformApiDataToKpiCards = () => {\r\n    if (!apiData || apiData.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const costHeadData = {};\r\n\r\n    apiData.forEach((item) => {\r\n      const costHead = (item.cost_head || \"Other\").trim();\r\n      const monthNo = item.month_no;\r\n\r\n      let costValue = parseFloat(item.cost_per_ton);\r\n\r\n      if (!costValue || isNaN(costValue)) {\r\n        const totalAmount = parseFloat(item.total_amount || 0);\r\n        const totalTonn = parseFloat(item.total_tonn || 1);\r\n\r\n        if (totalAmount !== 0 && totalTonn !== 0) {\r\n          costValue = totalAmount / totalTonn;\r\n        } else {\r\n          costValue = totalAmount;\r\n        }\r\n      }\r\n\r\n      if (costValue === 0 || isNaN(costValue)) {\r\n        return;\r\n      }\r\n\r\n      if (!costHeadData[costHead]) {\r\n        costHeadData[costHead] = {\r\n          kpiName: costHead,\r\n          monthlyAmounts: {},\r\n        };\r\n      }\r\n\r\n      if (!costHeadData[costHead].monthlyAmounts[monthNo]) {\r\n        costHeadData[costHead].monthlyAmounts[monthNo] = 0;\r\n      }\r\n      costHeadData[costHead].monthlyAmounts[monthNo] += costValue;\r\n    });\r\n\r\n    if (Object.keys(costHeadData).length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const kpiCards = Object.values(costHeadData).map((costHead) => {\r\n      const months = Object.keys(costHead.monthlyAmounts)\r\n        .map(Number)\r\n        .sort((a, b) => a - b);\r\n\r\n      const trend = months.map((month) => costHead.monthlyAmounts[month]);\r\n      const lastMonthAmount = trend[trend.length - 1] || 0;\r\n      const avgAmount = trend.reduce((a, b) => a + b, 0) / trend.length;\r\n      const budgetAmount = avgAmount * 1.05;\r\n\r\n      return {\r\n        kpiName: costHead.kpiName,\r\n        actual_per_tonne: parseFloat(lastMonthAmount.toFixed(2)),\r\n        budget_per_tonne: parseFloat(budgetAmount.toFixed(2)),\r\n        trend: trend.map((val) => parseFloat(val.toFixed(2))),\r\n        monthly_costs: trend.map((val) => parseFloat(val.toFixed(2))),\r\n        monthly_budget: trend.map(() => parseFloat(budgetAmount.toFixed(2))),\r\n        production_percentage: null,\r\n        target_percentage: null,\r\n        months: months,\r\n      };\r\n    });\r\n\r\n    return kpiCards;\r\n  };\r\n\r\n  const getTopCostContributors = (kpiName, cardCurrentMonth) => {\r\n    if (!apiData || apiData.length === 0) return [];\r\n\r\n    const kpiData = apiData.filter(\r\n      (item) =>\r\n        (item.cost_head || \"Other\").trim() === kpiName &&\r\n        item.month_no === cardCurrentMonth\r\n    );\r\n\r\n    if (kpiData.length === 0) return [];\r\n\r\n    const contributors = {};\r\n\r\n    kpiData.forEach((item) => {\r\n      const key = item.sub_category || item.cost_head || \"Other\";\r\n      const amount = parseFloat(item.total_amount || 0);\r\n\r\n      if (!contributors[key]) {\r\n        contributors[key] = 0;\r\n      }\r\n      contributors[key] += amount;\r\n    });\r\n\r\n    const sorted = Object.entries(contributors)\r\n      .map(([name, amount]) => ({ name, amount }))\r\n      .sort((a, b) => b.amount - a.amount)\r\n      .slice(0, 10);\r\n\r\n    return sorted;\r\n  };\r\n\r\n  // Get Current Data (KPI Cards)\r\n  const getCurrentData = () => {\r\n    if (apiData && apiData.length > 0) {\r\n      const cards = transformApiDataToKpiCards();\r\n      return cards;\r\n    }\r\n    return [];\r\n  };\r\n\r\n  // Build Chart Data for Individual KPI Card with specific current month\r\n  const buildChartData = (kpi, cardCurrentMonth) => {\r\n    if (!kpi || !kpi.trend) return [];\r\n\r\n    const avgTrendValue =\r\n      kpi.trend.reduce((a, b) => a + b, 0) / kpi.trend.length;\r\n    const targetValue =\r\n      kpi.budget_per_tonne && kpi.actual_per_tonne\r\n        ? avgTrendValue * (kpi.budget_per_tonne / kpi.actual_per_tonne)\r\n        : (avgTrendValue || 0) * 1.05;\r\n\r\n    const avgTargetPercent =\r\n      kpi.target_percentage?.length > 0\r\n        ? kpi.target_percentage.reduce((a, b) => a + b, 0) /\r\n          kpi.target_percentage.length\r\n        : null;\r\n\r\n    const historicalData = kpi.trend.map((value, index) => {\r\n      const actualMonthNo = kpi.months\r\n        ? kpi.months[index]\r\n        : monthRange.from + index;\r\n      const monthIndex = (actualMonthNo - 1) % 12;\r\n\r\n      const isCurrentMonth = actualMonthNo === cardCurrentMonth;\r\n\r\n      return {\r\n        month: monthNames[monthIndex] || `M${index + 1}`,\r\n        monthNo: actualMonthNo,\r\n        actual: parseFloat(value.toFixed(2)),\r\n        prediction: null,\r\n        target: targetValue,\r\n        productionPercentPredicted: null,\r\n        productionPercent: kpi.production_percentage?.[index] || null,\r\n        productionTarget: avgTargetPercent,\r\n        isHistorical: true,\r\n        isHighlighted: isCurrentMonth,\r\n        variance: value - targetValue,\r\n      };\r\n    });\r\n\r\n    const lastValue = kpi.trend[kpi.trend.length - 1];\r\n    const prevValue = kpi.trend[kpi.trend.length - 2] || lastValue;\r\n    const costDirection = lastValue >= prevValue ? 1 : -1;\r\n    const lastMonthNo =\r\n      historicalData[historicalData.length - 1]?.monthNo || 12;\r\n    const nextMonthNo = (lastMonthNo % 12) + 1;\r\n    const monthIndex = (nextMonthNo - 1) % 12;\r\n    const stepChange =\r\n      Math.abs(lastValue - prevValue) * 0.2 || lastValue * 0.05;\r\n    const predictedValue = lastValue + costDirection * stepChange;\r\n\r\n    const percentLength = kpi.production_percentage?.length || 0;\r\n    const lastPercent =\r\n      percentLength > 0 ? kpi.production_percentage[percentLength - 1] : null;\r\n\r\n    const predictionData = [\r\n      {\r\n        month: monthNames[monthIndex] || `M${monthIndex + 1}`,\r\n        monthNo: nextMonthNo,\r\n        actual: null,\r\n        prediction: parseFloat(predictedValue.toFixed(2)),\r\n        target: targetValue,\r\n        targetForCheck: null,\r\n        productionPercent: null,\r\n        productionPercentPredicted: lastPercent,\r\n        productionTarget: avgTargetPercent,\r\n        productionTargetForCheck: avgTargetPercent,\r\n        isHistorical: false,\r\n        isHighlighted: false,\r\n        variance: predictedValue - targetValue,\r\n      },\r\n    ];\r\n\r\n    return [...historicalData, ...predictionData];\r\n  };\r\n\r\n  // Custom Label Component\r\n  const renderCustomLabel = (props, theme) => {\r\n    const { x, y, value, viewBox } = props;\r\n    if (!value || value === null) return null;\r\n\r\n    const midPoint = (viewBox.width || 400) / 2;\r\n    const showAbove = x < midPoint;\r\n    const offsetY = showAbove ? -12 : 12;\r\n\r\n    return (\r\n      <text\r\n        x={x}\r\n        y={y + offsetY}\r\n        fill={theme.primaryText}\r\n        fontSize=\"11\"\r\n        fontWeight=\"700\"\r\n        textAnchor=\"middle\"\r\n        className=\"transition-all duration-200\"\r\n      >\r\n        {typeof value === \"number\"\r\n          ? value % 1 === 0\r\n            ? value\r\n            : value.toFixed(1)\r\n          : value}\r\n      </text>\r\n    );\r\n  };\r\n\r\n  // Render Combined Chart\r\n  const renderCombinedChart = () => {\r\n    const baseData = transformApiDataToChartFormat();\r\n\r\n    if (apiLoading) {\r\n      return (\r\n        <div\r\n          className={`${currentTheme.cardBg} rounded-xl p-8 text-center ${currentTheme.shadow} m-6`}\r\n        >\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n          <p\r\n            className={`mt-4 ${currentTheme.secondaryText} font-bold text-base`}\r\n          >\r\n            Loading {viewType} cost data...\r\n          </p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (apiError) {\r\n      return (\r\n        <div\r\n          className={`${currentTheme.cardBg} rounded-xl p-8 text-center ${currentTheme.shadow} m-6`}\r\n        >\r\n          <div className=\"text-red-600 text-3xl mb-4\"></div>\r\n          <p className=\"text-red-600 font-bold text-base mb-2\">\r\n            Error loading data\r\n          </p>\r\n          <p\r\n            className={`${currentTheme.secondaryText} text-sm font-medium mb-4`}\r\n          >\r\n            {apiError}\r\n          </p>\r\n          <button\r\n            onClick={() => {\r\n              fetchCostData(\r\n                monthRange.from,\r\n                monthRange.to,\r\n                currentYear,\r\n                viewType\r\n              );\r\n            }}\r\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-bold\"\r\n          >\r\n            Retry\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (!baseData || baseData.length === 0) {\r\n      return (\r\n        <div\r\n          className={`${currentTheme.cardBg} rounded-xl p-8 text-center ${currentTheme.shadow} m-6`}\r\n        >\r\n          <div className=\"text-gray-400 text-5xl mb-4\"></div>\r\n          <p className={`${currentTheme.primaryText} font-bold text-lg mb-2`}>\r\n            No Data Available\r\n          </p>\r\n          <p\r\n            className={`${currentTheme.secondaryText} text-sm font-medium mb-4`}\r\n          >\r\n            No {viewType} data found for the selected period.\r\n          </p>\r\n          <button\r\n            onClick={() => {\r\n              fetchCostData(\r\n                monthRange.from,\r\n                monthRange.to,\r\n                currentYear,\r\n                viewType\r\n              );\r\n            }}\r\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all font-bold\"\r\n          >\r\n            Load Data\r\n          </button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const combinedData = [];\r\n\r\n    const actualTotals = combinedData\r\n      .map((d) => d.TotalActual)\r\n      .filter((v) => v !== null && v !== undefined && v > 0);\r\n\r\n    let dynamicTarget = null;\r\n    if (actualTotals.length > 0) {\r\n      const avgActual =\r\n        actualTotals.reduce((a, b) => a + b, 0) / actualTotals.length;\r\n      dynamicTarget = avgActual * 1.05;\r\n    }\r\n\r\n    return (\r\n      <div className=\"mb-6\">\r\n        {/* Theme Selector */}\r\n        <div className=\"fixed top-4 right-4 z-50 flex items-center gap-3\">\r\n          <button\r\n            onClick={openPowerForm} //  Yahan click pe navigate hoga\r\n            className={`p-3 rounded-full ${currentTheme.cardBg} ${currentTheme.border} border ${currentTheme.shadow} transition-all duration-300 hover:scale-110 group relative overflow-hidden`}\r\n            title=\"Machine Power Unit Entry\"\r\n          >\r\n            <div className=\"absolute inset-0 bg-gradient-to-r from-green-500 via-blue-500 to-purple-500 opacity-0 group-hover:opacity-20 transition-opacity duration-300\" />\r\n            <Zap className=\"w-6 h-6 relative z-10 text-blue-600\" />{\" \"}\r\n            {/*  POWER ICON */}\r\n          </button>\r\n\r\n          <div className=\"relative\" ref={themeSelectorRef}>\r\n            <button\r\n              onClick={() => setShowThemeSelector(!showThemeSelector)}\r\n              className={`p-3 rounded-full ${currentTheme.cardBg} ${currentTheme.border} border ${currentTheme.shadow} transition-all duration-300 hover:scale-110 group relative overflow-hidden`}\r\n            >\r\n              <div className=\"absolute inset-0 bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 opacity-0 group-hover:opacity-20 transition-opacity duration-300\" />\r\n              <Palette className=\"w-6 h-6 relative z-10\" />\r\n            </button>\r\n\r\n            {showThemeSelector && (\r\n              <div\r\n                className={`absolute right-0 mt-2 w-64 ${currentTheme.cardBg} rounded-xl ${currentTheme.shadow} ${currentTheme.border} border overflow-hidden`}\r\n              >\r\n                <div\r\n                  className={`p-3 ${currentTheme.primaryText} font-bold text-sm border-b ${currentTheme.border} bg-gradient-to-r ${currentTheme.buttonBg}`}\r\n                >\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <Palette className=\"w-4 h-4\" />\r\n                    Choose Theme\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"max-h-96 overflow-y-auto\">\r\n                  {Object.entries(themes).map(([key, theme]) => (\r\n                    <button\r\n                      key={key}\r\n                      onClick={() => {\r\n                        setSelectedTheme(key);\r\n                        setShowThemeSelector(false);\r\n                      }}\r\n                      className={`w-full px-4 py-3 flex items-center justify-between hover:bg-gray-100 transition-all ${\r\n                        selectedTheme === key\r\n                          ? `bg-gradient-to-r ${theme.buttonBg}`\r\n                          : \"\"\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div\r\n                          className={`w-8 h-8 rounded-lg bg-gradient-to-br ${theme.accentGradient} shadow-sm`}\r\n                        />\r\n                        <span\r\n                          className={`text-sm font-bold ${theme.primaryText}`}\r\n                        >\r\n                          {theme.name}\r\n                        </span>\r\n                      </div>\r\n\r\n                      {selectedTheme === key && (\r\n                        <Check className={`w-4 h-4 ${theme.primaryText}`} />\r\n                      )}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Chart Grid */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n          {/* LEFT CHART - Manufacturing Cost */}\r\n          <div\r\n            className={`${currentTheme.chartBg} rounded-2xl ${currentTheme.shadow} p-4 ${currentTheme.border} border transition-all duration-300`}\r\n          >\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <h3 className={`text-xxl font-bold ${currentTheme.primaryText}`}>\r\n                Manufacturing Cost\r\n              </h3>\r\n              <div className=\"flex gap-2 items-center\">\r\n                <button\r\n                  onClick={() => setShowCombinedValues(!showCombinedValues)}\r\n                  className={`px-3 py-1.5 rounded-lg text-xs font-bold transition-all flex items-center gap-1 ${\r\n                    showCombinedValues\r\n                      ? `bg-gradient-to-r ${currentTheme.accentGradient} text-white font-bold shadow-md`\r\n                      : `bg-gray-100 ${currentTheme.secondaryText} hover:bg-gray-200`\r\n                  }`}\r\n                >\r\n                  Values\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div className=\"h-64\">\r\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <LineChart\r\n                  data={combinedData}\r\n                  margin={{ top: 20, right: 50, left: 10, bottom: 10 }}\r\n                >\r\n                  <XAxis\r\n                    dataKey=\"month\"\r\n                    tick={{ fontSize: 15, fontWeight: 600 }}\r\n                  />\r\n                  <YAxis tick={{ fontSize: 15, fontWeight: 600 }} />\r\n                  <Tooltip content={<CustomTooltip theme={currentTheme} />} />\r\n                  <Legend\r\n                    wrapperStyle={{ fontSize: \"15px\", fontWeight: 600 }}\r\n                  />\r\n\r\n                  {dynamicTarget && dynamicTarget > 0 && (\r\n                    <ReferenceLine\r\n                      y={dynamicTarget}\r\n                      stroke={currentTheme.chartColors.targetLine}\r\n                      strokeWidth={2}\r\n                      label={{\r\n                        value: `Target: ${Math.round(\r\n                          dynamicTarget\r\n                        ).toLocaleString()}`,\r\n                        position: \"right\",\r\n                        fill: currentTheme.chartColors.targetLine,\r\n                        fontSize: 15,\r\n                        fontWeight: \"bold\",\r\n                      }}\r\n                    />\r\n                  )}\r\n\r\n                  <Line\r\n                    type=\"monotone\"\r\n                    dataKey=\"TotalActual\"\r\n                    stroke={currentTheme.chartColors.actualLine}\r\n                    strokeWidth={2.5}\r\n                    name=\"Actual Cost\"\r\n                    label={\r\n                      showCombinedValues\r\n                        ? (props) => renderCustomLabel(props, currentTheme)\r\n                        : false\r\n                    }\r\n                    dot={{ r: 5 }}\r\n                  />\r\n\r\n                  <Line\r\n                    type=\"monotone\"\r\n                    dataKey=\"TotalPredicted\"\r\n                    stroke={currentTheme.chartColors.predictedLine}\r\n                    strokeWidth={2.5}\r\n                    name=\"Predicted Cost\"\r\n                    strokeDasharray=\"5 5\"\r\n                    label={\r\n                      showCombinedValues\r\n                        ? (props) => renderCustomLabel(props, currentTheme)\r\n                        : false\r\n                    }\r\n                    dot={{ r: 5 }}\r\n                  />\r\n                </LineChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n          </div>\r\n\r\n          {/* RIGHT CHART - EBITDA */}\r\n          <div\r\n            className={`${currentTheme.chartBg} rounded-2xl ${currentTheme.shadow} p-4 ${currentTheme.border} border`}\r\n          >\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <h3 className={`text-xxl font-bold ${currentTheme.primaryText}`}>\r\n                EBITDA Performance\r\n              </h3>\r\n            </div>\r\n            <div className=\"h-64\">\r\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <LineChart\r\n                  data={combinedData}\r\n                  margin={{ top: 20, right: 50, left: 10, bottom: 10 }}\r\n                >\r\n                  <CartesianGrid stroke={currentTheme.gridColor} />\r\n                  <XAxis\r\n                    dataKey=\"month\"\r\n                    tick={{ fontSize: 15, fontWeight: 600 }}\r\n                  />\r\n                  <YAxis tick={{ fontSize: 15, fontWeight: 600 }} />\r\n                  <Tooltip content={<CustomTooltip theme={currentTheme} />} />\r\n                  <Legend\r\n                    wrapperStyle={{ fontSize: \"15px\", fontWeight: 600 }}\r\n                  />\r\n\r\n                  <Line\r\n                    type=\"monotone\"\r\n                    dataKey=\"EBITDABudget\"\r\n                    stroke={currentTheme.chartColors.ebitdaBudget}\r\n                    strokeWidth={2.5}\r\n                    name=\"EBITDA Budget %\"\r\n                    dot={{ r: 5 }}\r\n                  />\r\n                  <Line\r\n                    type=\"monotone\"\r\n                    dataKey=\"EBITDAActual\"\r\n                    stroke={currentTheme.chartColors.ebitdaActual}\r\n                    strokeWidth={2.5}\r\n                    name=\"EBITDA Actual %\"\r\n                    dot={{ r: 5 }}\r\n                  />\r\n                </LineChart>\r\n              </ResponsiveContainer>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Render Cards View\r\n  const renderCardsView = () => {\r\n    const data = getCurrentData();\r\n\r\n    if (!data || data.length === 0) {\r\n      return (\r\n        <div\r\n          className={`${currentTheme.cardBg} rounded-2xl ${currentTheme.shadow} p-12 text-center`}\r\n        >\r\n          <Factory\r\n            className={`w-16 h-16 ${currentTheme.mutedText} mx-auto mb-4`}\r\n          />\r\n          <h3\r\n            className={`text-lg font-bold ${currentTheme.secondaryText} mb-2`}\r\n          >\r\n            No Data Available\r\n          </h3>\r\n          <p className={`${currentTheme.mutedText} font-medium`}>\r\n            Switch between Production and Sale tabs to view data.\r\n          </p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"relative min-h-96 rounded-2xl overflow-hidden\">\r\n        <div\r\n          className={`absolute inset-0 bg-gradient-to-br ${currentTheme.cardGradient} transition-all duration-500`}\r\n        ></div>\r\n\r\n        <div className=\"relative z-10 p-6\">\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {data.map((kpi, idx) => {\r\n              const IconComponent = iconMap[kpi.kpiName] || Package;\r\n              const cardCurrentMonth =\r\n                cardCurrentMonths[kpi.kpiName] || currentPeriodMonth;\r\n              const chartData = buildChartData(kpi, cardCurrentMonth);\r\n              const currentMonthIndex = chartData.findIndex(\r\n                (d) => d.monthNo === cardCurrentMonth\r\n              );\r\n              const highlightIndex =\r\n                currentMonthIndex >= 0\r\n                  ? currentMonthIndex\r\n                  : chartData.filter((d) => d.isHistorical).length - 1;\r\n\r\n              if (!cardRefs.current[kpi.kpiName]) {\r\n                cardRefs.current[kpi.kpiName] = React.createRef();\r\n              }\r\n\r\n              const isModalOpen =\r\n                actionModal && actionModal.kpiName === kpi.kpiName;\r\n\r\n              return (\r\n                <div\r\n                  key={`${kpi.kpiName}-${idx}`}\r\n                  ref={cardRefs.current[kpi.kpiName]}\r\n                  className={`${currentTheme.cardBg} backdrop-blur-sm rounded-2xl ${currentTheme.shadow} ${currentTheme.hoverGlow} transition-all duration-300 p-5 ${currentTheme.border} border group relative overflow-visible`}\r\n                >\r\n                  {/* Card Header */}\r\n                  <div className=\"flex items-center justify-between px-3 py-2 mb-3\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <div\r\n                        className={`w-10 h-10 rounded-lg bg-gradient-to-br ${currentTheme.accentGradient} flex items-center justify-center`}\r\n                      >\r\n                        <IconComponent className=\"w-6 h-6 text-white\" />\r\n                      </div>\r\n                      <span className=\"text-xxl font-extrabold text-slate-800\">\r\n                        {kpi.kpiName}\r\n                      </span>\r\n                    </div>\r\n\r\n                    {(() => {\r\n                      const actual = kpi.actual_per_tonne;\r\n                      const budget = kpi.budget_per_tonne;\r\n                      const variance = ((actual - budget) / budget) * 100;\r\n                      const isOverBudget = actual > budget;\r\n\r\n                      return (\r\n                        <div\r\n                          className={`flex items-center gap-1 px-3 py-1 rounded-full ${\r\n                            isOverBudget ? \"bg-red-100\" : \"bg-green-100\"\r\n                          }`}\r\n                        >\r\n                          {isOverBudget ? (\r\n                            <ArrowUp className=\"w-4 h-4 text-red-700\" />\r\n                          ) : (\r\n                            <ArrowDown className=\"w-4 h-4 text-green-700\" />\r\n                          )}\r\n                          <span\r\n                            className={`text-3xl font-extrabold ${\r\n                              isOverBudget ? \"text-red-700\" : \"text-green-700\"\r\n                            }`}\r\n                          >\r\n                            {Math.abs(variance).toFixed(1)}%\r\n                          </span>\r\n                        </div>\r\n                      );\r\n                    })()}\r\n                  </div>\r\n\r\n                  {/* Chart Area */}\r\n                  <div\r\n                    className=\"relative h-56 mb-3\"\r\n                    style={{\r\n                      cursor: isModalOpen ? \"default\" : \"pointer\",\r\n                      zIndex: isModalOpen ? 1 : 1,\r\n                      pointerEvents: isModalOpen ? \"none\" : \"all\",\r\n                    }}\r\n                    onClick={(e) => {\r\n                      if (isModalOpen) return;\r\n\r\n                      e.stopPropagation();\r\n                      const rect = e.currentTarget.getBoundingClientRect();\r\n                      const clickX = e.clientX - rect.left;\r\n                      const clickY = e.clientY - rect.top;\r\n\r\n                      const chartWidth = rect.width - 10;\r\n                      const historicalPoints = chartData.filter(\r\n                        (d) => d.isHistorical\r\n                      );\r\n                      const pointSpacing =\r\n                        chartWidth / (historicalPoints.length + 1);\r\n                      const clickedIndex =\r\n                        Math.round(clickX / pointSpacing) - 1;\r\n\r\n                      if (\r\n                        clickedIndex >= 0 &&\r\n                        clickedIndex < historicalPoints.length\r\n                      ) {\r\n                        const point = historicalPoints[clickedIndex];\r\n                        if (point) {\r\n                          setActionModal({\r\n                            kpiName: kpi.kpiName,\r\n                            month: point.month,\r\n                            x: clickX,\r\n                            y: clickY,\r\n                          });\r\n                        }\r\n                      }\r\n                    }}\r\n                  >\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                      <ComposedChart\r\n                        data={chartData}\r\n                        margin={{ top: 5, right: 5, left: 0, bottom: 5 }}\r\n                      >\r\n                        <XAxis\r\n                          dataKey=\"month\"\r\n                          tick={{ fontSize: 15, fontWeight: 600 }}\r\n                        />\r\n                        <YAxis\r\n                          tick={{ fontSize: 15, fontWeight: 600 }}\r\n                          domain={[\"dataMin\", \"dataMax\"]}\r\n                        />\r\n                        <Tooltip\r\n                          content={<CustomTooltip theme={currentTheme} />}\r\n                        />\r\n\r\n                        {highlightIndex >= 0 && (\r\n                          <ReferenceArea\r\n                            x1={\r\n                              chartData[Math.max(0, highlightIndex - 0.4)]\r\n                                ?.month\r\n                            }\r\n                            x2={\r\n                              chartData[\r\n                                Math.min(\r\n                                  chartData.length - 1,\r\n                                  highlightIndex + 0.4\r\n                                )\r\n                              ]?.month\r\n                            }\r\n                            fill={currentTheme.chartColors.highlightColor}\r\n                            fillOpacity={0.1}\r\n                            strokeOpacity={0.3}\r\n                          />\r\n                        )}\r\n\r\n                        <Area\r\n                          type=\"monotone\"\r\n                          dataKey=\"actual\"\r\n                          fill={currentTheme.chartColors.actualLine}\r\n                          fillOpacity={0.2}\r\n                          stroke=\"none\"\r\n                        />\r\n\r\n                        <Line\r\n                          type=\"monotone\"\r\n                          dataKey=\"actual\"\r\n                          stroke={currentTheme.chartColors.actualLine}\r\n                          strokeWidth={2}\r\n                          dot={(props) => {\r\n                            const { cx, cy, index, payload } = props;\r\n                            const isHighlight = index === highlightIndex;\r\n                            const isHistorical = payload.isHistorical;\r\n\r\n                            if (!isHistorical) return null;\r\n\r\n                            return (\r\n                              <circle\r\n                                cx={cx}\r\n                                cy={cy}\r\n                                r={isHighlight ? 7 : 3}\r\n                                fill={\r\n                                  isHighlight\r\n                                    ? currentTheme.chartColors.highlightColor\r\n                                    : currentTheme.chartColors.actualLine\r\n                                }\r\n                                stroke={isHighlight ? \"white\" : \"none\"}\r\n                                strokeWidth={isHighlight ? 2 : 0}\r\n                                style={{\r\n                                  filter: isHighlight\r\n                                    ? `drop-shadow(0px 0px 6px ${currentTheme.chartColors.highlightColor})`\r\n                                    : \"none\",\r\n                                }}\r\n                              />\r\n                            );\r\n                          }}\r\n                          activeDot={{\r\n                            r: 8,\r\n                            stroke: \"white\",\r\n                            strokeWidth: 2,\r\n                            fill: currentTheme.chartColors.highlightColor,\r\n                          }}\r\n                        />\r\n                      </ComposedChart>\r\n                    </ResponsiveContainer>\r\n                  </div>\r\n\r\n                  {/* TOP 10 BREAKDOWN VIEW */}\r\n                  {breakdownCards[kpi.kpiName] && (\r\n                    <div\r\n                      className=\"mt-4 bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-5 shadow-xl border-2 border-orange-300\"\r\n                      onClick={(e) => e.stopPropagation()}\r\n                    >\r\n                      <div className=\"flex items-center justify-between mb-4\">\r\n                        <h2 className=\"text-base font-bold text-gray-800 flex items-center gap-2\">\r\n                          <TrendingUp className=\"w-5 h-5 text-orange-600\" />\r\n                          Top 10 Cost Contributors - {kpi.kpiName}\r\n                        </h2>\r\n                        <button\r\n                          onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setBreakdownCards((prev) => ({\r\n                              ...prev,\r\n                              [kpi.kpiName]: false,\r\n                            }));\r\n                          }}\r\n                          className=\"p-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-all shadow-md hover:shadow-lg\"\r\n                        >\r\n                          <X className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        {getTopCostContributors(kpi.kpiName, cardCurrentMonth)\r\n                          .length > 0 ? (\r\n                          getTopCostContributors(\r\n                            kpi.kpiName,\r\n                            cardCurrentMonth\r\n                          ).map((contributor, index) => {\r\n                            const total = getTopCostContributors(\r\n                              kpi.kpiName,\r\n                              cardCurrentMonth\r\n                            ).reduce((sum, c) => sum + c.amount, 0);\r\n                            const percentage =\r\n                              (contributor.amount / total) * 100;\r\n\r\n                            return (\r\n                              <div\r\n                                key={index}\r\n                                className=\"bg-white rounded-lg p-3 shadow-sm hover:shadow-md transition-all\"\r\n                              >\r\n                                <div className=\"flex items-center justify-between mb-2\">\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <span className=\"w-7 h-7 rounded-full bg-gradient-to-br from-orange-400 to-red-500 text-white text-xs font-bold flex items-center justify-center\">\r\n                                      {index + 1}\r\n                                    </span>\r\n                                    <span className=\"font-bold text-gray-800 text-sm\">\r\n                                      {contributor.name}\r\n                                    </span>\r\n                                  </div>\r\n                                  <div className=\"text-right\">\r\n                                    <div className=\"text-sm font-bold text-orange-600\">\r\n                                      {contributor.amount.toLocaleString()}\r\n                                    </div>\r\n                                    <div className=\"text-xs font-semibold text-gray-500\">\r\n                                      {percentage.toFixed(1)}%\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n\r\n                                <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\r\n                                  <div\r\n                                    className=\"bg-gradient-to-r from-orange-400 to-red-500 h-2.5 rounded-full transition-all duration-500\"\r\n                                    style={{ width: `${percentage}%` }}\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })\r\n                        ) : (\r\n                          <div className=\"text-center py-8 text-gray-500\">\r\n                            <AlertCircle className=\"w-12 h-12 mx-auto mb-2 text-gray-400\" />\r\n                            <p className=\"font-bold\">\r\n                              No breakdown data available\r\n                            </p>\r\n                            <p className=\"text-sm font-medium\">\r\n                              for {getMonthName(cardCurrentMonth)} month\r\n                            </p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n\r\n                      <div className=\"mt-4 pt-4 border-t border-orange-200\">\r\n                        <div className=\"flex items-center justify-between text-sm\">\r\n                          <span className=\"text-gray-600 font-bold\">\r\n                            Showing for: {getMonthName(cardCurrentMonth)}\r\n                          </span>\r\n                          <span className=\"text-gray-500 font-medium\">\r\n                            Double-click again to close\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Card double-click handler */}\r\n                  <div\r\n                    className=\"absolute inset-0 cursor-pointer\"\r\n                    style={{\r\n                      zIndex: 0,\r\n                      pointerEvents: isModalOpen ? \"none\" : \"all\",\r\n                    }}\r\n                    onDoubleClick={(e) => {\r\n                      if (isModalOpen) return;\r\n                      e.stopPropagation();\r\n                      setBreakdownCards((prev) => ({\r\n                        ...prev,\r\n                        [kpi.kpiName]: !prev[kpi.kpiName],\r\n                      }));\r\n                    }}\r\n                  />\r\n\r\n                  {/* MODAL */}\r\n                  {isModalOpen && (\r\n                    <ActionInsightsModal\r\n                      kpiName={actionModal.kpiName}\r\n                      month={actionModal.month}\r\n                      position={{ x: actionModal.x, y: actionModal.y }}\r\n                      cardRef={cardRefs.current[kpi.kpiName]}\r\n                      onClose={() => {\r\n                        setActionModal(null);\r\n                      }}\r\n                    />\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`w-full mx-auto p-4 min-h-screen transition-all duration-500 ${currentTheme.mainBg}`}\r\n    >\r\n      {/* COMPACT HEADER SECTION */}\r\n      <div\r\n        className={`${currentTheme.cardBg} rounded-2xl ${currentTheme.shadow} ${currentTheme.border} border p-4 mb-4`}\r\n      >\r\n        {/* Row 1: Category + Location + Line + View Toggle */}\r\n        <div className=\"flex flex-wrap items-center gap-4 mb-4\">\r\n          {/* Category Selection */}\r\n          <div className=\"flex items-center gap-2\">\r\n            {[\"All\", \"Forging\", \"Machining\"].map((category) => (\r\n              <button\r\n                key={category}\r\n                onClick={async () => {\r\n                  setSelectedCategory(category);\r\n\r\n                  //  FIX: Reset location - don't set first location\r\n                  // When category changes, we want ALL PLANTS, not specific plant\r\n                  if (category === \"All\") {\r\n                    setSelectedLocation(null); // or \"All\"\r\n                  } else {\r\n                    // Forging  Machining selected - still show all plants initially\r\n                    setSelectedLocation(null); //  KEY CHANGE\r\n                  }\r\n\r\n                  //  IMPORTANT: Set viewType to production (not sale)\r\n                  const { monthRange, currentYear } = useCostStore.getState();\r\n\r\n                  await fetchCostData(\r\n                    monthRange.from,\r\n                    monthRange.to,\r\n                    currentYear,\r\n                    \"production\" //  Hardcode to production for category selection\r\n                  );\r\n                }}\r\n                className={`px-4 py-2 text-sm rounded-xl font-bold transition-all ${\r\n                  selectedCategory === category\r\n                    ? `bg-gradient-to-r ${currentTheme.accentGradient} text-white shadow-lg scale-105`\r\n                    : `${currentTheme.buttonBg} ${currentTheme.primaryText} hover:scale-105 ${currentTheme.buttonHover}`\r\n                }`}\r\n              >\r\n                {category}\r\n              </button>\r\n            ))}\r\n          </div>\r\n          {/* Divider */}\r\n          {selectedCategory !== \"All\" && (\r\n            <div className=\"h-8 w-px bg-gray-300\" />\r\n          )}\r\n\r\n          {/* Location Selection */}\r\n          {selectedCategory !== \"All\" && (\r\n            <div className=\"flex items-center gap-2\">\r\n              <span\r\n                className={`text-sm font-bold ${currentTheme.mutedText} uppercase`}\r\n              >\r\n                Location:\r\n              </span>\r\n              <div className=\"flex flex-wrap gap-1.5\">\r\n                {locationsByCategory[selectedCategory].map((location) => (\r\n                  <button\r\n                    key={location.code}\r\n                    onClick={() => handleLocationSelect(location.name)}\r\n                    className={`px-3 py-1.5 rounded-lg text-sm font-bold transition-all ${\r\n                      selectedLocation === location.name\r\n                        ? `bg-gradient-to-r ${currentTheme.accentGradient} text-white shadow-md`\r\n                        : `bg-gray-100 ${currentTheme.primaryText} hover:bg-gray-200`\r\n                    }`}\r\n                  >\r\n                    {location.code}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Line Selection */}\r\n          {selectedCategory !== \"All\" &&\r\n            selectedLocation &&\r\n            linesByLocation[selectedLocation] && (\r\n              <>\r\n                <div className=\"h-8 w-px bg-gray-300\" />\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span\r\n                    className={`text-sm font-bold ${currentTheme.mutedText} uppercase`}\r\n                  >\r\n                    Line:\r\n                  </span>\r\n                  <select\r\n                    value={selectedLine}\r\n                    onChange={(e) => setSelectedLine(e.target.value)}\r\n                    className={`px-3 py-1.5 rounded-lg text-xs font-bold border ${currentTheme.border} ${currentTheme.cardBg} focus:outline-none focus:ring-2 focus:ring-blue-400`}\r\n                  >\r\n                    <option value=\"All\">All Lines</option>\r\n                    {linesByLocation[selectedLocation].map((line) => (\r\n                      <option key={line.code} value={line.code}>\r\n                        {line.name} - {line.capacity}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n          {/* Spacer */}\r\n          <div className=\"flex-1\" />\r\n\r\n          {/* View Toggle */}\r\n          <TabToggle theme={currentTheme} />\r\n        </div>\r\n\r\n        {/* Row 2: Month Range Slider */}\r\n        <div\r\n          className={`bg-gradient-to-r from-blue-50/50 to-cyan-50/50 rounded-xl border ${currentTheme.border}`}\r\n        >\r\n          <MonthRangeSlider theme={currentTheme} compact={true} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Charts and Cards */}\r\n      <div>\r\n        {renderCombinedChart()}\r\n        {renderCardsView()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CostScreener;\r\n","import React, { useState } from \"react\";\r\nimport RawMaterialCostChart from \"./RawMaterialCostChart\";\r\nimport CostScreener from \"./costscreener\";\r\n\r\nconst AllPlants = ({ showDetailsPage, chartMode }) => {\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50\">\r\n      <main className=\"flex-1\">\r\n        {showDetailsPage ? (\r\n          <CostScreener />\r\n        ) : (\r\n          <RawMaterialCostChart mode={chartMode} />\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AllPlants;\r\n"],"names":["_ref","categoryAverages","mode","dataForging","plant","total","sales","production","tonnage","categories","RawMaterial","Consumable","Power","Labour","Fuel","SubContract","RepairMaintenance","MachineHire","Establishment","_useState2","_slicedToArray","useState","forgingView","setForgingView","rawData","map","d","_objectSpread","_useState4","tooltip","setTooltip","_useState6","hoveredCategory","setHoveredCategory","selectedData","sort","a","b","colors","categoryLabels","maxHeight","barWidth","getBarData","plantData","segments","currentHeight","Object","entries","_ref2","forEach","category","index","value","segmentHeight","push","y","height","color","stackIndex","generateFlowPath","startSegments","endSegments","startX","endX","paths","categoryMapping","seg","keys","startSeg","find","endSeg","startY1","startY2","endY1","endY2","controlX1","controlX2","pathD","concat","React","key","fill","fillOpacity","stroke","globalStackOrder","reduce","sum","length","_ref4","categoryTotals","className","view","onClick","charAt","toUpperCase","slice","width","chartWidth","x","yAxisWidth","rx","ry","onMouseEnter","onMouseLeave","opacity","textAnchor","chartStartX","cumulativeHeight","_ref6","idx","_ref7","segment","id","x1","y1","x2","y2","offset","stopColor","stopOpacity","onMouseMove","e","clientX","clientY","Sale","toFixed","style","pointerEvents","zIndex","_ref8","_ref9","cat","val","percentage","values","background","p","s","kpiName","month","position","cardRef","onClose","modalPosition","setModalPosition","activeTab","setActiveTab","useEffect","current","cardRect","getBoundingClientRect","top","left","modalWidth","tabs","label","icon","Zap","bg","text","Target","Lightbulb","currentTab","t","content","action","title","TrendingUp","items","improve","CheckCircle","insights","AlertTriangle","ContentIcon","onMouseDown","stopPropagation","preventDefault","backgroundColor","borderRight","borderBottom","border","boxShadow","X","tab","Icon","isActive","type","borderBottomColor","item","ArrowRight","_regeneratorRuntime","exports","Op","prototype","hasOwn","hasOwnProperty","defineProperty","obj","desc","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","makeInvokeMethod","tryCatch","fn","arg","call","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","_typeof","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","state","Error","undefined","done","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","i","doneResult","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","object","reverse","pop","skipTempReset","prev","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","arr","Array","isArray","_arrayWithHoles","_i","_s","_e","_x","_r","_arr","_n","_d","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","toString","from","test","_unsupportedIterableToArray","_nonIterableRest","len","arr2","monthNames","theme","_ref$compact","compact","sliderRef","useRef","isDragging","setIsDragging","dragStartX","setDragStartX","to","initialRange","setInitialRange","monthRange","useCostStore","setMonthRange","currentYear","setCurrentYear","viewType","fetchCostData","apiLoading","currentMonth","Date","getMonth","presets","Math","max","handlePresetClick","_callee","preset","_context","_x2","getPositionFromMonth","getMonthFromPosition","round","min","updateRange","_ref3","_callee2","_context2","_x3","_x4","handleDragStart","_e$touches","_e$touches$","touches","handleDragMove","useCallback","_e$touches2","_e$touches2$","rect","newMonth","deltaX","deltaMonths","newFrom","newTo","handleDragEnd","_callee3","_context3","window","addEventListener","removeEventListener","handleYearChange","_callee4","delta","newYear","_context4","getFullYear","_x5","startPosition","endPosition","activePreset","disabled","ChevronLeft","Calendar","ChevronRight","monthNum","isInRange","isEndpoint","abs","ref","clickedMonth","startPos","endPos","clickPos","onTouchStart","_","themes","ocean","mainBg","cardBg","modalBg","primaryText","secondaryText","mutedText","shadow","chartBg","gridColor","buttonBg","buttonHover","cardGradient","dotPattern","accentGradient","glowEffect","hoverGlow","chartColors","actualLine","predictedLine","targetLine","actualFill","predictedFill","goodColor","badColor","ebitdaActual","ebitdaBudget","percentActual","percentPredicted","highlightColor","sunset","forest","lavender","midnight","rose","arctic","amber","neon","axisTextColor","coral","iconMap","Consumables","Package","Users","Handshake","Settings","Wrench","Building","Packing","Box","Freight","Truck","Factory","getMonthName","monthNo","CustomTooltip","active","payload","uniqueEntries","filter","findIndex","dataKey","includes","toLocaleString","TabToggle","setViewType","handleToggle","apiData","apiError","selectedTheme","setSelectedTheme","selectedLocation","setSelectedLocation","currentPeriodMonth","setCurrentPeriodMonth","showThemeSelector","setShowThemeSelector","selectedCategory","setSelectedCategory","selectedLine","setSelectedLine","_useState8","showCombinedValues","setShowCombinedValues","_useState10","_useState12","cardCurrentMonths","_useState14","breakdownCards","setBreakdownCards","_useState16","actionModal","setActionModal","cardRefs","themeSelectorRef","currentTheme","handleLocationSelect","locationName","_useCostStore$getStat","openPowerForm","location","href","origin","linesByLocation","Ranjangaon","code","status","capacity","Mundhwa","console","log","handleClickOutside","event","contains","target","document","data","getTopCostContributors","cardCurrentMonth","kpiData","cost_head","trim","month_no","contributors","sub_category","amount","parseFloat","total_amount","_ref5","renderCustomLabel","props","viewBox","offsetY","fontSize","fontWeight","_useCostStore$getStat2","All","Forging","Machining","onChange","line","MonthRangeSlider","baseData","monthlyData","monthName","costs","count","costHead","sortedData","m","monthData","TotalActual","TotalPredicted","EBITDAActual","EBITDABudget","PercentActual","PercentPredicted","PercentTarget","transformApiDataToChartFormat","combinedData","actualTotals","v","dynamicTarget","Palette","Check","ResponsiveContainer","LineChart","margin","right","bottom","XAxis","tick","YAxis","Tooltip","Legend","wrapperStyle","ReferenceLine","strokeWidth","Line","dot","r","strokeDasharray","CartesianGrid","renderCombinedChart","costHeadData","costValue","cost_per_ton","totalAmount","totalTonn","total_tonn","monthlyAmounts","months","Number","trend","lastMonthAmount","budgetAmount","actual_per_tonne","budget_per_tonne","monthly_costs","monthly_budget","production_percentage","target_percentage","transformApiDataToKpiCards","kpi","_chartData$Math$max","_chartData$Math$min","IconComponent","chartData","_kpi$target_percentag","_historicalData","_kpi$production_perce2","avgTrendValue","targetValue","avgTargetPercent","historicalData","_kpi$production_perce","actualMonthNo","isCurrentMonth","actual","prediction","productionPercentPredicted","productionPercent","productionTarget","isHistorical","isHighlighted","variance","lastValue","prevValue","costDirection","nextMonthNo","monthIndex","predictedValue","percentLength","lastPercent","predictionData","targetForCheck","productionTargetForCheck","buildChartData","currentMonthIndex","highlightIndex","budget","isOverBudget","isModalOpen","ArrowUp","ArrowDown","cursor","currentTarget","clickX","clickY","historicalPoints","pointSpacing","clickedIndex","point","ComposedChart","domain","ReferenceArea","strokeOpacity","Area","cx","cy","isHighlight","activeDot","_defineProperty","contributor","c","AlertCircle","onDoubleClick","ActionInsightsModal","showDetailsPage","chartMode","CostScreener","RawMaterialCostChart"],"sourceRoot":""}